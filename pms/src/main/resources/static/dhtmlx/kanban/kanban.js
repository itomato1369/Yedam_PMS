var kanban=function(Le){"use strict";/**
@license

DHTMLX Kanban v.1.7.1 

This software is covered by DHTMLX Evaluation License and purposed only for evaluation.
Contact sales@dhtmlx.com to get Commercial or Enterprise license.
Usage without proper license is prohibited.

(c) XB Software.

**/
const Ve=Symbol(),ra=!1;var nr=Array.isArray,rr=Array.from,vo=Object.defineProperty,gt=Object.getOwnPropertyDescriptor,aa=Object.getOwnPropertyDescriptors,fo=Object.prototype,ho=Array.prototype,xn=Object.getPrototypeOf;function Ht(n){return typeof n=="function"}const Ee=()=>{};function mo(n){return n()}function ar(n){for(var e=0;e<n.length;e++)n[e]()}const _t=2,ia=4,$t=8,bn=16,tt=32,en=64,Pt=128,pn=256,Je=512,Rt=1024,kn=2048,lt=4096,tn=8192,oa=16384,qt=32768,go=65536,sa=1<<18,la=1<<19,pt=Symbol("$state"),_o=Symbol("");function ca(n){return n===this.v}function Sn(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function ir(n){return!Sn(n,this.v)}function wo(n){throw new Error("effect_in_teardown")}function yo(){throw new Error("effect_in_unowned_derived")}function xo(n){throw new Error("effect_orphan")}function bo(){throw new Error("effect_update_depth_exceeded")}function po(n){throw new Error("props_invalid_value")}function ko(){throw new Error("state_descriptors_fixed")}function So(){throw new Error("state_prototype_fixed")}function Io(){throw new Error("state_unsafe_local_read")}function Eo(){throw new Error("state_unsafe_mutation")}function Ze(n){return{f:0,v:n,reactions:null,equals:ca,version:0}}function ae(n){return Co(Ze(n))}function or(n,e=!1){const t=Ze(n);return e||(t.equals=ir),Me!==null&&Me.l!==null&&(Me.l.s??=[]).push(t),t}function Co(n){return Ce!==null&&Ce.f&_t&&(dt===null?Ro([n]):dt.push(n)),n}function B(n,e){return Ce!==null&&An()&&Ce.f&(_t|bn)&&(dt===null||!dt.includes(n))&&Eo(),sr(n,e)}function sr(n,e){return n.equals(e)||(n.v=e,n.version=Da(),da(n,Rt),An()&&ye!==null&&ye.f&Je&&!(ye.f&tt)&&(He!==null&&He.includes(n)?(ut(ye,Rt),Pn(ye)):St===null?Lo([n]):St.push(n))),e}function da(n,e){var t=n.reactions;if(t!==null)for(var r=An(),a=t.length,i=0;i<a;i++){var s=t[i],l=s.f;l&Rt||!r&&s===ye||(ut(s,e),l&(Je|Pt)&&(l&_t?da(s,kn):Pn(s)))}}function O(n){var e=_t|Rt;ye===null?e|=Pt:ye.f|=la;const t={children:null,ctx:Me,deps:null,equals:ca,f:e,fn:n,reactions:null,v:null,version:0,parent:ye};if(Ce!==null&&Ce.f&_t){var r=Ce;(r.children??=[]).push(t)}return t}function ua(n){const e=O(n);return e.equals=ir,e}function va(n){var e=n.children;if(e!==null){n.children=null;for(var t=0;t<e.length;t+=1){var r=e[t];r.f&_t?lr(r):xt(r)}}}function fa(n){var e,t=ye;$e(n.parent);try{va(n),e=Ma(n)}finally{$e(t)}return e}function ha(n){var e=fa(n),t=(Vt||n.f&Pt)&&n.deps!==null?kn:Je;ut(n,t),n.equals(e)||(n.v=e,n.version=Da())}function lr(n){va(n),on(n,0),ut(n,tn),n.v=n.children=n.deps=n.ctx=n.reactions=null}function ma(n){ye===null&&Ce===null&&xo(),Ce!==null&&Ce.f&Pt&&yo(),fr&&wo()}function Do(n,e){var t=e.last;t===null?e.last=e.first=n:(t.next=n,n.prev=t,e.last=n)}function Ut(n,e,t,r=!0){var a=(n&en)!==0,i=ye,s={ctx:Me,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:n|Rt,first:null,fn:e,last:null,next:null,parent:a?null:i,prev:null,teardown:null,transitions:null,version:0};if(t){var l=Yt;try{Ia(!0),Tn(s),s.f|=oa}catch(v){throw xt(s),v}finally{Ia(l)}}else e!==null&&Pn(s);var d=t&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&la)===0;if(!d&&!a&&r&&(i!==null&&Do(s,i),Ce!==null&&Ce.f&_t)){var c=Ce;(c.children??=[]).push(s)}return s}function cr(n){const e=Ut($t,null,!1);return ut(e,Je),e.teardown=n,e}function nt(n){ma();var e=ye!==null&&(ye.f&tt)!==0&&Me!==null&&!Me.m;if(e){var t=Me;(t.e??=[]).push({fn:n,effect:ye,reaction:Ce})}else{var r=wt(n);return r}}function ga(n){return ma(),In(n)}function Mo(n){const e=Ut(en,n,!0);return()=>{xt(e)}}function wt(n){return Ut(ia,n,!1)}function In(n){return Ut($t,n,!0)}function F(n){return kt(n)}function kt(n,e=0){return Ut($t|bn|e,n,!0)}function yt(n,e=!0){return Ut($t|tt,n,!0,e)}function _a(n){var e=n.teardown;if(e!==null){const t=fr,r=Ce;Ea(!0),ct(null);try{e.call(null)}finally{Ea(t),ct(r)}}}function wa(n){var e=n.deriveds;if(e!==null){n.deriveds=null;for(var t=0;t<e.length;t+=1)lr(e[t])}}function ya(n,e=!1){var t=n.first;for(n.first=n.last=null;t!==null;){var r=t.next;xt(t,e),t=r}}function Ao(n){for(var e=n.first;e!==null;){var t=e.next;e.f&tt||xt(e),e=t}}function xt(n,e=!0){var t=!1;if((e||n.f&sa)&&n.nodes_start!==null){for(var r=n.nodes_start,a=n.nodes_end;r!==null;){var i=r===a?null:Ln(r);r.remove(),r=i}t=!0}ya(n,e&&!t),wa(n),on(n,0),ut(n,tn);var s=n.transitions;if(s!==null)for(const d of s)d.stop();_a(n);var l=n.parent;l!==null&&l.first!==null&&xa(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.parent=n.fn=n.nodes_start=n.nodes_end=null}function xa(n){var e=n.parent,t=n.prev,r=n.next;t!==null&&(t.next=r),r!==null&&(r.prev=t),e!==null&&(e.first===n&&(e.first=r),e.last===n&&(e.last=t))}function nn(n,e){var t=[];dr(n,t,!0),ba(t,()=>{xt(n),e&&e()})}function ba(n,e){var t=n.length;if(t>0){var r=()=>--t||e();for(var a of n)a.out(r)}else e()}function dr(n,e,t){if(!(n.f&lt)){if(n.f^=lt,n.transitions!==null)for(const s of n.transitions)(s.is_global||t)&&e.push(s);for(var r=n.first;r!==null;){var a=r.next,i=(r.f&qt)!==0||(r.f&tt)!==0;dr(r,e,i?t:!1),r=a}}}function En(n){pa(n,!0)}function pa(n,e){if(n.f&lt){an(n)&&Tn(n),n.f^=lt;for(var t=n.first;t!==null;){var r=t.next,a=(t.f&qt)!==0||(t.f&tt)!==0;pa(t,a?e:!1),t=r}if(n.transitions!==null)for(const i of n.transitions)(i.is_global||e)&&i.in()}}let Cn=!1,ur=[];function ka(){Cn=!1;const n=ur.slice();ur=[],ar(n)}function Dn(n){Cn||(Cn=!0,queueMicrotask(ka)),ur.push(n)}function To(){Cn&&ka()}function vr(n){throw new Error("lifecycle_outside_component")}const Sa=0,Po=1;let Mn=Sa,rn=!1,Yt=!1,fr=!1;function Ia(n){Yt=n}function Ea(n){fr=n}let Lt=[],Kt=0,Jm=[],Ce=null;function ct(n){Ce=n}let ye=null;function $e(n){ye=n}let dt=null;function Ro(n){dt=n}let He=null,Qe=0,St=null;function Lo(n){St=n}let Ca=0,Vt=!1,Me=null;function Da(){return++Ca}function An(){return Me!==null&&Me.l===null}function an(n){var e=n.f;if(e&Rt)return!0;if(e&kn){var t=n.deps,r=(e&Pt)!==0;if(t!==null){var a;if(e&pn){for(a=0;a<t.length;a++)(t[a].reactions??=[]).push(n);n.f^=pn}for(a=0;a<t.length;a++){var i=t[a];if(an(i)&&ha(i),r&&ye!==null&&!Vt&&!i?.reactions?.includes(n)&&(i.reactions??=[]).push(n),i.version>n.version)return!0}}r||ut(n,Je)}return!1}function Fo(n,e,t){throw n}function Ma(n){var e=He,t=Qe,r=St,a=Ce,i=Vt,s=dt,l=Me,d=n.f;He=null,Qe=0,St=null,Ce=d&(tt|en)?null:n,Vt=!Yt&&(d&Pt)!==0,dt=null,Me=n.ctx;try{var c=(0,n.fn)(),v=n.deps;if(He!==null){var u;if(on(n,Qe),v!==null&&Qe>0)for(v.length=Qe+He.length,u=0;u<He.length;u++)v[Qe+u]=He[u];else n.deps=v=He;if(!Vt)for(u=Qe;u<v.length;u++)(v[u].reactions??=[]).push(n)}else v!==null&&Qe<v.length&&(on(n,Qe),v.length=Qe);return c}finally{He=e,Qe=t,St=r,Ce=a,Vt=i,dt=s,Me=l}}function Oo(n,e){let t=e.reactions;if(t!==null){var r=t.indexOf(n);if(r!==-1){var a=t.length-1;a===0?t=e.reactions=null:(t[r]=t[a],t.pop())}}t===null&&e.f&_t&&(He===null||!He.includes(e))&&(ut(e,kn),e.f&(Pt|pn)||(e.f^=pn),on(e,0))}function on(n,e){var t=n.deps;if(t!==null)for(var r=e;r<t.length;r++)Oo(n,t[r])}function Tn(n){var e=n.f;if(!(e&tn)){ut(n,Je);var t=ye;ye=n;try{e&bn?Ao(n):ya(n),wa(n),_a(n);var r=Ma(n);n.teardown=typeof r=="function"?r:null,n.version=Ca}catch(a){Fo(a)}finally{ye=t}}}function Aa(){Kt>1e3&&(Kt=0,bo()),Kt++}function Ta(n){var e=n.length;if(e!==0){Aa();var t=Yt;Yt=!0;try{for(var r=0;r<e;r++){var a=n[r];a.f&Je||(a.f^=Je);var i=[];Pa(a,i),zo(i)}}finally{Yt=t}}}function zo(n){var e=n.length;if(e!==0)for(var t=0;t<e;t++){var r=n[t];!(r.f&(tn|lt))&&an(r)&&(Tn(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?xa(r):r.fn=null))}}function Bo(){if(rn=!1,Kt>1001)return;const n=Lt;Lt=[],Ta(n),rn||(Kt=0)}function Pn(n){Mn===Sa&&(rn||(rn=!0,queueMicrotask(Bo)));for(var e=n;e.parent!==null;){e=e.parent;var t=e.f;if(t&(en|tt)){if(!(t&Je))return;e.f^=Je}}Lt.push(e)}function Pa(n,e){var t=n.first,r=[];e:for(;t!==null;){var a=t.f,i=(a&tt)!==0,s=i&&(a&Je)!==0;if(!s&&!(a&lt))if(a&$t){i?t.f^=Je:an(t)&&Tn(t);var l=t.first;if(l!==null){t=l;continue}}else a&ia&&r.push(t);var d=t.next;if(d===null){let u=t.parent;for(;u!==null;){if(n===u)break e;var c=u.next;if(c!==null){t=c;continue e}u=u.parent}}t=d}for(var v=0;v<r.length;v++)l=r[v],e.push(l),Pa(l,e)}function Ra(n){var e=Mn,t=Lt;try{Aa();const a=[];Mn=Po,Lt=a,rn=!1,Ta(t);var r=n?.();return To(),(Lt.length>0||a.length>0)&&Ra(),Kt=0,r}finally{Mn=e,Lt=t}}async function Ft(){await Promise.resolve(),Ra()}function o(n){var e=n.f,t=(e&_t)!==0;if(t&&e&tn){var r=fa(n);return lr(n),r}if(Ce!==null){dt!==null&&dt.includes(n)&&Io();var a=Ce.deps;He===null&&a!==null&&a[Qe]===n?Qe++:He===null?He=[n]:He.push(n),St!==null&&ye!==null&&ye.f&Je&&!(ye.f&tt)&&St.includes(n)&&(ut(ye,Rt),Pn(ye))}else if(t&&n.deps===null){var i=n,s=i.parent;s!==null&&!s.deriveds?.includes(i)&&(s.deriveds??=[]).push(i)}return t&&(i=n,an(i)&&ha(i)),n.v}function et(n){return n&&o(n)}function be(n){const e=Ce;try{return Ce=null,n()}finally{Ce=e}}const No=-3585;function ut(n,e){n.f=n.f&No|e}function me(n){return La().get(n)}function bt(n,e){return La().set(n,e),e}function La(n){return Me===null&&vr(),Me.c??=new Map(Ho(Me)||void 0)}function Ho(n){let e=n.p;for(;e!==null;){const t=e.c;if(t!==null)return t;e=e.p}return null}function ne(n,e=!1,t){Me={p:Me,c:null,e:null,m:!1,s:n,x:null,l:null},e||(Me.l={s:null,u:null,r1:[],r2:Ze(!1)})}function re(n){const e=Me;if(e!==null){n!==void 0&&(e.x=n);const s=e.e;if(s!==null){var t=ye,r=Ce;e.e=null;try{for(var a=0;a<s.length;a++){var i=s[a];$e(i.effect),ct(i.reaction),wt(i.fn)}}finally{$e(t),ct(r)}}Me=e.p,e.m=!0}return n||{}}function Fa(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(pt in n)hr(n);else if(!Array.isArray(n))for(let e in n){const t=n[e];typeof t=="object"&&t&&pt in t&&hr(t)}}}function hr(n,e=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!e.has(n)){e.add(n),n instanceof Date&&n.getTime();for(let r in n)try{hr(n[r],e)}catch{}const t=xn(n);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const r=aa(t);for(let a in r){const i=r[a].get;if(i)try{i.call(n)}catch{}}}}}function Q(n,e=null,t){if(typeof n!="object"||n===null||pt in n)return n;const r=xn(n);if(r!==fo&&r!==ho)return n;var a=new Map,i=nr(n),s=Ze(0);i&&a.set("length",Ze(n.length));var l;return new Proxy(n,{defineProperty(d,c,v){(!("value"in v)||v.configurable===!1||v.enumerable===!1||v.writable===!1)&&ko();var u=a.get(c);return u===void 0?(u=Ze(v.value),a.set(c,u)):B(u,Q(v.value,l)),!0},deleteProperty(d,c){var v=a.get(c);if(v===void 0)c in d&&a.set(c,Ze(Ve));else{if(i&&typeof c=="string"){var u=a.get("length"),h=Number(c);Number.isInteger(h)&&h<u.v&&B(u,h)}B(v,Ve),Oa(s)}return!0},get(d,c,v){if(c===pt)return n;var u=a.get(c),h=c in d;if(u===void 0&&(!h||gt(d,c)?.writable)&&(u=Ze(Q(h?d[c]:Ve,l)),a.set(c,u)),u!==void 0){var _=o(u);return _===Ve?void 0:_}return Reflect.get(d,c,v)},getOwnPropertyDescriptor(d,c){var v=Reflect.getOwnPropertyDescriptor(d,c);if(v&&"value"in v){var u=a.get(c);u&&(v.value=o(u))}else if(v===void 0){var h=a.get(c),_=h?.v;if(h!==void 0&&_!==Ve)return{enumerable:!0,configurable:!0,value:_,writable:!0}}return v},has(d,c){if(c===pt)return!0;var v=a.get(c),u=v!==void 0&&v.v!==Ve||Reflect.has(d,c);if(v!==void 0||ye!==null&&(!u||gt(d,c)?.writable)){v===void 0&&(v=Ze(u?Q(d[c],l):Ve),a.set(c,v));var h=o(v);if(h===Ve)return!1}return u},set(d,c,v,u){var h=a.get(c),_=c in d;if(i&&c==="length")for(var f=v;f<h.v;f+=1){var m=a.get(f+"");m!==void 0?B(m,Ve):f in d&&(m=Ze(Ve),a.set(f+"",m))}h===void 0?(!_||gt(d,c)?.writable)&&(h=Ze(void 0),B(h,Q(v,l)),a.set(c,h)):(_=h.v!==Ve,B(h,Q(v,l)));var w=Reflect.getOwnPropertyDescriptor(d,c);if(w?.set&&w.set.call(u,v),!_){if(i&&typeof c=="string"){var k=a.get("length"),b=Number(c);Number.isInteger(b)&&b>=k.v&&B(k,b+1)}Oa(s)}return!0},ownKeys(d){o(s);var c=Reflect.ownKeys(d).filter(h=>{var _=a.get(h);return _===void 0||_.v!==Ve});for(var[v,u]of a)u.v!==Ve&&!(v in d)&&c.push(v);return c},setPrototypeOf(){So()}})}function Oa(n,e=1){B(n,n.v+e)}function za(n){return n!==null&&typeof n=="object"&&pt in n?n[pt]:n}function qo(n,e){return Object.is(za(n),za(e))}var Rn,Ba,Na;function Uo(){if(Rn===void 0){Rn=window;var n=Element.prototype,e=Node.prototype;Ba=gt(e,"firstChild").get,Na=gt(e,"nextSibling").get,n.__click=void 0,n.__className="",n.__attributes=null,n.__styles=null,n.__e=void 0,Text.prototype.__t=void 0}}function sn(n=""){return document.createTextNode(n)}function ln(n){return Ba.call(n)}function Ln(n){return Na.call(n)}function C(n,e){return ln(n)}function G(n,e){{var t=ln(n);return t instanceof Comment&&t.data===""?Ln(t):t}}function U(n,e=1,t=!1){let r=n;for(;e--;)r=Ln(r);return r}function Yo(n){n.textContent=""}let Ha=!1;const qa=new Set,mr=new Set;function Ko(n,e,t,r){function a(i){if(r.capture||cn.call(e,i),!i.cancelBubble){var s=Ce,l=ye;ct(null),$e(null);try{return t.call(this,i)}finally{ct(s),$e(l)}}}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?Dn(()=>{e.addEventListener(n,a,r)}):e.addEventListener(n,a,r),a}function qe(n,e,t,r,a){var i={capture:r,passive:a},s=Ko(n,e,t,i);(e===document.body||e===window||e===document)&&cr(()=>{e.removeEventListener(n,s,i)})}function ge(n){for(var e=0;e<n.length;e++)qa.add(n[e]);for(var t of mr)t(n)}function cn(n){var e=this,t=e.ownerDocument,r=n.type,a=n.composedPath?.()||[],i=a[0]||n.target,s=0,l=n.__root;if(l){var d=a.indexOf(l);if(d!==-1&&(e===document||e===window)){n.__root=e;return}var c=a.indexOf(e);if(c===-1)return;d<=c&&(s=d)}if(i=a[s]||n.target,i!==e){vo(n,"currentTarget",{configurable:!0,get(){return i||t}});var v=Ce,u=ye;ct(null),$e(null);try{for(var h,_=[];i!==null;){var f=i.assignedSlot||i.parentNode||i.host||null;try{var m=i["__"+r];if(m!==void 0&&!i.disabled)if(nr(m)){var[w,...k]=m;w.apply(i,[n,...k])}else m.call(i,n)}catch(b){h?_.push(b):h=b}if(n.cancelBubble||f===e||f===null)break;i=f}if(h){for(let b of _)queueMicrotask(()=>{throw b});throw h}}finally{n.__root=e,delete n.currentTarget,ct(v),$e(u)}}}function gr(n){var e;e=document.head.appendChild(sn());try{kt(()=>n(e),sa)}finally{}}function Ua(n){var e=document.createElement("template");return e.innerHTML=n,e.content}function dn(n,e){var t=ye;t.nodes_start===null&&(t.nodes_start=n,t.nodes_end=e)}function I(n,e){var t=(e&1)!==0,r=(e&2)!==0,a,i=!n.startsWith("<!>");return()=>{a===void 0&&(a=Ua(i?n:"<!>"+n),t||(a=ln(a)));var s=r?document.importNode(a,!0):a.cloneNode(!0);if(t){var l=ln(s),d=s.lastChild;dn(l,d)}else dn(s,s);return s}}function pe(n=""){{var e=sn(n+"");return dn(e,e),e}}function $(){var n=document.createDocumentFragment(),e=document.createComment(""),t=sn();return n.append(e,t),dn(e,t),n}function g(n,e){n!==null&&n.before(e)}const Vo=["touchstart","touchmove"];function Go(n){return Vo.includes(n)}let _r=!0;function ee(n,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(n.__t??=n.nodeValue)&&(n.__t=t,n.nodeValue=t==null?"":t+"")}function Fn(n,e){return Wo(n,e)}const Gt=new Map;function Wo(n,{target:e,anchor:t,props:r={},events:a,context:i,intro:s=!0}){Uo();var l=new Set,d=u=>{for(var h=0;h<u.length;h++){var _=u[h];if(!l.has(_)){l.add(_);var f=Go(_);e.addEventListener(_,cn,{passive:f});var m=Gt.get(_);m===void 0?(document.addEventListener(_,cn,{passive:f}),Gt.set(_,1)):Gt.set(_,m+1)}}};d(rr(qa)),mr.add(d);var c=void 0,v=Mo(()=>{var u=t??e.appendChild(sn());return yt(()=>{if(i){ne({});var h=Me;h.c=i}a&&(r.$$events=a),_r=s,c=n(u,r)||{},_r=!0,i&&re()}),()=>{for(var h of l){e.removeEventListener(h,cn);var _=Gt.get(h);--_===0?(document.removeEventListener(h,cn),Gt.delete(h)):Gt.set(h,_)}mr.delete(d),wr.delete(c),u!==t&&u.parentNode?.removeChild(u)}});return wr.set(c,v),c}let wr=new WeakMap;function yr(n){const e=wr.get(n);e&&e()}function R(n,e,t,r=null,a=!1){var i=n,s=null,l=null,d=null,c=a?qt:0;kt(()=>{d!==(d=!!e())&&(d?(s?En(s):s=yt(()=>t(i)),l&&nn(l,()=>{l=null})):(l?En(l):r&&(l=yt(()=>r(i))),s&&nn(s,()=>{s=null})))},c)}function Ya(n,e,t){var r=n,a=Ve,i;kt(()=>{Sn(a,a=e())&&(i&&nn(i),i=yt(()=>t(r)))})}let xr=null;function rt(n,e){return e}function jo(n,e,t,r){for(var a=[],i=e.length,s=0;s<i;s++)dr(e[s].e,a,!0);var l=i>0&&a.length===0&&t!==null;if(l){var d=t.parentNode;Yo(d),d.append(t),r.clear(),It(n,e[0].prev,e[i-1].next)}ba(a,()=>{for(var c=0;c<i;c++){var v=e[c];l||(r.delete(v.k),It(n,v.prev,v.next)),xt(v.e,!l)}})}function Se(n,e,t,r,a,i=null){var s=n,l={flags:e,items:new Map,first:null},d=(e&4)!==0;if(d){var c=n;s=c.appendChild(sn())}var v=null,u=!1;kt(()=>{var h=t(),_=nr(h)?h:h==null?[]:rr(h),f=_.length;if(!(u&&f===0)){u=f===0;{var m=Ce;Jo(_,l,s,a,e,(m.f&lt)!==0,r)}i!==null&&(f===0?v?En(v):v=yt(()=>i(s)):v!==null&&nn(v,()=>{v=null})),t()}})}function Jo(n,e,t,r,a,i,s){var l=(a&8)!==0,d=(a&3)!==0,c=n.length,v=e.items,u=e.first,h=u,_,f=null,m,w=[],k=[],b,x,y,E;if(l)for(E=0;E<c;E+=1)b=n[E],x=s(b,E),y=v.get(x),y!==void 0&&(y.a?.measure(),(m??=new Set).add(y));for(E=0;E<c;E+=1){if(b=n[E],x=s(b,E),y=v.get(x),y===void 0){var p=h?h.e.nodes_start:t;f=Qo(p,e,f,f===null?e.first:f.next,b,x,E,r,a),v.set(x,f),w=[],k=[],h=f.next;continue}if(d&&Zo(y,b,E,a),y.e.f&lt&&(En(y.e),l&&(y.a?.unfix(),(m??=new Set).delete(y))),y!==h){if(_!==void 0&&_.has(y)){if(w.length<k.length){var P=k[0],A;f=P.prev;var N=w[0],V=w[w.length-1];for(A=0;A<w.length;A+=1)Ka(w[A],P,t);for(A=0;A<k.length;A+=1)_.delete(k[A]);It(e,N.prev,V.next),It(e,f,N),It(e,V,P),h=P,f=V,E-=1,w=[],k=[]}else _.delete(y),Ka(y,h,t),It(e,y.prev,y.next),It(e,y,f===null?e.first:f.next),It(e,f,y),f=y;continue}for(w=[],k=[];h!==null&&h.k!==x;)(i||!(h.e.f&lt))&&(_??=new Set).add(h),k.push(h),h=h.next;if(h===null)continue;y=h}w.push(y),f=y,h=y.next}if(h!==null||_!==void 0){for(var W=_===void 0?[]:rr(_);h!==null;)(i||!(h.e.f&lt))&&W.push(h),h=h.next;var Z=W.length;if(Z>0){var L=a&4&&c===0?t:null;if(l){for(E=0;E<Z;E+=1)W[E].a?.measure();for(E=0;E<Z;E+=1)W[E].a?.fix()}jo(e,W,L,v)}}l&&Dn(()=>{if(m!==void 0)for(y of m)y.a?.apply()}),ye.first=e.first&&e.first.e,ye.last=f&&f.e}function Zo(n,e,t,r){r&1&&sr(n.v,e),r&2?sr(n.i,t):n.i=t}function Qo(n,e,t,r,a,i,s,l,d){var c=xr;try{var v=(d&1)!==0,u=(d&16)===0,h=v?u?or(a):Ze(a):a,_=d&2?Ze(s):s,f={i:_,v:h,k:i,a:null,e:null,prev:t,next:r};return xr=f,f.e=yt(()=>l(n,h,_),Ha),f.e.prev=t&&t.e,f.e.next=r&&r.e,t===null?e.first=f:(t.next=f,t.e.next=f.e),r!==null&&(r.prev=f,r.e.prev=f.e),f}finally{xr=c}}function Ka(n,e,t){for(var r=n.next?n.next.e.nodes_start:t,a=e?e.e.nodes_start:t,i=n.e.nodes_start;i!==r;){var s=Ln(i);a.before(i),i=s}}function It(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function On(n,e,t,r,a){var i=n,s="",l;kt(()=>{s!==(s=e()??"")&&(l!==void 0&&(xt(l),l=void 0),s!==""&&(l=yt(()=>{var d=s+"",c=Ua(d);dn(ln(c),c.lastChild),i.before(c)})))})}function Ie(n,e,...t){var r=n,a=Ee,i;kt(()=>{a!==(a=e())&&(i&&(xt(i),i=null),i=yt(()=>a(r,...t)))},qt)}function Et(n,e,t){var r=n,a,i;kt(()=>{a!==(a=e())&&(i&&(nn(i),i=null),a&&(i=yt(()=>t(r,a))))},qt)}function Be(n,e,t){wt(()=>{var r=be(()=>e(n,t?.())||{});if(t&&r?.update){var a=!1,i={};In(()=>{var s=t();Fa(s),a&&Sn(i,s)&&(i=s,r.update(s))}),a=!0}if(r?.destroy)return()=>r.destroy()})}let Va=!1;function Xo(){Va||(Va=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{if(!n.defaultPrevented)for(const e of n.target.elements)e.__on_r?.()})},{capture:!0}))}function Ot(n,e){var t=n.__attributes??={};t.value===(t.value=e)||n.value===e&&(e!==0||n.nodeName!=="PROGRESS")||(n.value=e)}function $o(n,e){var t=n.__attributes??={};t.checked!==(t.checked=e)&&(n.checked=e)}function J(n,e,t,r){var a=n.__attributes??={};a[e]!==(a[e]=t)&&(e==="style"&&"__styles"in n&&(n.__styles={}),e==="loading"&&(n[_o]=t),t==null?n.removeAttribute(e):typeof t!="string"&&es(n).includes(e)?n[e]=t:n.setAttribute(e,t))}var Ga=new Map;function es(n){var e=Ga.get(n.nodeName);if(e)return e;Ga.set(n.nodeName,e=[]);for(var t,r=xn(n),a=Element.prototype;a!==r;){t=aa(r);for(var i in t)t[i].set&&e.push(i);r=xn(r)}return e}function we(n,e){var t=n.__className,r=ts(e);(t!==r||Ha)&&(e==null?n.removeAttribute("class"):n.className=r,n.__className=r)}function ts(n){return n??""}function he(n,e,t){if(t){if(n.classList.contains(e))return;n.classList.add(e)}else{if(!n.classList.contains(e))return;n.classList.remove(e)}}const ns=()=>performance.now(),Ct={tick:n=>requestAnimationFrame(n),now:()=>ns(),tasks:new Set};function Wa(n){Ct.tasks.forEach(e=>{e.c(n)||(Ct.tasks.delete(e),e.f())}),Ct.tasks.size!==0&&Ct.tick(Wa)}function rs(n){let e;return Ct.tasks.size===0&&Ct.tick(Wa),{promise:new Promise(t=>{Ct.tasks.add(e={c:n,f:t})}),abort(){Ct.tasks.delete(e)}}}function zn(n,e){n.dispatchEvent(new CustomEvent(e))}function as(n){if(n==="float")return"cssFloat";if(n==="offset")return"cssOffset";if(n.startsWith("--"))return n;const e=n.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function ja(n){const e={},t=n.split(";");for(const r of t){const[a,i]=r.split(":");if(!a||i===void 0)break;const s=as(a.trim());e[s]=i.trim()}return e}const is=n=>n;function br(n,e,t,r){var a=(n&4)!==0,i="both",s,l=e.inert,d,c;function v(){var m=Ce,w=ye;ct(null),$e(null);try{return s??=t()(e,r?.()??{},{direction:i})}finally{ct(m),$e(w)}}var u={is_global:a,in(){e.inert=l,zn(e,"introstart"),d=pr(e,v(),c,1,()=>{zn(e,"introend"),d?.abort(),d=s=void 0})},out(m){e.inert=!0,zn(e,"outrostart"),c=pr(e,v(),d,0,()=>{zn(e,"outroend"),m?.()})},stop:()=>{d?.abort(),c?.abort()}},h=ye;if((h.transitions??=[]).push(u),_r){var _=a;if(!_){for(var f=h.parent;f&&f.f&qt;)for(;(f=f.parent)&&!(f.f&bn););_=!f||(f.f&oa)!==0}_&&wt(()=>{be(()=>u.in())})}}function pr(n,e,t,r,a){var i=r===1;if(Ht(e)){var s,l=!1;return Dn(()=>{if(!l){var w=e({direction:i?"in":"out"});s=pr(n,w,t,r,a)}}),{abort:()=>{l=!0,s?.abort()},deactivate:()=>s.deactivate(),reset:()=>s.reset(),t:()=>s.t()}}if(t?.deactivate(),!e?.duration)return a(),{abort:Ee,deactivate:Ee,reset:Ee,t:()=>r};const{delay:d=0,css:c,tick:v,easing:u=is}=e;var h=[];if(i&&t===void 0&&(v&&v(0,1),c)){var _=ja(c(0,1));h.push(_,_)}var f=()=>1-r,m=n.animate(h,{duration:d});return m.onfinish=()=>{var w=t?.t()??1-r;t?.abort();var k=r-w,b=e.duration*Math.abs(k),x=[];if(b>0){if(c)for(var y=Math.ceil(b/16.666666666666668),E=0;E<=y;E+=1){var p=w+k*u(E/y),P=c(p,1-p);x.push(ja(P))}f=()=>{var A=m.currentTime;return w+k*u(A/b)},v&&rs(()=>{if(m.playState!=="running")return!1;var A=f();return v(A,1-A),!0})}m=n.animate(x,{duration:b,fill:"forwards"}),m.onfinish=()=>{f=()=>r,v?.(r,1-r),a()}},{abort:()=>{m&&(m.cancel(),m.effect=null,m.onfinish=Ee)},deactivate:()=>{a=Ee},reset:()=>{r===0&&v?.(1,0)},t:()=>f()}}function Ja(n,e,t,r=t){n.addEventListener(e,t);const a=n.__on_r;a?n.__on_r=()=>{a(),r()}:n.__on_r=r,Xo()}function un(n,e,t=e){var r=An();Ja(n,"input",()=>{var a=Za(n)?Qa(n.value):n.value;t(a),r&&a!==(a=e())&&(n.value=a??"")}),In(()=>{var a=e();Za(n)&&a===Qa(n.value)||n.type==="date"&&!a&&!n.value||a!==n.value&&(n.value=a??"")})}function Za(n){var e=n.type;return e==="number"||e==="range"}function Qa(n){return n===""?null:+n}function Xa(n,e,t){var r=gt(n,e);r&&r.set&&(n[e]=t,cr(()=>{n[e]=null}))}function $a(n,e,t){if(n.multiple)return ls(n,e);for(var r of n.options){var a=vn(r);if(qo(a,e)){r.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function os(n,e){wt(()=>{var t=new MutationObserver(()=>{var r=n.__value;$a(n,r)});return t.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}})}function ss(n,e,t=e){var r=!0;Ja(n,"change",()=>{var a;if(n.multiple)a=[].map.call(n.querySelectorAll(":checked"),vn);else{var i=n.querySelector(":checked");a=i&&vn(i)}t(a)}),wt(()=>{var a=e();if($a(n,a,r),r&&a===void 0){var i=n.querySelector(":checked");i!==null&&(a=vn(i),t(a))}n.__value=a,r=!1}),os(n)}function ls(n,e){for(var t of n.options)t.selected=~e.indexOf(vn(t))}function vn(n){return"__value"in n?n.__value:n.value}class kr{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(e){this.#n=e}observe(e,t){var r=this.#e.get(e)||new Set;return r.add(t),this.#e.set(e,r),this.#r().observe(e,this.#n),()=>{var a=this.#e.get(e);a.delete(t),a.size===0&&(this.#e.delete(e),this.#t.unobserve(e))}}#r(){return this.#t??(this.#t=new ResizeObserver(e=>{for(var t of e){kr.entries.set(t.target,t);for(var r of this.#e.get(t.target)||[])r(t)}}))}}var cs=new kr({box:"border-box"});function ds(n,e,t){var r=cs.observe(n,()=>t(n[e]));wt(()=>(be(()=>t(n[e])),r))}function ei(n,e){return n===e||n?.[pt]===e}function Te(n={},e,t,r){return wt(()=>{var a,i;return In(()=>{a=i,i=[],be(()=>{n!==t(...i)&&(e(n,...i),a&&ei(t(...a),n)&&e(null,...a))})}),()=>{Dn(()=>{i&&ei(t(...i),n)&&e(null,...i)})}}),n}function ti(n=!1){const e=Me,t=e.l.u;if(!t)return;let r=()=>Fa(e.s);if(n){let a=0,i={};const s=O(()=>{let l=!1;const d=e.s;for(const c in d)d[c]!==i[c]&&(i[c]=d[c],l=!0);return l&&a++,a});r=()=>o(s)}t.b.length&&ga(()=>{ni(e,r),ar(t.b)}),nt(()=>{const a=be(()=>t.m.map(mo));return()=>{for(const i of a)typeof i=="function"&&i()}}),t.a.length&&nt(()=>{ni(e,r),ar(t.a)})}function ni(n,e){if(n.l.s)for(const t of n.l.s)o(t);e()}function vt(n){Me===null&&vr(),Me.l!==null?us(Me).m.push(n):nt(()=>{const e=be(n);if(typeof e=="function")return e})}function Sr(n){Me===null&&vr(),vt(()=>()=>be(n))}function us(n){var e=n.l;return e.u??={a:[],b:[],m:[]}}function vs(n,e,t){if(n==null)return e(void 0),Ee;const r=be(()=>n.subscribe(e,t));return r.unsubscribe?()=>r.unsubscribe():r}let fn=!1;function ce(n,e,t){const r=t[e]??={store:null,source:or(void 0),unsubscribe:Ee};if(r.store!==n)if(r.unsubscribe(),r.store=n??null,n==null)r.source.v=void 0,r.unsubscribe=Ee;else{var a=!0;r.unsubscribe=vs(n,i=>{a?r.source.v=i:B(r.source,i)}),a=!1}return o(r.source)}function fs(n,e){return n.set(e),e}function Fe(){const n={};return cr(()=>{for(var e in n)n[e].unsubscribe()}),n}function at(n,e,t){return n.set(t),e}function hs(){fn=!0}function ms(n){var e=fn;try{return fn=!1,[n(),fn]}finally{fn=e}}const gs={get(n,e){if(!n.exclude.includes(e))return n.props[e]},set(n,e){return!1},getOwnPropertyDescriptor(n,e){if(!n.exclude.includes(e)&&e in n.props)return{enumerable:!0,configurable:!0,value:n.props[e]}},has(n,e){return n.exclude.includes(e)?!1:e in n.props},ownKeys(n){return Reflect.ownKeys(n.props).filter(e=>!n.exclude.includes(e))}};function hn(n,e,t){return new Proxy({props:n,exclude:e},gs)}const _s={get(n,e){let t=n.props.length;for(;t--;){let r=n.props[t];if(Ht(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r)return r[e]}},set(n,e,t){let r=n.props.length;for(;r--;){let a=n.props[r];Ht(a)&&(a=a());const i=gt(a,e);if(i&&i.set)return i.set(t),!0}return!1},getOwnPropertyDescriptor(n,e){let t=n.props.length;for(;t--;){let r=n.props[t];if(Ht(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r){const a=gt(r,e);return a&&!a.configurable&&(a.configurable=!0),a}}},has(n,e){for(let t of n.props)if(Ht(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(n){const e=[];for(let t of n.props){Ht(t)&&(t=t());for(const r in t)e.includes(r)||e.push(r)}return e}};function Ge(...n){return new Proxy({props:n},_s)}function ri(n){for(var e=ye,t=ye;e!==null&&!(e.f&(tt|en));)e=e.parent;try{return $e(e),n()}finally{$e(t)}}function S(n,e,t,r){var a=(t&1)!==0,i=(t&2)!==0,s=(t&8)!==0,l=(t&16)!==0,d=!1,c;s?[c,d]=ms(()=>n[e]):c=n[e];var v=gt(n,e)?.set,u=r,h=!0,_=!1,f=()=>(_=!0,h&&(h=!1,l?u=be(r):u=r),u);c===void 0&&r!==void 0&&(v&&i&&po(),c=f(),v&&v(c));var m;if(i)m=()=>{var p=n[e];return p===void 0?f():(h=!0,_=!1,p)};else{var w=ri(()=>(a?O:ua)(()=>n[e]));w.f|=go,m=()=>{var p=o(w);return p!==void 0&&(u=void 0),p===void 0?u:p}}if(!(t&4))return m;if(v){var k=n.$$legacy;return function(p,P){return arguments.length>0?((!i||!P||k||d)&&v(P?m():p),p):m()}}var b=!1,x=!1,y=or(c),E=ri(()=>O(()=>{var p=m(),P=o(y);return b?(b=!1,x=!0,P):(x=!1,y.v=p)}));return a||(E.equals=ir),function(p,P){if(arguments.length>0){const A=P?o(E):i&&s?Q(p):p;return E.equals(A)||(b=!0,B(y,A),_&&u!==void 0&&(u=A),be(()=>o(E))),p}return o(E)}}const ws="5";typeof window<"u"&&(window.__svelte||={v:new Set}).v.add(ws);const Bn={kanban:{Save:"Save",Close:"Close",Delete:"Delete",Description:"Description",Type:"Type","Start date":"Start date","End date":"End date",Files:"Files",B:"B",KB:"KB",MB:"MB",GB:"GB",TB:"TB",PB:"PB",EB:"EB","Make cover":"Make cover","Remove cover":"Remove cover",Comments:"Comments",Links:"Links",Result:"Result","No results":"No results",Search:"Search","Search in":"Search in","Add new row":"Add new row","Add new column":"Add new column","Add new card...":"Add new card...","Add new card":"Add new card","Edit card":"Edit card",Edit:"Edit",Everywhere:"Everywhere",Label:"Label",Status:"Status",Color:"Color",Date:"Date",Priority:"Priority",Progress:"Progress",Users:"Users",Untitled:"Untitled",Rename:"Rename","Move up":"Move up","Move down":"Move down","Move left":"Move left","Move right":"Move right",Sort:"Sort","Label (a-z)":"Label (a-z)","Label (z-a)":"Label (z-a)","Description (a-z)":"Description (a-z)","Description (z-a)":"Description (z-a)","Add link":"Add link",Duplicate:"Duplicate","Duplicate of":"Duplicate of","Relates to":"Relates to","Depends on":"Depends on","Is required for":"Is required for",Duplicates:"Duplicates","Is duplicated by":"Is duplicated by","Is parent for":"Is parent for","Is subtask of":"Is subtask of",Cancel:"Cancel","Link task":"Link task","Select a relation":"Select a relation","Select a task":"Select a task",Send:"Send","Add a comment...":"Add a comment...","Would you like to delete this comment?":"Would you like to delete this comment?","No comments yet":"No comments yet","Would you like to delete this card?":"Would you like to delete this card?"}},ys={kanban:{Save:"Speichern",Close:"Schließen",Delete:"Löschen",Description:"Beschreibung",Type:"Typ","Start date":"Startdatum","End date":"Enddatum",Files:"Dateien",B:"B",KB:"KB",MB:"MB",GB:"GB",TB:"TB",PB:"PB",EB:"EB","Make cover":"Als Cover festlegen","Remove cover":"Cover entfernen",Comments:"Kommentare",Links:"Links",Result:"Ergebnis","No results":"Keine Ergebnisse",Search:"Suchen","Search in":"Suchen in","Add new row":"Zeile hinzufügen","Add new column":"Spalte hinzufügen","Add new card...":"Karte hinzufügen...","Add new card":"Karte hinzufügen","Edit card":"Karte bearbeiten",Edit:"Bearbeiten",Everywhere:"Überall",Label:"Label",Status:"Status",Color:"Farbe",Date:"Datum",Priority:"Priorität",Progress:"Fortschritt",Users:"Benutzer",Untitled:"Unbenannt",Rename:"Umbenennen","Move up":"Nach oben verschieben","Move down":"Nach unten verschieben","Move left":"Nach links verschieben","Move right":"Nach rechts verschieben",Sort:"Sortieren","Label (a-z)":"Label (A-Z)","Label (z-a)":"Label (Z-A)","Description (a-z)":"Beschreibung (A-Z)","Description (z-a)":"Beschreibung (Z-A)","Would you like to delete this comment?":"Diesen Kommentar wirklich löschen?","Add link":"Link hinzufügen",Duplicate:"Duplizieren","Duplicate of":"Duplikat von","Relates to":"Verknüpft mit","Depends on":"Hängt ab von","Is required for":"Voraussetzung für",Duplicates:"Duplikate","Is duplicated by":"Wird dupliziert von","Is parent for":"Übergeordnete Aufgabe von","Is subtask of":"Unteraufgabe von",Cancel:"Abbrechen","Link task":"Aufgabe verknüpfen","Select a relation":"Beziehung auswählen","Select a task":"Aufgabe auswählen",Send:"Senden","Add a comment...":"Kommentar hinzufügen...","No comments yet":"Noch keine Kommentare","Would you like to delete this card?":"Diese Karte wirklich löschen?"}},xs={kanban:{Save:"保存",Close:"关闭",Delete:"删除",Description:"描述",Type:"类型","Start date":"开始日期","End date":"结束日期",Files:"文件",B:"B",KB:"KB",MB:"MB",GB:"GB",TB:"TB",PB:"PB",EB:"EB","Make cover":"设为封面","Remove cover":"移除封面",Comments:"评论",Links:"链接",Result:"结果","No results":"无结果",Search:"搜索","Search in":"搜索位置","Add new row":"添加行","Add new column":"添加列","Add new card...":"添加卡片...","Add new card":"添加卡片","Edit card":"编辑卡片",Edit:"编辑",Everywhere:"全部",Label:"标签",Status:"状态",Color:"颜色",Date:"日期",Priority:"优先级",Progress:"进度",Users:"用户",Untitled:"未命名",Rename:"重命名","Move up":"上移","Move down":"下移","Move left":"左移","Move right":"右移",Sort:"排序","Label (a-z)":"标签 (A-Z)","Label (z-a)":"标签 (Z-A)","Description (a-z)":"描述 (A-Z)","Description (z-a)":"描述 (Z-A)","Would you like to delete this comment?":"确定删除此评论吗？","Add link":"添加链接",Duplicate:"复制","Duplicate of":"副本","Relates to":"关联到","Depends on":"依赖于","Is required for":"是…的前置任务",Duplicates:"重复","Is duplicated by":"被重复","Is parent for":"父任务","Is subtask of":"子任务",Cancel:"取消","Link task":"关联任务","Select a relation":"选择关系","Select a task":"选择任务",Send:"发送","Add a comment...":"添加评论...","No comments yet":"暂无评论","Would you like to delete this card?":"确定删除此卡片吗？"}},bs={kanban:{Save:"Guardar",Close:"Cerrar",Delete:"Eliminar",Description:"Descripción",Type:"Tipo","Start date":"Fecha de inicio","End date":"Fecha de finalización",Files:"Archivos",B:"B",KB:"KB",MB:"MB",GB:"GB",TB:"TB",PB:"PB",EB:"EB","Make cover":"Establecer como portada","Remove cover":"Quitar portada",Comments:"Comentarios",Links:"Enlaces",Result:"Resultado","No results":"Sin resultados",Search:"Buscar","Search in":"Buscar en","Add new row":"Añadir fila","Add new column":"Añadir columna","Add new card...":"Añadir tarjeta...","Add new card":"Añadir tarjeta","Edit card":"Editar tarjeta",Edit:"Editar",Everywhere:"En todas partes",Label:"Etiqueta",Status:"Estado",Color:"Color",Date:"Fecha",Priority:"Prioridad",Progress:"Progreso",Users:"Usuarios",Untitled:"Sin título",Rename:"Renombrar","Move up":"Mover arriba","Move down":"Mover abajo","Move left":"Mover a la izquierda","Move right":"Mover a la derecha",Sort:"Ordenar","Label (a-z)":"Etiqueta (A-Z)","Label (z-a)":"Etiqueta (Z-A)","Description (a-z)":"Descripción (A-Z)","Description (z-a)":"Descripción (Z-A)","Would you like to delete this comment?":"¿Quieres eliminar este comentario?","Add link":"Añadir enlace",Duplicate:"Duplicar","Duplicate of":"Duplicado de","Relates to":"Relacionado con","Depends on":"Depende de","Is required for":"Es requisito para",Duplicates:"Duplicados","Is duplicated by":"Está duplicado por","Is parent for":"Tarea principal de","Is subtask of":"Subtarea de",Cancel:"Cancelar","Link task":"Vincular tarea","Select a relation":"Seleccionar relación","Select a task":"Seleccionar tarea",Send:"Enviar","Add a comment...":"Añadir comentario...","No comments yet":"Aún no hay comentarios","Would you like to delete this card?":"¿Quieres eliminar esta tarjeta?"}},ps={kanban:{Save:"Enregistrer",Close:"Fermer",Delete:"Supprimer",Description:"Description",Type:"Type","Start date":"Date de début","End date":"Date de fin",Files:"Fichiers",B:"o",KB:"Ko",MB:"Mo",GB:"Go",TB:"To",PB:"Po",EB:"Eo","Make cover":"Définir comme couverture","Remove cover":"Retirer la couverture",Comments:"Commentaires",Links:"Liens",Result:"Résultat","No results":"Aucun résultat",Search:"Rechercher","Search in":"Rechercher dans","Add new row":"Ajouter une ligne","Add new column":"Ajouter une colonne","Add new card...":"Ajouter une carte...","Add new card":"Ajouter une carte","Edit card":"Modifier la carte",Edit:"Modifier",Everywhere:"Partout",Label:"Étiquette",Status:"Statut",Color:"Couleur",Date:"Date",Priority:"Priorité",Progress:"Avancement",Users:"Utilisateurs",Untitled:"Sans titre",Rename:"Renommer","Move up":"Déplacer vers le haut","Move down":"Déplacer vers le bas","Move left":"Déplacer vers la gauche","Move right":"Déplacer vers la droite",Sort:"Trier","Label (a-z)":"Étiquette (A-Z)","Label (z-a)":"Étiquette (Z-A)","Description (a-z)":"Description (A-Z)","Description (z-a)":"Description (Z-A)","Would you like to delete this comment?":"Voulez-vous vraiment supprimer ce commentaire ?","Add link":"Ajouter un lien",Duplicate:"Dupliquer","Duplicate of":"Copie de","Relates to":"Lié à","Depends on":"Dépend de","Is required for":"Nécessaire pour",Duplicates:"Doublons","Is duplicated by":"Dupliqué par","Is parent for":"Tâche parente de","Is subtask of":"Sous-tâche de",Cancel:"Annuler","Link task":"Lier une tâche","Select a relation":"Sélectionner une relation","Select a task":"Sélectionner une tâche",Send:"Envoyer","Add a comment...":"Ajouter un commentaire...","No comments yet":"Aucun commentaire pour l’instant","Would you like to delete this card?":"Voulez-vous vraiment supprimer cette carte ?"}},ks={kanban:{Save:"Salva",Close:"Chiudi",Delete:"Elimina",Description:"Descrizione",Type:"Tipo","Start date":"Data di inizio","End date":"Data di fine",Files:"File",B:"B",KB:"KB",MB:"MB",GB:"GB",TB:"TB",PB:"PB",EB:"EB","Make cover":"Imposta come copertina","Remove cover":"Rimuovi copertina",Comments:"Commenti",Links:"Collegamenti",Result:"Risultato","No results":"Nessun risultato",Search:"Cerca","Search in":"Cerca in","Add new row":"Aggiungi riga","Add new column":"Aggiungi colonna","Add new card...":"Aggiungi scheda...","Add new card":"Aggiungi scheda","Edit card":"Modifica scheda",Edit:"Modifica",Everywhere:"Ovunque",Label:"Etichetta",Status:"Stato",Color:"Colore",Date:"Data",Priority:"Priorità",Progress:"Avanzamento",Users:"Utenti",Untitled:"Senza titolo",Rename:"Rinomina","Move up":"Sposta in alto","Move down":"Sposta in basso","Move left":"Sposta a sinistra","Move right":"Sposta a destra",Sort:"Ordina","Label (a-z)":"Etichetta (A-Z)","Label (z-a)":"Etichetta (Z-A)","Description (a-z)":"Descrizione (A-Z)","Description (z-a)":"Descrizione (Z-A)","Would you like to delete this comment?":"Vuoi davvero eliminare questo commento?","Add link":"Aggiungi collegamento",Duplicate:"Duplica","Duplicate of":"Duplicato di","Relates to":"Collegato a","Depends on":"Dipende da","Is required for":"Necessario per",Duplicates:"Duplicati","Is duplicated by":"Duplicato da","Is parent for":"Attività principale di","Is subtask of":"Sottoattività di",Cancel:"Annulla","Link task":"Collega attività","Select a relation":"Seleziona relazione","Select a task":"Seleziona attività",Send:"Invia","Add a comment...":"Aggiungi commento...","No comments yet":"Nessun commento","Would you like to delete this card?":"Vuoi davvero eliminare questa scheda?"}},Ss={kanban:{Save:"保存",Close:"閉じる",Delete:"削除",Description:"説明",Type:"タイプ","Start date":"開始日","End date":"終了日",Files:"ファイル",B:"B",KB:"KB",MB:"MB",GB:"GB",TB:"TB",PB:"PB",EB:"EB","Make cover":"カバーに設定","Remove cover":"カバーを削除",Comments:"コメント",Links:"リンク",Result:"結果","No results":"結果がありません",Search:"検索","Search in":"検索対象","Add new row":"行を追加","Add new column":"列を追加","Add new card...":"カードを追加...","Add new card":"カードを追加","Edit card":"カードを編集",Edit:"編集",Everywhere:"すべて",Label:"ラベル",Status:"ステータス",Color:"色",Date:"日付",Priority:"優先度",Progress:"進捗",Users:"ユーザー",Untitled:"無題",Rename:"名前を変更","Move up":"上に移動","Move down":"下に移動","Move left":"左に移動","Move right":"右に移動",Sort:"並べ替え","Label (a-z)":"ラベル (A-Z)","Label (z-a)":"ラベル (Z-A)","Description (a-z)":"説明 (A-Z)","Description (z-a)":"説明 (Z-A)","Would you like to delete this comment?":"このコメントを削除しますか？","Add link":"リンクを追加",Duplicate:"複製","Duplicate of":"複製元","Relates to":"関連","Depends on":"依存先","Is required for":"に必要",Duplicates:"重複","Is duplicated by":"によって複製","Is parent for":"親タスク","Is subtask of":"のサブタスク",Cancel:"キャンセル","Link task":"タスクをリンク","Select a relation":"関連を選択","Select a task":"タスクを選択",Send:"送信","Add a comment...":"コメントを追加...","No comments yet":"まだコメントがありません","Would you like to delete this card?":"このカードを削除しますか？"}},Is={kanban:{Save:"Salvar",Close:"Fechar",Delete:"Excluir",Description:"Descrição",Type:"Tipo","Start date":"Data de início","End date":"Data de término",Files:"Arquivos",B:"B",KB:"KB",MB:"MB",GB:"GB",TB:"TB",PB:"PB",EB:"EB","Make cover":"Definir como capa","Remove cover":"Remover capa",Comments:"Comentários",Links:"Links",Result:"Resultado","No results":"Nenhum resultado",Search:"Pesquisar","Search in":"Pesquisar em","Add new row":"Adicionar nova linha","Add new column":"Adicionar nova coluna","Add new card...":"Adicionar novo cartão...","Add new card":"Adicionar novo cartão","Edit card":"Editar cartão",Edit:"Editar",Everywhere:"Em todos os lugares",Label:"Etiqueta",Status:"Status",Color:"Cor",Date:"Data",Priority:"Prioridade",Progress:"Progresso",Users:"Usuários",Untitled:"Sem título",Rename:"Renomear","Move up":"Mover para cima","Move down":"Mover para baixo","Move left":"Mover para a esquerda","Move right":"Mover para a direita",Sort:"Ordenar","Label (a-z)":"Etiqueta (A-Z)","Label (z-a)":"Etiqueta (Z-A)","Description (a-z)":"Descrição (A-Z)","Description (z-a)":"Descrição (Z-A)","Would you like to delete this comment?":"Deseja excluir este comentário?","Add link":"Adicionar link",Duplicate:"Duplicar","Duplicate of":"Duplicado de","Relates to":"Relacionado a","Depends on":"Depende de","Is required for":"É necessário para",Duplicates:"Duplicados","Is duplicated by":"É duplicado por","Is parent for":"É pai de","Is subtask of":"É subtarefa de",Cancel:"Cancelar","Link task":"Vincular tarefa","Select a relation":"Selecione uma relação","Select a task":"Selecione uma tarefa",Send:"Enviar","Add a comment...":"Adicionar comentário...","No comments yet":"Nenhum comentário ainda","Would you like to delete this card?":"Deseja excluir este cartão?"}},Es={kanban:{Save:"Сохранить",Close:"Закрыть",Delete:"Удалить",Description:"Описание",Type:"Тип","Start date":"Дата начала","End date":"Дата окончания",Files:"Файлы",B:"Б",KB:"КБ",MB:"МБ",GB:"ГБ",TB:"ТБ",PB:"ПБ",EB:"ЭБ","Make cover":"Сделать обложкой","Remove cover":"Убрать обложку",Comments:"Комментарии",Links:"Ссылки",Result:"Результат","No results":"Нет результатов",Search:"Поиск","Search in":"Искать в","Add new row":"Добавить ряд","Add new column":"Добавить колонку","Add new card...":"Добавить карточку...","Add new card":"Добавить карточку","Edit card":"Редактировать карточку",Edit:"Редактировать",Everywhere:"Везде",Label:"Название",Status:"Статус",Color:"Цвет",Date:"Дата",Priority:"Приоритет",Progress:"Прогресс",Users:"Пользователи",Untitled:"Без названия",Rename:"Переименовать","Move up":"Переместить вверх","Move down":"Переместить вниз","Move left":"Переместить влево","Move right":"Переместить вправо",Sort:"Сортировать","Label (a-z)":"Название (а-я)","Label (z-a)":"Название (я-а)","Description (a-z)":"Описание (а-я)","Description (z-a)":"Описание (я-а)","Would you like to delete this comment?":"Удалить этот комментарий?","Add link":"Добавить ссылку",Duplicate:"Дублировать","Duplicate of":"Дубликат","Relates to":"Связано с","Depends on":"Зависит от","Is required for":"Необходимо для",Duplicates:"Дублирует","Is duplicated by":"Дублируется","Is parent for":"Родитель для","Is subtask of":"Подзадача для",Cancel:"Отмена","Link task":"Связать задачу","Select a relation":"Выберите связь","Select a task":"Выберите задачу",Send:"Отправить","Add a comment...":"Добавить комментарий...","No comments yet":"Комментариев пока нет","Would you like to delete this card?":"Удалить эту задачу?"}},Nn={core:{ok:"OK",cancel:"Cancel",select:"Select","No data":"No data","Rows per page":"Rows per page","Total pages":"Total pages"},calendar:{monthFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],hours:"Hours",minutes:"Minutes",done:"Done",clear:"Clear",today:"Today",am:["am","AM"],pm:["pm","PM"],weekStart:7,clockFormat:24},formats:{timeFormat:"%H:%i",dateFormat:"%m/%d/%Y",monthYearFormat:"%F %Y",yearFormat:"%Y"},lang:"en-US"},Cs={core:{ok:"确定",cancel:"取消",select:"选择","No data":"没有数据","Rows per page":"每页行数","Total pages":"总页数"},calendar:{monthFull:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayFull:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayShort:["周日","周一","周二","周三","周四","周五","周六"],hours:"小时",minutes:"分钟",done:"完成",clear:"清除",today:"今天",am:["",""],pm:["",""],weekStart:7,clockFormat:24},formats:{timeFormat:"%H:%i",dateFormat:"%Y-%m-%d",monthYearFormat:"%F %Y",yearFormat:"%Y"},lang:"zh-CN"},Ds={core:{ok:"OK",cancel:"Abbrechen",select:"Auswählen","No data":"Keine Daten","Rows per page":"Zeilen pro Seite","Total pages":"Gesamtseiten"},calendar:{monthFull:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthShort:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayFull:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayShort:["So","Mo","Di","Mi","Do","Fr","Sa"],hours:"Stunden",minutes:"Minuten",done:"Fertig",clear:"Entfernen",today:"Heute",weekStart:1,clockFormat:24},formats:{timeFormat:"%H:%i",dateFormat:"%d.%m.%Y",monthYearFormat:"%F %Y",yearFormat:"%Y"},lang:"de-DE"},Ms={core:{ok:"OK",cancel:"Cancelar",select:"Seleccionar","No data":"Sin datos","Rows per page":"Filas por página","Total pages":"Total de páginas"},calendar:{monthFull:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],monthShort:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],dayFull:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],dayShort:["dom","lun","mar","mié","jue","vie","sáb"],hours:"Horas",minutes:"Minutos",done:"Listo",clear:"Reinicio",today:"Hoy",weekStart:1,clockFormat:24},formats:{timeFormat:"%H:%i",dateFormat:"%d/%m/%Y",monthYearFormat:"%F %Y",yearFormat:"%Y"},lang:"es-ES"},As={core:{ok:"OK",cancel:"Annuler",select:"Sélectionner","No data":"Pas de données","Rows per page":"Lignes par page","Total pages":"Nombre total de pages"},calendar:{monthFull:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],monthShort:["Jan","Fév","Mar","Avr","Mai","Juin","Juil","Aôu","Sep","Oct","Nov","Déc"],dayFull:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],dayShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],hours:"Heures",minutes:"Minutes",done:"Fini",clear:"Effacer",today:"Aujourd'hui",weekStart:1,clockFormat:24},formats:{timeFormat:"%H:%i",dateFormat:"%d/%m/%Y",monthYearFormat:"%F %Y",yearFormat:"%Y"},lang:"fr-FR"},Ts={core:{ok:"OK",cancel:"Annullare",select:"Seleziona","No data":"Nessun dato","Rows per page":"Righe per pagina","Total pages":"Pagine totali"},calendar:{monthFull:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"],monthShort:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],dayFull:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"],dayShort:["dom","lun","mar","mer","gio","ven","sab"],hours:"Orario",minutes:"Minuti",done:"Pronto",clear:"Pulisci",today:"Oggi",weekStart:1,clockFormat:24},formats:{timeFormat:"%H:%i",dateFormat:"%d/%m/%Y",monthYearFormat:"%F %Y",yearFormat:"%Y"},lang:"it-IT"},Ps={core:{ok:"OK",cancel:"取り消す",select:"選択","No data":"データが見つかりませんでした","Rows per page":"1ページあたりの行数","Total pages":"総ページ数"},calendar:{monthFull:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayFull:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],dayShort:["日","月","火","水","木","金","土"],hours:"営業時間",minutes:"分",done:"レディー",clear:"削除する",today:"今日",weekStart:1,clockFormat:24},formats:{timeFormat:"%H:%i",dateFormat:"%Y年%m月%d日",monthYearFormat:"%m月%Y年",yearFormat:"%Y年"},lang:"ja-JP"},Rs={core:{ok:"OK",cancel:"Cancelar",select:"Selecionar","No data":"Sem dados","Rows per page":"Linhas por página","Total pages":"Total de páginas"},calendar:{monthFull:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayFull:["Domingo","Segunda-Feira","Terça-Feira","Quarta-Feira","Quinta-Feira","Sexta-Feira","Sábado"],dayShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],hours:"Horas",minutes:"Minutos",done:"Feito",clear:"Limpar",today:"Hoje",weekStart:1,clockFormat:24},formats:{timeFormat:"%H:%i",dateFormat:"%d/%m/%Y",monthYearFormat:"%F %Y",yearFormat:"%Y"},lang:"pt-PT"},Ls={core:{ok:"OK",cancel:"Отмена",select:"Выбрать","No data":"Нет данных","Rows per page":"Строк на странице","Total pages":"Всего страниц"},calendar:{monthFull:["Январь","Февраль","Март","Апрель","Maй","Июнь","Июль","Август","Сентябрь","Oктябрь","Ноябрь","Декабрь"],monthShort:["Янв","Фев","Maр","Aпр","Maй","Июн","Июл","Aвг","Сен","Окт","Ноя","Дек"],dayFull:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],dayShort:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],hours:"Часы",minutes:"Минуты",done:"Гoтовo",clear:"Очистить",today:"Сегодня",weekStart:1,clockFormat:24},formats:{timeFormat:"%H:%i",dateFormat:"%d.%m.%Y",monthYearFormat:"%F %Y",yearFormat:"%Y"},lang:"ru-RU"};let ai=new Date().valueOf();const Fs=()=>ai++;function Hn(){return"temp://"+ai++}class Os{constructor(e){this._nextHandler=null,this._dispatch=e,this.exec=this.exec.bind(this)}async exec(e,t){return this._dispatch(e,t),this._nextHandler&&await this._nextHandler.exec(e,t),t}setNext(e){return this._nextHandler=e}}function Ir(n,e="data-id"){let t=n;for(!t.tagName&&n.target&&(t=n.target);t;){if(t.getAttribute&&t.getAttribute(e))return t;t=t.parentNode}return null}function zs(n,e="data-id"){const t=Ir(n,e);return t?Er(t.getAttribute(e)):null}function Er(n){if(typeof n=="string"){const e=n*1;if(!isNaN(e))return e}return n}function Bs(){return{detect:()=>!0,addEvent:function(n,e,t){return n.addEventListener(e,t),()=>n.removeEventListener(e,t)},addGlobalEvent:function(n,e){return document.addEventListener(n,e),()=>document.removeEventListener(n,e)},getTopNode:function(){return window.document.body}}}const ft=Bs();function ii(n){Object.assign(ft,n)}function oi(n,e,t){function r(a){const i=Ir(a);if(!i)return;const s=Er(i.dataset.id);if(typeof e=="function")return e(s,a);let l,d=a.target;for(;d!=i;){if(l=d.dataset?d.dataset.action:null,l&&e[l]){e[l](s,a);return}d=d.parentNode}e[t]&&e[t](s,a)}ft.addEvent(n,t,r)}function mn(n,e){oi(n,e,"click"),e.dblclick&&oi(n,e.dblclick,"dblclick")}function Ns(n,e){for(let t=n.length-1;t>=0;t--)if(n[t]===e){n.splice(t,1);break}}let si=new Date,qn=!1,Un=[];const zt=[],li=n=>{if(qn){qn=!1;return}for(let e=zt.length-1;e>=0;e--){const{node:t,date:r,props:a}=zt[e];if(!(r>si)&&!t.contains(n.target)&&t!==n.target&&(a.callback&&a.callback(n),a.modal||n.defaultPrevented))break}},Hs=n=>{si=new Date,qn=!0;for(let e=zt.length-1;e>=0;e--){const{node:t}=zt[e];if(!t.contains(n.target)&&t!==n.target){qn=!1;break}}};function ci(n,e){Un.length||(Un=[ft.addGlobalEvent("click",li,n),ft.addGlobalEvent("contextmenu",li,n),ft.addGlobalEvent("mousedown",Hs,n)]),typeof e!="object"&&(e={callback:e});const t={node:n,date:new Date,props:e};return zt.push(t),{destroy(){Ns(zt,t),zt.length||(Un.forEach(r=>r()),Un=[])}}}const qs=n=>n.indexOf("bottom")!==-1,Us=n=>n.indexOf("left")!==-1,di=n=>n.indexOf("right")!==-1,Ys=n=>n.indexOf("top")!==-1,ui=n=>n.indexOf("fit")!==-1,vi=n=>n.indexOf("overlap")!==-1,Ks=n=>n.indexOf("center")!==-1;function Vs(n,e){let t=0;const r=ft.getTopNode(n);for(;n&&n!==r;){const a=getComputedStyle(n).position;if((a==="absolute"||a==="relative"||a==="fixed")&&(t=parseInt(getComputedStyle(n).zIndex)||0),n=n.parentNode,n===e)break}return t}let We,Dt,gn,ht;function Gs(n,e,t="bottom",r=0,a=0){if(!n)return null;We=r,Dt=a,gn="auto";let i=0,s=0;const l=Ws(n),d=vi(t)?ft.getTopNode(n):l;if(!l)return null;const c=l.getBoundingClientRect(),v=n.getBoundingClientRect(),u=d.getBoundingClientRect();if(e){const f=Vs(e,l);i=Math.max(f+1,20)}if(e){if(ht=e.getBoundingClientRect(),ui(t)&&(gn=ht.width+"px"),t!=="point")if(Ks(t))ui(t)?We=0:(We=u.width/2,s=1),Dt=(u.height-v.height)/2;else{const f=vi(t)?0:1;We=di(t)?ht.right+f:ht.left-f,Dt=qs(t)?ht.bottom+1:ht.top}}else ht={left:r,right:r,top:a,bottom:a};Us(t)&&(We=ht.left,s=2),Ys(t)&&(Dt=ht.top-v.height);const h=Dt+v.height-u.bottom;return h>0&&(Dt-=h),We+v.width-u.right>0&&(di(t)?s=2:We=u.right-v.width),s&&(We=Math.round(We-v.width*s/2)),We<0&&(t!=="left"?We=0:We=ht.right),We+=d.scrollLeft-c.left,Dt+=d.scrollTop-c.top,gn=gn||"auto",{x:We,y:Dt,z:i,width:gn}}function Ws(n){const e=ft.getTopNode(n);for(n&&(n=n.parentElement);n;){const t=getComputedStyle(n).position;if(n===e||t==="relative"||t==="absolute"||t==="fixed")return n;n=n.parentNode}return null}let fi=new Date().valueOf();function Ue(){return fi+=1,fi}function je(n){return n<10?"0"+n:n.toString()}function js(n){const e=je(n);return e.length==2?"0"+e:e}function hi(n){const e=Math.floor(n/11)*11;return{start:e,end:e+11}}function Js(n){let e=n.getDay();e===0&&(e=7);const t=new Date(n.valueOf());t.setDate(n.getDate()+(4-e));const r=t.getFullYear(),a=Math.floor((t.getTime()-new Date(r,0,1).getTime())/864e5);return 1+Math.floor(a/7)}const mi=["",""];function Zs(n,e,t){switch(n){case"%d":return je(e.getDate());case"%m":return je(e.getMonth()+1);case"%j":return e.getDate();case"%n":return e.getMonth()+1;case"%y":return je(e.getFullYear()%100);case"%Y":return e.getFullYear();case"%D":return t.dayShort[e.getDay()];case"%l":return t.dayFull[e.getDay()];case"%M":return t.monthShort[e.getMonth()];case"%F":return t.monthFull[e.getMonth()];case"%h":return je((e.getHours()+11)%12+1);case"%g":return(e.getHours()+11)%12+1;case"%G":return e.getHours();case"%H":return je(e.getHours());case"%i":return je(e.getMinutes());case"%a":return((e.getHours()>11?t.pm:t.am)||mi)[0];case"%A":return((e.getHours()>11?t.pm:t.am)||mi)[1];case"%s":return je(e.getSeconds());case"%S":return js(e.getMilliseconds());case"%W":return je(Js(e));case"%c":{let r=e.getFullYear()+"";return r+="-"+je(e.getMonth()+1),r+="-"+je(e.getDate()),r+="T",r+=je(e.getHours()),r+=":"+je(e.getMinutes()),r+=":"+je(e.getSeconds()),r}default:return n}}const Qs=/%[a-zA-Z]/g;function Mt(n,e){return typeof n=="function"?n:function(t){return t?(t.getMonth||(t=new Date(t)),n.replace(Qs,r=>Zs(r,t,e))):""}}function gi(n){return n&&typeof n=="object"&&!Array.isArray(n)}function Cr(n,e){for(const t in e){const r=e[t];gi(n[t])&&gi(r)?n[t]=Cr({...n[t]},e[t]):n[t]=e[t]}return n}function Wt(n){return{getGroup(e){const t=n[e];return r=>t&&t[r]||r},getRaw(){return n},extend(e,t){if(!e)return this;let r;return t?r=Cr({...e},n):r=Cr({...n},e),Wt(r)}}}const Yn={detect(){return typeof window>"u"?!1:!!window.Sfdc||!!window.$A||!!window.Aura||"$shadowResolver$"in document.body},addGlobalEvent:function(n,e,t){const r=Yn.getTopNode(t);return r.addEventListener(n,e),()=>r.removeEventListener(n,e)},getTopNode:function(n){return n.closest('[data-wx-root="true"]')}};var Xs=(n,e,t)=>e.onchange&&e.onchange({value:t(),input:!0}),$s=(n,e,t)=>e.onchange&&e.onchange({value:t()}),el=I('<textarea class="wx-textarea svelte-1eba9c5"></textarea>');function Dr(n,e){ne(e,!0);let t=S(e,"value",15,""),r=S(e,"id",19,Ue),a=S(e,"placeholder",3,""),i=S(e,"title",3,""),s=S(e,"disabled",3,!1),l=S(e,"error",3,!1),d=S(e,"readonly",3,!1);var c=el();c.__input=[Xs,e,t],c.__change=[$s,e,t],F(()=>{J(c,"id",r()),c.disabled=s(),J(c,"placeholder",a()),c.readOnly=d(),J(c,"title",i()),he(c,"wx-error",l())}),un(c,t),g(n,c),re()}ge(["input","change"]);const tl=(n,e)=>{e.onclick&&e.onclick(n)};var nl=I("<i></i>"),rl=I("<button><!> <!></button>");function Pe(n,e){ne(e,!0);let t=S(e,"type",3,""),r=S(e,"css",3,""),a=S(e,"icon",3,""),i=S(e,"disabled",3,!1),s=S(e,"title",3,""),l=S(e,"text",3,""),d=O(()=>{let h=t()?t().split(" ").filter(_=>_!=="").map(_=>"wx-"+_).join(" "):"";return r()+(r()?" ":"")+h});var c=rl();c.__click=[tl,e];var v=C(c);R(v,a,h=>{var _=nl();F(()=>we(_,`${a()??""} svelte-1p0p9h7`)),g(h,_)});var u=U(v,2);R(u,()=>e.children,h=>{var _=$(),f=G(_);Ie(f,()=>e.children),g(h,_)},h=>{var _=pe();F(()=>ee(_,l())),g(h,_)}),F(()=>{J(c,"title",s()),we(c,`${`wx-button ${o(d)}`??""} svelte-1p0p9h7`),c.disabled=i(),he(c,"wx-icon",a()&&!e.children)}),g(n,c),re()}ge(["click"]);function al({target:n},e,t,r){e(n.checked),t.onchange&&t.onchange({value:e(),inputValue:r()})}var il=I('<span class="svelte-101cewd"> </span>'),ol=I('<div class="wx-checkbox svelte-101cewd"><input type="checkbox" class="svelte-101cewd"> <label class="svelte-101cewd"><span class="svelte-101cewd"></span> <!></label></div>');function sl(n,e){ne(e,!0);let t=S(e,"id",19,Ue),r=S(e,"label",3,""),a=S(e,"inputValue",3,""),i=S(e,"value",15,!1),s=S(e,"style",3,""),l=S(e,"disabled",3,!1);var d=ol(),c=C(d);c.__change=[al,i,e,a];var v=U(c,2),u=U(C(v),2);R(u,r,h=>{var _=il(),f=C(_);F(()=>ee(f,r())),g(h,_)}),F(()=>{J(d,"style",s()),J(c,"id",t()),c.disabled=l(),$o(c,i()),Ot(c,a()),J(v,"for",t())}),g(n,d),re()}ge(["change"]);var ll=I("<div><!></div>");function At(n,e){ne(e,!0);let t=S(e,"position",7,"bottom"),r=S(e,"align",7,"start"),a=S(e,"autoFit",3,!0),i=S(e,"oncancel",3,null),s=S(e,"width",3,"100%"),l;nt(()=>{if(a()){const u=l.getBoundingClientRect(),h=ft.getTopNode(l).getBoundingClientRect();return u.right>=h.right&&r("end"),u.bottom>=h.bottom&&t("top"),`${t()}-${r()}`}});function d(u){i()&&i()(u)}var c=ll(),v=C(c);Ie(v,()=>e.children??Ee),Be(c,(u,h)=>ci(u,h),()=>d),Te(c,u=>l=u,()=>l),F(()=>{we(c,`wx-dropdown ${`wx-${t()}-${r()}`??""} svelte-1jzzq2v`),J(c,"style",`width:${s()??""}`)}),g(n,c),re()}function cl(n,e,t){n.stopPropagation(),e(""),t.onchange&&t.onchange({value:e()})}function dl(n,e,t){if(e())return!1;B(t,!0)}var ul=I('<i class="wx-clear wxi-close svelte-t9vgru"></i>'),vl=I('<div class="wx-color wx-selected svelte-t9vgru"></div>'),fl=I('<div class="wx-empty wx-selected svelte-t9vgru"></div>'),hl=(n,e)=>e(n,""),ml=(n,e,t)=>e(n,o(t)),gl=I('<div class="wx-color svelte-t9vgru"></div>'),_l=I('<div class="wx-colors svelte-t9vgru"><div class="wx-empty svelte-t9vgru"></div> <!></div>'),wl=I('<div class="wx-colorselect svelte-t9vgru"><input readonly="" class="svelte-t9vgru"> <!> <!> <!></div>');function yl(n,e){ne(e,!0);let r=S(e,"colors",3,["#00a037","#37a9ef","#f5a623","#ff4c3b","#a0a0a0","#000000","#ffffff"]),a=S(e,"value",15,""),i=S(e,"id",19,Ue),s=S(e,"clear",3,!1),l=S(e,"placeholder",3,""),d=S(e,"title",3,""),c=S(e,"disabled",3,!1),v=S(e,"error",3,!1),u=ae(!1);function h(b,x){b.stopPropagation(),a(x),B(u,!1),e.onchange&&e.onchange({value:a()})}var _=wl();_.__click=[dl,c,u];var f=C(_),m=U(f,2);R(m,()=>s()&&a()&&!c(),b=>{var x=ul();x.__click=[cl,a,e],g(b,x)});var w=U(m,2);R(w,a,b=>{var x=vl();F(()=>J(x,"style",`background-color: ${a()||"#00a037"}`)),g(b,x)},b=>{var x=fl();g(b,x)});var k=U(w,2);R(k,()=>o(u),b=>{At(b,{oncancel:()=>B(u,!1),children:(x,y)=>{var E=_l(),p=C(E);p.__click=[hl,h];var P=U(p,2);Se(P,17,r,rt,(A,N)=>{var V=gl();V.__click=[ml,h,N],F(()=>J(V,"style",`background-color: ${o(N)??""}`)),g(A,V)}),g(x,E)},$$slots:{default:!0}})}),F(()=>{J(f,"title",d()),Ot(f,a()),J(f,"id",i()),J(f,"placeholder",l()),f.disabled=c(),he(f,"wx-error",v()),he(f,"wx-focus",o(u))}),g(n,_),re()}ge(["click"]);const xl={core:{ok:"OK",cancel:"Cancel",select:"Select","No data":"No data","Rows per page":"Rows per page","Total pages":"Total pages"},calendar:{monthFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],hours:"Hours",minutes:"Minutes",done:"Done",clear:"Clear",today:"Today",am:["am","AM"],pm:["pm","PM"],weekStart:0,clockFormat:24},formats:{timeFormat:"%H:%i",dateFormat:"%m/%d/%Y",monthYearFormat:"%F %Y",yearFormat:"%Y"},lang:"en-US"};function Tt(n,e){ne(e,!0);let t=S(e,"words",3,null),r=S(e,"optional",3,!1),a=me("wx-i18n");a||(a=Wt(xl)),a=a.extend(t(),r()),bt("wx-i18n",a);var i=$(),s=G(i);Ie(s,()=>e.children??Ee),g(n,i),re()}ge(["keydown","change"]),ge(["click"]);function bl(){let n=null,e=!1,t,r,a,i;const s=(h,_,f,m)=>{t=h,r=_,a=f,i=m},l=h=>{n=h,e=n!==null,a(n)},d=(h,_)=>{const f=h===null?null:Math.max(0,Math.min(n+h,r.length-1));f!==n&&(l(f),t?c(f,_):requestAnimationFrame(()=>c(f,_)))},c=(h,_)=>{if(h!==null&&t){const f=t.querySelectorAll(".wx-list > .wx-item")[h];f&&(f.scrollIntoView({block:"nearest"}),_&&_.preventDefault())}};return{move:h=>{const _=zs(h),f=r.findIndex(m=>m.id==_);f!==n&&l(f)},keydown:(h,_)=>{switch(h.code){case"Enter":e?i():l(0);break;case"Space":e||l(0);break;case"Escape":a(n=null);break;case"Tab":a(n=null);break;case"ArrowDown":d(e?1:_||0,h);break;case"ArrowUp":d(e?-1:_||0,h);break}},init:s,navigate:d}}var pl=I('<div class="wx-item svelte-fl05h9"><!></div>'),kl=I('<div class="wx-no-data svelte-fl05h9"> </div>'),Sl=I('<div class="wx-list svelte-fl05h9"><!></div>');function Il(n,e){ne(e,!0);let t=S(e,"items",19,()=>[]),r=ae(void 0),a=ae(null);const i=me("wx-i18n").getGroup("core"),{move:s,keydown:l,init:d,navigate:c}=bl(),v=_=>{_&&_.stopPropagation(),e.onselect&&e.onselect({id:t()[o(a)]?.id})};nt(()=>{d(o(r),t(),_=>B(a,Q(_)),v)}),vt(()=>{e.onready&&e.onready({navigate:c,keydown:l,move:s})});var u=$(),h=G(u);R(h,()=>o(a)!==null,_=>{At(_,{oncancel:()=>c(null),children:(f,m)=>{var w=Sl();w.__click=v,w.__mousemove=s;var k=C(w);R(k,()=>t().length,b=>{var x=$(),y=G(x);Se(y,19,t,E=>E.id,(E,p,P)=>{var A=pl(),N=C(A);R(N,()=>e.children,V=>{var W=$(),Z=G(W);Ie(Z,()=>e.children,()=>({option:o(p)})),g(V,W)},V=>{var W=pe();F(()=>ee(W,o(p).label)),g(V,W)}),F(()=>{J(A,"data-id",o(p).id),he(A,"wx-focus",o(P)===o(a))}),g(E,A)}),g(b,x)},b=>{var x=kl(),y=C(x);F(()=>ee(y,i("No data"))),g(b,x)}),Te(w,b=>B(r,b),()=>o(r)),g(f,w)},$$slots:{default:!0}})}),g(n,u),re()}ge(["click","mousemove"]);function _i(n,e){let t=hn(e,["$$slots","$$events","$$legacy"]);Tt(n,{children:(r,a)=>{Il(r,Ge(()=>t))},$$slots:{default:!0}})}var El=I('<i class="wx-icon wxi-close svelte-1vqfa1a"></i>'),Cl=I('<i class="wx-icon wxi-angle-down svelte-1vqfa1a"></i>'),Dl=I('<div class="wx-combo svelte-1vqfa1a"><input class="svelte-1vqfa1a"> <!> <!></div>');function Mr(n,e){ne(e,!0);let t=S(e,"value",15,""),r=S(e,"id",19,Ue),a=S(e,"options",19,()=>[]),i=S(e,"textOptions",3,null),s=S(e,"textField",3,"label"),l=S(e,"placeholder",3,""),d=S(e,"title",3,""),c=S(e,"disabled",3,!1),v=S(e,"error",3,!1),u=S(e,"clear",3,!1),h=ae(!1),_=ae(""),f=O(()=>{if(o(h))return o(_);if(t()||t()===0){const T=(i()||a()).find(z=>z.id===t());if(T)return T[s()]}return""}),m=O(()=>!o(f)||!o(h)?a():a().filter(T=>T[s()].toLowerCase().includes(o(f).toLowerCase()))),w,k;function b(T){w=T.navigate,k=T.keydown}const x=()=>o(m).findIndex(T=>T.id===t()),y=()=>w(x()),E=T=>k(T,x());function p({id:T}){A(T,!0)}function P(T){if(!a().length)return;if(T===""&&u()){N();return}let z=a().find(j=>j[s()]===T);z||(z=a().find(j=>j[s()].toLowerCase().includes(T.toLowerCase())));const K=z?z.id:t()||a()[0].id;A(K,!1)}function A(T,z){if(T||T===0){let K=a().find(j=>j.id===T);B(h,!1),z&&w(null),K&&t()!==K.id&&(t(K.id),e.onchange&&e.onchange({value:t()}))}!Z&&z&&W.focus()}function N(T){T&&T.stopPropagation(),t(""),B(h,!1),e.onchange&&e.onchange({value:t()})}function V(){B(_,Q(W.value)),B(h,!0),o(m).length?w(0):w(null)}let W,Z;function L(){Z=!0}function D(){Z=!1,setTimeout(()=>{Z||P(o(f))},200)}var M=Dl();M.__click=y,M.__keydown=E;var q=C(M);q.__input=V,Te(q,T=>W=T,()=>W);var Y=U(q,2);R(Y,()=>u()&&!c()&&t(),T=>{var z=El();z.__click=N,g(T,z)},T=>{var z=Cl();g(T,z)});var H=U(Y,2);R(H,()=>!c(),T=>{_i(T,{get items(){return o(m)},onready:b,onselect:p,children:(K,j)=>{let te=()=>j?.().option;var ie=$(),ve=G(ie);R(ve,()=>e.children,X=>{var oe=$(),le=G(oe);Ie(le,()=>e.children,()=>({option:te()})),g(X,oe)},X=>{var oe=pe();F(()=>ee(oe,te()[s()])),g(X,oe)}),g(K,ie)},$$slots:{default:!0}})}),F(()=>{J(M,"title",d()),J(q,"id",r()),Ot(q,o(f)),q.disabled=c(),J(q,"placeholder",l()),he(q,"wx-error",v())}),qe("focus",q,L),qe("blur",q,D),g(n,M),re()}ge(["click","keydown","input"]);const Ar=(n,e,t)=>e.onchange&&e.onchange({value:t(),input:!0}),Tr=(n,e,t)=>e.onchange&&e.onchange({value:t()});function Ml(n,e,t){n.stopPropagation(),e(""),t.onchange&&t.onchange({value:e()})}var Al=I('<input type="password" class="svelte-9z0rem">'),Tl=I('<input type="number" class="svelte-9z0rem">'),Pl=I('<input class="svelte-9z0rem">'),Rl=I("<i></i>"),Ll=I('<i class="wx-icon wxi-close svelte-9z0rem"></i> <!>',1),Fl=I("<i></i>"),Ol=I("<div><!> <!></div>");function Kn(n,e){ne(e,!0);let t=S(e,"value",15,""),r=S(e,"id",19,Ue),a=S(e,"readonly",3,!1),i=S(e,"focus",3,!1),s=S(e,"select",3,!1),l=S(e,"type",3,"text"),d=S(e,"placeholder",3,""),c=S(e,"disabled",3,!1),v=S(e,"error",3,!1),u=S(e,"inputStyle",3,""),h=S(e,"title",3,""),_=S(e,"css",3,""),f=S(e,"clear",3,!1),m=O(()=>e.icon&&_().indexOf("wx-icon-left")===-1?"wx-icon-right "+_():_()),w=O(()=>e.icon&&_().indexOf("wx-icon-left")!==-1),k;vt(()=>{setTimeout(()=>{i()&&k&&k.focus(),s()&&k&&k.select()},1)});var b=Ol(),x=C(b);R(x,()=>l()=="password",E=>{var p=Al();p.__input=[Ar,e,t],p.__change=[Tr,e,t],Te(p,P=>k=P,()=>k),F(()=>{J(p,"id",r()),p.readOnly=a(),p.disabled=c(),J(p,"placeholder",d()),J(p,"style",u()),J(p,"title",h())}),un(p,t),g(E,p)},E=>{var p=$(),P=G(p);R(P,()=>l()=="number",A=>{var N=Tl();N.__input=[Ar,e,t],N.__change=[Tr,e,t],Te(N,V=>k=V,()=>k),F(()=>{J(N,"id",r()),N.readOnly=a(),N.disabled=c(),J(N,"placeholder",d()),J(N,"style",u()),J(N,"title",h())}),un(N,t),g(A,N)},A=>{var N=Pl();N.__input=[Ar,e,t],N.__change=[Tr,e,t],Te(N,V=>k=V,()=>k),F(()=>{J(N,"id",r()),N.readOnly=a(),N.disabled=c(),J(N,"placeholder",d()),J(N,"title",h()),J(N,"style",u())}),un(N,t),g(A,N)},!0),g(E,p)});var y=U(x,2);R(y,()=>f()&&!c()&&t(),E=>{var p=Ll(),P=G(p);P.__click=[Ml,t,e];var A=U(P,2);R(A,()=>o(w),N=>{var V=Rl();F(()=>we(V,`wx-icon ${e.icon??""} svelte-9z0rem`)),g(N,V)}),g(E,p)},E=>{var p=$(),P=G(p);R(P,()=>e.icon,A=>{var N=Fl();F(()=>we(N,`wx-icon ${e.icon??""} svelte-9z0rem`)),g(A,N)},null,!0),g(E,p)}),F(()=>{we(b,`wx-text ${o(m)??""} svelte-9z0rem`),he(b,"wx-error",v()),he(b,"wx-disabled",c()),he(b,"wx-clear",f())}),g(n,b),re()}ge(["input","change","click"]);function zl(n,e){e.onshift&&e.onshift({diff:0,type:e.type})}var Bl=(n,e)=>e.onshift&&e.onshift({diff:-1,type:e.type}),Nl=I('<i class="wx-pager wxi-angle-left svelte-wurt7c"></i>'),Hl=I('<span class="wx-spacer svelte-wurt7c"></span>'),ql=(n,e)=>e.onshift&&e.onshift({diff:1,type:e.type}),Ul=I('<i class="wx-pager wxi-angle-right svelte-wurt7c"></i>'),Yl=I('<span class="wx-spacer svelte-wurt7c"></span>'),Kl=I('<div class="wx-header svelte-wurt7c"><!>  <span class="wx-label svelte-wurt7c"> </span> <!></div>');function Vl(n,e){ne(e,!0);const{calendar:t,formats:r}=me("wx-i18n").getRaw(),a=O(()=>e.date.getFullYear()),i=O(()=>{switch(e.type){case"month":return Mt(r.monthYearFormat,t)(e.date);case"year":return Mt(r.yearFormat,t)(e.date);case"duodecade":{const{start:u,end:h}=hi(o(a)),_=Mt(r.yearFormat,t);return`${_(new Date(u,0,1))} - ${_(new Date(h,11,31))}`}}});var s=Kl(),l=C(s);R(l,()=>e.part!="right",u=>{var h=Nl();h.__click=[Bl,e],g(u,h)},u=>{var h=Hl();g(u,h)});var d=U(l,2);d.__click=[zl,e];var c=C(d),v=U(d,2);R(v,()=>e.part!="left",u=>{var h=Ul();h.__click=[ql,e],g(u,h)},u=>{var h=Yl();g(u,h)}),F(()=>ee(c,o(i))),g(n,s),re()}ge(["click"]);var Gl=I('<button class="svelte-1f88uh6"><!></button>');function Pr(n,e){ne(e,!0);var t=Gl();t.__click=function(...a){e.onclick?.apply(this,a)};var r=C(t);Ie(r,()=>e.children??Ee),g(n,t),re()}ge(["click"]);var Wl=I('<div class="wx-weekday svelte-nq9zbf"> </div>'),jl=I("<div> </div>"),Jl=I('<div><div class="wx-weekdays svelte-nq9zbf"></div> <div class="wx-days svelte-nq9zbf"></div></div>');function Zl(n,e){ne(e,!0);let t=S(e,"part",3,""),r=S(e,"markers",3,null);const a=me("wx-i18n").getRaw().calendar,i=(a.weekStart||7)%7,s=a.dayShort.slice(i).concat(a.dayShort.slice(0,i)),l=(x,y,E)=>new Date(x.getFullYear(),x.getMonth()+(y||0),x.getDate()+(E||0));let d=t()!=="normal";function c(x){const y=x.getDay();return y===0||y===6}function v(){const x=l(e.current,0,1-e.current.getDate());return x.setDate(x.getDate()-(x.getDay()-(i-7))%7),x}function u(){const x=l(e.current,1,-e.current.getDate());return x.setDate(x.getDate()+(6-x.getDay()+i)%7),x}const h={click:_};function _(x,y){y.stopPropagation(),e.onchange&&e.onchange(new Date(new Date(x))),e.oncancel&&e.oncancel()}const f=O(()=>t()=="normal"?[e.value?l(e.value).valueOf():0]:e.value?[e.value.start?l(e.value.start).valueOf():0,e.value.end?l(e.value.end).valueOf():0]:[0,0]),m=O(()=>{const x=v(),y=u(),E=e.current.getMonth();let p=[];for(let P=x;P<=y;P.setDate(P.getDate()+1)){const A={day:P.getDate(),in:P.getMonth()===E,date:P.valueOf()};let N="";if(N+=A.in?"":" wx-inactive",N+=o(f).indexOf(A.date)>-1?" wx-selected":"",d){const V=A.date==o(f)[0],W=A.date==o(f)[1];V&&!W?N+=" wx-left":W&&!V&&(N+=" wx-right"),A.date>o(f)[0]&&A.date<o(f)[1]&&(N+=" wx-inrange")}if(N+=c(P)?" wx-weekend":"",r()){const V=r()(P);V&&(N+=" "+V)}p.push({...A,css:N})}return p});var w=Jl(),k=C(w);Se(k,21,()=>s,rt,(x,y)=>{var E=Wl(),p=C(E);F(()=>ee(p,o(y))),g(x,E)});var b=U(k,2);Se(b,21,()=>o(m),x=>x.date,(x,y)=>{var E=jl(),p=C(E);F(()=>{we(E,`wx-day ${o(y).css??""} svelte-nq9zbf`),J(E,"data-id",o(y).date),he(E,"wx-out",!o(y).in),ee(p,o(y).day)}),g(x,E)}),Be(b,(x,y)=>mn(x,y),()=>h),g(n,w),re()}var Ql=I('<div class="wx-month svelte-1mekhda"> </div>'),Xl=I('<div class="wx-months svelte-1mekhda"></div> <div class="wx-buttons svelte-1mekhda"><!></div>',1);function $l(n,e){ne(e,!0);let t=S(e,"value",15),r=S(e,"current",15);const a=me("wx-i18n").getRaw().calendar,i=a.monthShort,s=O(()=>r().getMonth()),l={click:d};function d(f,m){(f||f===0)&&(m.stopPropagation(),r().setMonth(f),r(new Date(r())),e.onshift&&e.onshift({})),e.part==="normal"&&t(new Date(r())),e.oncancel&&e.oncancel()}function c(){const f=new Date(yi(t(),e.part)||r());f.setMonth(r().getMonth()),f.setFullYear(r().getFullYear()),e.onchange&&e.onchange(f)}var v=Xl(),u=G(v);Se(u,21,()=>i,rt,(f,m,w)=>{var k=Ql();J(k,"data-id",w);var b=C(k);F(()=>{he(k,"wx-current",o(s)===w),ee(b,o(m))}),g(f,k)}),Be(u,(f,m)=>mn(f,m),()=>l);var h=U(u,2),_=C(h);Pr(_,{onclick:c,children:(f,m)=>{var w=pe();F(()=>ee(w,a.done)),g(f,w)},$$slots:{default:!0}}),g(n,v),re()}var ec=I('<div class="wx-year svelte-uftkmf"> </div>'),tc=I('<div class="wx-years svelte-uftkmf"></div> <div class="wx-buttons svelte-uftkmf"><!></div>',1);function nc(n,e){ne(e,!0);const t=me("wx-i18n").getRaw().calendar;let r=S(e,"value",15),a=S(e,"current",15);const i=O(()=>a().getFullYear()),s=O(()=>{const{start:f,end:m}=hi(o(i)),w=[];for(let k=f;k<=m;k+=1)w.push(k);return w}),l={click:d};function d(f,m){f&&(m.stopPropagation(),a().setFullYear(f),a(new Date(a())),e.onshift&&e.onshift({})),e.part==="normal"&&r(new Date(a())),e.oncancel&&e.oncancel()}function c(){const f=new Date(yi(r(),e.part)||a());f.setFullYear(a().getFullYear()),e.onchange&&e.onchange(f)}var v=tc(),u=G(v);Se(u,21,()=>o(s),rt,(f,m,w)=>{var k=ec(),b=C(k);F(()=>{J(k,"data-id",o(m)),he(k,"wx-current",o(i)==o(m)),he(k,"wx-prev-decade",w===0),he(k,"wx-next-decade",w===11),ee(b,o(m))}),g(f,k)}),Be(u,(f,m)=>mn(f,m),()=>l);var h=U(u,2),_=C(h);Pr(_,{onclick:c,children:(f,m)=>{var w=pe();F(()=>ee(w,t.done)),g(f,w)},$$slots:{default:!0}}),g(n,v),re()}const wi={month:{component:Zl,next:ac,prev:rc},year:{component:$l,next:oc,prev:ic},duodecade:{component:nc,next:lc,prev:sc}};function rc(n){return n=new Date(n),n.setMonth(n.getMonth()-1),n}function ac(n){return n=new Date(n),n.setMonth(n.getMonth()+1),n}function ic(n){return n=new Date(n),n.setFullYear(n.getFullYear()-1),n}function oc(n){return n=new Date(n),n.setFullYear(n.getFullYear()+1),n}function sc(n){return n=new Date(n),n.setFullYear(n.getFullYear()-10),n}function lc(n){return n=new Date(n),n.setFullYear(n.getFullYear()+10),n}function yi(n,e){let t;if(e==="normal")t=n;else{const{start:r,end:a}=n;e==="left"?t=r:e=="right"?t=a:t=r&&a}return t}var cc=I('<div class="wx-button-item svelte-avh7y"><!></div>'),dc=I('<div class="wx-buttons svelte-avh7y"></div>'),uc=I('<div><div class="wx-wrap svelte-avh7y"><!> <div><!> <!></div></div></div>');function Vn(n,e){ne(e,!0);const t=me("wx-i18n").getGroup("calendar");let r=S(e,"current",15),a=S(e,"part",3,"normal"),i=S(e,"markers",3,null),s=S(e,"buttons",19,()=>["clear","today"]),l=ae("month"),d=O(()=>Array.isArray(s())?s():s()?["clear","today"]:[]);function c(E,p){E.preventDefault(),e.onchange&&e.onchange({value:p})}function v(){o(l)==="duodecade"?B(l,"year"):o(l)==="year"&&B(l,"month")}function u(E){const{diff:p}=E;if(p===0){o(l)==="month"?B(l,"year"):o(l)==="year"&&B(l,"duodecade");return}if(p){const P=wi[o(l)];r(p>0?P.next(r()):P.prev(r()))}e.onshift&&e.onshift()}function h(E){B(l,"month"),e.onchange&&e.onchange({select:!0,value:E})}function _(E){if(E==="done")return-1;if(E==="clear")return null;if(E==="today")return new Date}const f=O(()=>wi[o(l)].component);var m=uc(),w=C(m),k=C(w);Vl(k,{get date(){return r()},get part(){return a()},get type(){return o(l)},onshift:u});var b=U(k,2),x=C(b);Et(x,()=>o(f),(E,p)=>{p(E,{get value(){return e.value},get current(){return r()},set current(P){r(P)},get part(){return a()},get markers(){return i()},onchange:h,oncancel:v,onshift:u})});var y=U(x,2);R(y,()=>o(l)==="month"&&o(d).length>0,E=>{var p=dc();Se(p,21,()=>o(d),rt,(P,A)=>{var N=cc(),V=C(N);Pr(V,{onclick:W=>c(W,_(o(A))),children:(W,Z)=>{var L=pe();F(()=>ee(L,t(o(A)))),g(W,L)},$$slots:{default:!0}}),g(P,N)}),g(E,p)}),F(()=>we(m,`wx-calendar ${(a()!=="normal"&&a()!=="both"?"wx-part":"")??""} svelte-avh7y`)),g(n,m),re()}function vc(n,e){ne(e,!0);let t=S(e,"value",15),r=S(e,"current",15),a=S(e,"markers",3,null),i=S(e,"buttons",19,()=>["clear","today"]);function s(d){(!r()||d)&&r(t()?new Date(t()):new Date),r().setDate(1)}s(t());function l(d){const c=d.value;c?(t(new Date(c)),s(!0)):t(null),e.onchange&&e.onchange({value:t()})}Tt(n,{children:(d,c)=>{Vn(d,{get value(){return t()},get current(){return r()},set current(v){r(v)},get markers(){return a()},get buttons(){return i()},onchange:l})},$$slots:{default:!0}}),re()}var fc=(n,e)=>B(e,!0),hc=I('<div class="wx-datepicker svelte-1k3rk87"><!> <!></div>');function mc(n,e){ne(e,!0);let t=S(e,"value",15),r=S(e,"id",19,Ue),a=S(e,"disabled",3,!1),i=S(e,"error",3,!1),s=S(e,"width",3,"unset"),l=S(e,"align",3,"start"),d=S(e,"placeholder",3,""),c=S(e,"format",3,""),v=S(e,"buttons",19,()=>["clear","today"]),u=S(e,"css",3,""),h=S(e,"title",3,""),_=S(e,"editable",3,!1),f=S(e,"clear",3,!1);const{calendar:m,formats:w}=me("wx-i18n").getRaw(),k=c()||w.dateFormat;let b=typeof k=="function"?k:Mt(k,m),x=ae(void 0);function y(){B(x,!1)}function E(Z){const L=Z===t()||Z&&t()&&Z.valueOf()===t().valueOf()||!Z&&!t();t(Z),L||e.onchange&&e.onchange({value:t()}),setTimeout(y,1)}const p=O(()=>t()?b(t()):"");function P({value:Z,input:L}){if(!_()&&!f()||L)return;let D=typeof _()=="function"?_()(Z):Z?new Date(Z):null;D=isNaN(D)?t()||null:D||null,E(D)}var A=hc();qe("scroll",Rn,y),A.__click=[fc,x];var N=C(A),V=O(()=>!_());Kn(N,{get css(){return u()},get title(){return h()},get value(){return o(p)},get id(){return r()},get readonly(){return o(V)},get disabled(){return a()},get error(){return i()},get placeholder(){return d()},oninput:y,onchange:P,icon:"wxi-calendar",inputStyle:"cursor: pointer; width: 100%; padding-right: calc(var(--wx-input-icon-size) + var(--wx-input-icon-indent) * 2);",get clear(){return f()}});var W=U(N,2);R(W,()=>o(x)&&!a(),Z=>{var L=O(()=>!!l());At(Z,{oncancel:y,get width(){return s()},get align(){return l()},get autoFit(){return o(L)},children:(D,M)=>{vc(D,{get buttons(){return v()},get value(){return t()},onchange:q=>E(q.value)})},$$slots:{default:!0}})}),g(n,A),re()}ge(["click"]);function gc(n,e){let t=S(e,"value",15),r=hn(e,["$$slots","$$events","$$legacy","value"]);Tt(n,{children:(a,i)=>{mc(a,Ge({get value(){return t()},set value(s){t(s)}},()=>r))},$$slots:{default:!0}})}var _c=I('<div class="wx-rangecalendar svelte-wlbsu6"><div class="wx-half svelte-wlbsu6"><!></div> <div class="wx-half svelte-wlbsu6"><!></div></div>');function wc(n,e){ne(e,!0);let t=S(e,"start",15),r=S(e,"end",15),a=S(e,"months",3,2),i=S(e,"markers",3,null),s=S(e,"buttons",19,()=>["clear","today"]);function l(m,w,k){const b=new Date(m);return b.setMonth(b.getMonth()+w),b}let d=ae(void 0),c=ae(void 0);ga(()=>{t(),e.current,be(()=>{o(d)||v(t()?new Date(t()):e.current||new Date)})});function v(m){B(d,Q(m)),o(d).setDate(1),o(d)&&B(c,Q(l(o(d),1)))}function u(m){B(c,Q(m)),o(c).setDate(1),o(c)&&B(d,Q(l(o(c),-1)))}function h(m){f(m),t()&&v(new Date(t()))}function _(m){f(m),r()&&u(new Date(r()))}function f(m){const w=m.value,k=w===-1;k||(m.select?!t()||r()?(t(w),r(null)):t()>w?(r(t()),t(w)):r(w):w?(t(new Date(w)),r(new Date(w))):t(r(null))),(k||!s().includes("done"))&&e.onchange&&e.onchange({start:t(),end:r()})}Tt(n,{children:(m,w)=>{var k=$(),b=G(k);R(b,()=>a()==1,x=>{var y=O(()=>({start:t(),end:r()}));Vn(x,{get value(){return o(y)},get current(){return o(d)},set current(E){B(d,Q(E))},get markers(){return i()},get buttons(){return s()},part:"both",onchange:h})},x=>{var y=_c(),E=C(y),p=C(E),P=O(()=>({start:t(),end:r()}));Vn(p,{get value(){return o(P)},get current(){return o(d)},set current(W){B(d,Q(W))},get markers(){return i()},buttons:!1,part:"left",onshift:()=>v(o(d)),onchange:h});var A=U(E,2),N=C(A),V=O(()=>({start:t(),end:r()}));Vn(N,{get value(){return o(V)},get current(){return o(c)},set current(W){B(c,Q(W))},get markers(){return i()},get buttons(){return s()},part:"right",onshift:()=>u(o(c)),onchange:_}),g(x,y)}),g(m,k)},$$slots:{default:!0}}),re()}ge(["click"]);var yc=I('<i role="img"><!></i>'),xc=I("<i></i>");function De(n,e){ne(e,!0);let t=S(e,"css",3,""),r=S(e,"title",3,"");var a=$(),i=G(a);R(i,()=>e.children,s=>{var l=yc();l.__click=function(...c){e.onclick?.apply(this,c)};var d=C(l);Ie(d,()=>e.children),F(()=>{J(l,"title",r()),we(l,`wx-icon ${t()??""} svelte-12ezr0r`)}),g(s,l)},s=>{var l=xc();l.__click=function(...d){e.onclick?.apply(this,d)},F(()=>{J(l,"title",r()),we(l,`wx-icon ${t()??""} svelte-12ezr0r`)}),g(s,l)}),g(n,a),re()}ge(["click"]);var bc=(n,e,t)=>e(o(t).id,n),pc=I('<i class="wx-icon wxi-close svelte-1xr1yzt"></i>'),kc=I('<div class="wx-tag svelte-1xr1yzt"><!> <!></div>'),Sc=I("<!> <!>",1),Ic=I('<div class="wx-multicombo svelte-1xr1yzt"><div class="wx-wrapper svelte-1xr1yzt"><div class="wx-tags svelte-1xr1yzt"></div> <div class="wx-select svelte-1xr1yzt"><input type="text" class="svelte-1xr1yzt"> <i class="wx-icon wxi-angle-down svelte-1xr1yzt"></i></div></div> <!></div>');function Ec(n,e){ne(e,!0);let t=S(e,"id",19,Ue),r=S(e,"value",31,()=>Q([])),a=S(e,"options",19,()=>[]),i=S(e,"textOptions",3,null),s=S(e,"textField",3,"label"),l=S(e,"placeholder",3,""),d=S(e,"title",3,""),c=S(e,"disabled",3,!1),v=S(e,"error",3,!1),u=S(e,"checkboxes",3,!1),h=ae(""),_=O(()=>r()?(i()||a()).filter(M=>r().includes(M.id)):[]),f=O(()=>{const M=a();return o(h)?M.filter(q=>q[s()].toLowerCase().includes(o(h).toLowerCase())):M}),m=ae(!1),w=ae(void 0),k=null,b=null;function x(M){k=M.navigate,b=M.keydown}function y(){o(f).length?k(0):k(null)}function E(M){const{id:q}=M;if(q){let Y;r()?r().includes(q)?Y=r().filter(H=>H!==q):Y=[...r(),q]:Y=[q],r(Y),e.onchange&&e.onchange({value:r()}),o(w).focus()}}function p(M,q){q&&q.stopPropagation(),r(r().filter(Y=>Y!==M)),e.onchange&&e.onchange({value:r()})}const P=()=>r()&&r().length?o(f).findIndex(M=>M.id===r()[0]):0;function A(){c()||(o(w).focus(),k(P()))}var N=Ic();N.__click=A,N.__keydown=M=>b(M,P());var V=C(N),W=C(V);Se(W,21,()=>o(_),M=>M.id,(M,q)=>{var Y=kc(),H=C(Y);R(H,()=>e.children,z=>{var K=$(),j=G(K);Ie(j,()=>e.children,()=>({option:o(q)})),g(z,K)},z=>{var K=pe();F(()=>ee(K,o(q)[s()])),g(z,K)});var T=U(H,2);R(T,()=>!c(),z=>{var K=pc();K.__click=[bc,p,q],g(z,K)}),g(M,Y)});var Z=U(W,2),L=C(Z);L.__input=y,Te(L,M=>B(w,M),()=>o(w));var D=U(V,2);R(D,()=>!c(),M=>{_i(M,{get items(){return o(f)},onready:x,onselect:E,children:(Y,H)=>{let T=()=>H?.().option;var z=Sc(),K=G(z);R(K,u,te=>{var ie=O(()=>r()&&r().includes(T().id));sl(te,{style:"margin-right: 8px; pointer-events: none;",get name(){return T().id},get value(){return o(ie)}})});var j=U(K,2);R(j,()=>e.children,te=>{e.children(te,()=>({option:T()}))},te=>{var ie=pe();F(()=>ee(ie,T()[s()])),g(te,ie)}),g(Y,z)},$$slots:{default:!0}})}),F(()=>{J(N,"title",d()),he(N,"wx-error",v()),he(N,"wx-disabled",c()),he(N,"wx-not-empty",o(_).length),he(N,"wx-focus",o(m)&&!c()),J(L,"id",t()),J(L,"placeholder",l()),L.disabled=c()}),qe("focus",L,()=>B(m,!0)),qe("blur",L,()=>B(m,!1)),un(L,()=>o(h),M=>B(h,M)),g(n,N),re()}ge(["click","keydown","input"]),ge(["input","click"]),ge(["change"]),ge(["click","keydown"]),ge(["click"]);function Cc(n,e,t){e(""),t.onchange&&t.onchange({value:e()})}function Dc(n,e,t){e.onchange&&e.onchange({value:t()})}var Mc=I('<option class="svelte-7lms0u"> </option>'),Ac=I('<div class="wx-placeholder svelte-7lms0u"> </div>'),Tc=I('<i class="wx-icon wxi-close svelte-7lms0u"></i>'),Pc=I('<i class="wx-icon wxi-angle-down svelte-7lms0u"></i>'),Rc=I('<div class="wx-select svelte-7lms0u"><select class="svelte-7lms0u"></select> <!> <!></div>');function xi(n,e){ne(e,!0);let t=S(e,"value",15,""),r=S(e,"options",19,()=>[]),a=S(e,"placeholder",3,""),i=S(e,"title",3,""),s=S(e,"disabled",3,!1),l=S(e,"error",3,!1),d=S(e,"textField",3,"label"),c=S(e,"clear",3,!1),v=S(e,"id",19,Ue);var u=Rc(),h=C(u);h.__change=[Dc,e,t],Se(h,21,r,m=>m.id,(m,w)=>{var k=Mc(),b={},x=C(k);F(()=>{b!==(b=o(w).id)&&(k.value=(k.__value=o(w).id)==null?"":o(w).id),ee(x,o(w)[d()])}),g(m,k)});var _=U(h,2);R(_,()=>!t()&&t()!==0,m=>{var w=Ac(),k=C(w);F(()=>ee(k,a())),g(m,w)});var f=U(_,2);R(f,()=>c()&&!s()&&t(),m=>{var w=Tc();w.__click=[Cc,t,e],g(m,w)},m=>{var w=Pc();g(m,w)}),F(()=>{J(h,"id",v()),h.disabled=s(),J(h,"title",i()),he(h,"wx-error",l())}),ss(h,t),g(n,u),re()}ge(["change","click"]);function Lc({target:n},e,t){e(n.value*1),t.onchange&&t.onchange({value:e()})}var Fc=I('<label class="svelte-vxce8u"> </label>'),Oc=I('<div class="wx-slider svelte-vxce8u"><!> <div class="svelte-vxce8u"><input type="range" class="svelte-vxce8u"></div></div>');function zc(n,e){ne(e,!0);let t=S(e,"id",19,Ue),r=S(e,"label",3,""),a=S(e,"width",3,""),i=S(e,"min",3,0),s=S(e,"max",3,100),l=S(e,"value",15,0),d=S(e,"step",3,1),c=S(e,"title",3,""),v=S(e,"disabled",3,!1),u=O(()=>()=>v()?"":`background: linear-gradient(90deg, var(--wx-slider-primary) 0% ${o(h)}, var(--wx-slider-background) ${o(h)} 100%);`),h=O(()=>(l()-i())/(s()-i())*100+"%"),_=l();function f({target:y}){l(y.value||0),_!==l()&&(e.onchange&&e.onchange({value:l(),previous:_,input:!0}),_=l())}var m=Oc(),w=C(m);R(w,r,y=>{var E=Fc(),p=C(E);F(()=>{J(E,"for",t()),ee(p,r())}),g(y,E)});var k=U(w,2),b=C(k);b.__input=f,b.__change=[Lc,l,e];const x=O(()=>o(u)());F(()=>{J(m,"style",a()?`width: ${a()}`:""),J(m,"title",c()),J(b,"id",t()),J(b,"min",i()),J(b,"max",s()),J(b,"step",d()),b.disabled=v(),Ot(b,l()),J(b,"style",o(x))}),g(n,m),re()}ge(["input","change"]),ge(["change"]),ge(["click"]),ge(["click","input"]);const Bc=n=>n;function Rr(n,{delay:e=0,duration:t=400,easing:r=Bc}={}){const a=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:r,css:i=>`opacity: ${i*a}`}}function Nc(n,e){e().remove&&e().remove()}var Hc=I('<div role="status" aria-live="polite"><div class="wx-text svelte-764ko7"> </div> <div class="wx-button svelte-764ko7"><i class="wxi-close svelte-764ko7"></i></div></div>');function qc(n,e){ne(e,!0);let t=S(e,"notice",19,()=>({}));var r=Hc(),a=C(r),i=C(a),s=U(a,2),l=C(s);l.__click=[Nc,t],F(()=>{we(r,`wx-notice wx-${(t().type?t().type:"")??""} svelte-764ko7`),ee(i,t().text)}),br(3,r,()=>Rr),g(n,r),re()}ge(["click"]);var Uc=I('<div class="wx-notices svelte-ervf1h"></div>');function Yc(n,e){let t=S(e,"data",19,()=>[]);var r=Uc();Se(r,21,t,a=>a.id,(a,i)=>{qc(a,{get notice(){return o(i)}})}),g(n,r)}function Kc(n,e){switch(n.code){case"Enter":{const t=n.target.tagName;if(t==="TEXTAREA"||t==="BUTTON")return;e.onconfirm&&e.onconfirm({ev:n});break}case"Escape":e.oncancel&&e.oncancel({ev:n});break}}var Vc=I('<div class="wx-header svelte-at32q2"> </div>'),Gc=I('<div class="wx-button svelte-at32q2"><!></div>'),Wc=I('<div class="wx-buttons svelte-at32q2"></div>'),jc=I('<div class="wx-modal svelte-at32q2" tabindex="0"><div class="wx-window svelte-at32q2"><!> <div><!></div> <!></div></div>');function Jc(n,e){ne(e,!0);const t=me("wx-i18n").getGroup("core"),r=S(e,"title",3,""),a=S(e,"buttons",19,()=>["cancel","ok"]);function i(_,f){const m={ev:_,button:f};f==="cancel"?e.oncancel&&e.oncancel(m):e.onconfirm&&e.onconfirm(m)}let s;vt(()=>{s.focus()});var l=jc();l.__keydown=[Kc,e];var d=C(l),c=C(d);R(c,()=>e.header,_=>{var f=$(),m=G(f);Ie(m,()=>e.header),g(_,f)},_=>{var f=$(),m=G(f);R(m,r,w=>{var k=Vc(),b=C(k);F(()=>ee(b,r())),g(w,k)},null,!0),g(_,f)});var v=U(c,2),u=C(v);Ie(u,()=>e.children);var h=U(v,2);R(h,()=>e.footer,_=>{var f=$(),m=G(f);Ie(m,()=>e.footer),g(_,f)},_=>{var f=Wc();Se(f,21,a,rt,(m,w)=>{var k=Gc(),b=C(k),x=O(()=>`block ${o(w)==="ok"?"primary":"secondary"}`);Pe(b,{get type(){return o(x)},onclick:y=>i(y,o(w)),children:(y,E)=>{var p=pe();F(()=>ee(p,t(o(w)))),g(y,p)},$$slots:{default:!0}}),g(m,k)}),g(_,f)}),Te(l,_=>s=_,()=>s),br(3,l,()=>Rr,()=>({duration:100})),g(n,l),re()}ge(["keydown"]);function Zc(n,e){let t=hn(e,["$$slots","$$events","$$legacy"]);Tt(n,{children:(r,a)=>{Jc(r,Ge(()=>t))},$$slots:{default:!0}})}var Qc=I("<!> <!> <!>",1);function Xc(n,e){ne(e,!0);let t=ae(null);function r(v){return B(t,Q({...v})),new Promise((u,h)=>{o(t).resolve=_=>{B(t,null),u(_)},o(t).reject=_=>{B(t,null),h(_)}})}let a=ae(Q([]));function i(v){v={...v},v.id=v.id||Ue(),v.remove=()=>B(a,Q(o(a).filter(u=>u.id!==v.id))),v.expire!=-1&&setTimeout(v.remove,v.expire||5100),B(a,Q([...o(a),v]))}bt("wx-helpers",{showNotice:i,showModal:r});var s=Qc(),l=G(s);Ie(l,()=>e.children??Ee);var d=U(l,2);R(d,()=>o(t),v=>{Zc(v,{get title(){return o(t).title},get buttons(){return o(t).buttons},get onconfirm(){return o(t).resolve},get oncancel(){return o(t).reject},children:(u,h)=>{var _=pe();F(()=>ee(_,o(t).message)),g(u,_)},$$slots:{default:!0}})});var c=U(d,2);Yc(c,{get data(){return o(a)}}),g(n,s),re()}var $c=I('<label class="svelte-eqvtjk"> </label>'),ed=I("<div><!> <div><!></div></div>");function Xe(n,e){ne(e,!0);let t=S(e,"label",3,""),r=S(e,"position",3,""),a=S(e,"width",3,""),i=S(e,"error",3,!1),s=S(e,"type",3,""),l=S(e,"required",3,!1),d=Ue();var c=ed(),v=C(c);R(v,t,_=>{var f=$c();J(f,"for",d);var m=C(f);F(()=>ee(m,t())),g(_,f)});var u=U(v,2),h=C(u);Ie(h,()=>e.children??Ee,()=>({id:d})),F(()=>{we(c,`wx-field wx-${r()??""} svelte-eqvtjk`),J(c,"style",a()?`width: ${a()}`:""),he(c,"wx-error",i()),he(c,"wx-required",l()),we(u,`wx-field-control wx-${s()??""} svelte-eqvtjk`)}),g(n,c),re()}ge(["click"]);var td=I('<div class="wx-modal svelte-1ki3q24"><div class="wx-window svelte-1ki3q24"><!></div></div>');function nd(n,e){ne(e,!0);var t=td(),r=C(t),a=C(r);Ie(a,()=>e.children??Ee),br(3,t,()=>Rr,()=>({duration:100})),g(n,t),re()}var rd=I('<div class="wx-portal svelte-1dixdmq"><div><!></div></div>');function Lr(n,e){ne(e,!0);let t=null,r=S(e,"theme",15,""),a=[];const i=v=>{a&&a.push(v)};r()===""&&r(me("wx-theme"));function s(v){const u=ft.getTopNode(v);for(;v!==u&&!v.getAttribute("data-wx-portal-root");)v=v.parentNode;return v}vt(()=>{(e.target||s(t)).appendChild(t),a&&a.forEach(u=>u())}),Sr(()=>{t&&t.parentNode&&t.parentNode.removeChild(t)});var l=rd(),d=C(l),c=C(d);return Ie(c,()=>e.children??Ee,()=>({mount:i})),Te(d,v=>t=v,()=>t),F(()=>we(d,`wx-${r()??""}-theme svelte-1dixdmq`)),g(n,l),re({mount:i})}function ad(n){var e=$(),t=G(e);On(t,()=>`<style>
@font-face {
font-family: 'Roboto';
font-style: normal;
font-weight: 400;
src: local(''),
    url('https://cdn.svar.dev/fonts/roboto/regular.woff2') format('woff2'),
    url('https://cdn.svar.dev/fonts/roboto/regular.woff') format('woff');
}
@font-face {
font-family: 'Roboto';
font-style: normal;
font-weight: 500;
src: local(''),
    url('https://cdn.svar.dev/fonts/roboto/500.woff2') format('woff2'),
    url('https://cdn.svar.dev/fonts/roboto/500.woff') format('woff');
}
</style>`),g(n,e)}var id=I('<link rel="preconnect" href="https://cdn.svar.dev" crossorigin=""> <!> <link rel="stylesheet" href="https://cdn.svar.dev/fonts/wxi/wx-icons.css">',1),od=I('<div class="wx-material-theme" style="height:100%"><!></div>');function bi(n,e){ne(e,!0);let t=S(e,"fonts",3,!0);bt("wx-theme","material");var r=$();gr(i=>{var s=$(),l=G(s);R(l,t,d=>{var c=id(),v=U(G(c),2);ad(v),g(d,c)}),g(i,s)});var a=G(r);R(a,()=>e.children,i=>{var s=od(),l=C(s);Ie(l,()=>e.children),g(i,s)}),g(n,r),re()}function pi(n){var e=$(),t=G(e);On(t,()=>`<style>
@font-face {
font-family: 'Open Sans';
font-style: normal;
font-weight: 500;
src: local(''),
      url('https://cdn.svar.dev/fonts/open-sans/500.woff2') format('woff2'),
      url('https://cdn.svar.dev/fonts/open-sans/500.woff') format('woff');
}
@font-face {
font-family: 'Open Sans';
font-style: normal;
font-weight: 400;
src: local(''),
      url('https://cdn.svar.dev/fonts/open-sans/regular.woff2') format('woff2'),
      url('https://cdn.svar.dev/fonts/open-sans/regular.woff') format('woff');
}
@font-face {
font-family: 'Open Sans';
font-style: normal;
font-weight: 600;
src: local(''),
      url('https://cdn.svar.dev/fonts/open-sans/600.woff2') format('woff2'),
      url('https://cdn.svar.dev/fonts/open-sans/600.woff') format('woff');
}
@font-face {
font-family: 'Open Sans';
font-style: normal;
font-weight: 700;
src: local(''),
      url('https://cdn.svar.dev/fonts/open-sans/700.woff2') format('woff2'),
      url('https://cdn.svar.dev/fonts/open-sans/700.woff') format('woff');
}
  </style>`),g(n,e)}var sd=I('<link rel="preconnect" href="https://cdn.svar.dev" crossorigin=""> <!> <link rel="stylesheet" href="https://cdn.svar.dev/fonts/wxi/wx-icons.css">',1),ld=I('<div class="wx-willow-theme" style="height:100%"><!></div>');function ki(n,e){ne(e,!0);let t=S(e,"fonts",3,!0);bt("wx-theme","willow");var r=$();gr(i=>{var s=$(),l=G(s);R(l,t,d=>{var c=sd(),v=U(G(c),2);pi(v),g(d,c)}),g(i,s)});var a=G(r);R(a,()=>e.children,i=>{var s=ld(),l=C(s);Ie(l,()=>e.children),g(i,s)}),g(n,r),re()}var cd=I('<link rel="preconnect" href="https://cdn.svar.dev" crossorigin=""> <!> <link rel="stylesheet" href="https://cdn.svar.dev/fonts/wxi/wx-icons.css">',1),dd=I('<div class="wx-willow-dark-theme" style="height:100%"><!></div>');function Si(n,e){ne(e,!0);let t=S(e,"fonts",3,!0);bt("wx-theme","willow-dark");var r=$();gr(i=>{var s=$(),l=G(s);R(l,t,d=>{var c=cd(),v=U(G(c),2);pi(v),g(d,c)}),g(i,s)});var a=G(r);R(a,()=>e.children,i=>{var s=dd(),l=C(s);Ie(l,()=>e.children),g(i,s)}),g(n,r),re()}var ud=Array.isArray,vd=Object.defineProperty;const Fr=()=>{};function fd(n){for(var e=0;e<n.length;e++)n[e]()}let Or=!1,zr=[];function hd(){Or=!1;const n=zr.slice();zr=[],fd(n)}function md(n){Or||(Or=!0,queueMicrotask(hd)),zr.push(n)}function gd(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function _d(n){try{return n()}finally{}}function wd(n,e,t,r){function a(i){if(r.capture||xd.call(e,i),!i.cancelBubble)return _d(()=>t.call(this,i))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?md(()=>{e.addEventListener(n,a,r)}):e.addEventListener(n,a,r),a}function yd(n,e,t,r={}){var a=wd(e,n,t,r);return()=>{n.removeEventListener(e,a,r)}}function xd(n){var e=this,t=e.ownerDocument,r=n.type,a=n.composedPath?.()||[],i=a[0]||n.target,s=0,l=n.__root;if(l){var d=a.indexOf(l);if(d!==-1&&(e===document||e===window)){n.__root=e;return}var c=a.indexOf(e);if(c===-1)return;d<=c&&(s=d)}if(i=a[s]||n.target,i!==e){vd(n,"currentTarget",{configurable:!0,get(){return i||t}});try{for(var v,u=[];i!==null;){var h=i.assignedSlot||i.parentNode||i.host||null;try{var _=i["__"+r];if(_!==void 0&&!i.disabled)if(ud(_)){var[f,...m]=_;f.apply(i,[n,...m])}else _.call(i,n)}catch(w){v?u.push(w):v=w}if(n.cancelBubble||h===e||h===null)break;i=h}if(v){for(let w of u)queueMicrotask(()=>{throw w});throw v}}finally{n.__root=e,delete n.currentTarget}}}const jt=[];function bd(n,e=Fr){let t=null;const r=new Set;function a(l){if(gd(n,l)&&(n=l,t)){const d=!jt.length;for(const c of r)c[1](),jt.push(c,n);if(d){for(let c=0;c<jt.length;c+=2)jt[c][0](jt[c+1]);jt.length=0}}}function i(l){a(l(n))}function s(l,d=Fr){const c=[l,d];return r.add(c),r.size===1&&(t=e(a,i)||Fr),l(n),()=>{r.delete(c),r.size===0&&t&&(t(),t=null)}}return{set:a,update:i,subscribe:s}}new Date().valueOf();function pd(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in e){const r=n[t],a=e[t];if(!Gn(r,a))return!1}return!0}function Gn(n,e){if(typeof n=="number"||typeof n=="string"||typeof n=="boolean"||n===null)return n===e;if(typeof n!=typeof e||(n===null||e===null)&&n!==e||n instanceof Date&&e instanceof Date&&n.getTime()!==e.getTime())return!1;if(typeof n=="object")if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;for(let r=n.length-1;r>=0;r--)if(!Gn(n[r],e[r]))return!1;return!0}else return pd(n,e);return n===e}function Br(n){if(typeof n!="object"||n===null)return n;if(n instanceof Date)return new Date(n);if(n instanceof Array)return n.map(Br);const e={};for(const t in n)e[t]=Br(n[t]);return e}function Wn(n,e){return e?Br(n):{...n}}function kd(n,e,t){const r=t&&t.deepCopy;let a=!1,i=null;const s=bd(n),{set:l}=s;let d=Wn(n,r);return s.set=function(c){Gn(d,c)||(d=Wn(c,r),l(c))},s.update=function(c){const v=c(Wn(d,r));Gn(d,v)||(d=Wn(v,r),l(v))},s.reset=function(c){a=!1,d={},s.set(c)},s.subscribe(c=>{a?c&&(!t||!t.debounce?e(c):(clearTimeout(i),i=setTimeout(()=>e(c),t.debounce))):a=!0}),s}ii({addEvent:yd});const Jt=[];function Nr(n,e=Ee){let t=null;const r=new Set;function a(l){if(Sn(n,l)&&(n=l,t)){const d=!Jt.length;for(const c of r)c[1](),Jt.push(c,n);if(d){for(let c=0;c<Jt.length;c+=2)Jt[c][0](Jt[c+1]);Jt.length=0}}}function i(l){a(l(n))}function s(l,d=Ee){const c=[l,d];return r.add(c),r.size===1&&(t=e(a,i)||Ee),l(n),()=>{r.delete(c),r.size===0&&t&&(t(),t=null)}}return{set:a,update:i,subscribe:s}}let Ii=new Date().valueOf();const Hr=()=>Ii++;function Zt(){return"temp://"+Ii++}const Ei=2;class Sd{constructor(e){e&&(this._writable=e.writable,this._async=e.async),this._values={},this._state={}}setState(e,t=0){const r={};return this._wrapProperties(e,this._state,this._values,"",r,t),r}getState(){return this._values}getReactive(){return this._state}_wrapProperties(e,t,r,a,i,s){for(const l in e){const d=t[l],c=r[l],v=e[l];if(d&&(c===v&&typeof v!="object"||v instanceof Date&&c instanceof Date&&c.getTime()===v.getTime()))continue;const u=a+(a?".":"")+l;d?(d.__parse(v,u,i,s)&&(r[l]=v),s&Ei?i[u]=d.__trigger:d.__trigger()):(v&&v.__reactive?t[l]=this._wrapNested(v,v,u,i):t[l]=this._wrapWritable(v),r[l]=v),i[u]=i[u]||null}}_wrapNested(e,t,r,a){const i=this._wrapWritable(e);return this._wrapProperties(e,i,t,r,a,0),i.__parse=(s,l,d,c)=>(this._wrapProperties(s,i,t,l,d,c),!1),i}_wrapWritable(e){const t=[],r=function(){for(let a=0;a<t.length;a++)t[a](e)};return{subscribe:a=>(t.push(a),this._async?setTimeout(a,1,e):a(e),()=>{const i=t.indexOf(a);i>=0&&t.splice(i,1)}),__trigger:()=>{t.length&&(this._async?setTimeout(r,1):r())},__parse:function(a){return e=a,!0}}}}class Id{constructor(e,t,r,a){typeof e=="function"?this._setter=e:this._setter=e.setState.bind(e),this._routes=t,this._parsers=r,this._prev={},this._triggers=new Map,this._sources=new Map,this._routes.forEach(i=>{i.in.forEach(s=>{const l=this._triggers.get(s)||[];l.push(i),this._triggers.set(s,l)}),i.out.forEach(s=>{const l=this._sources.get(s)||{};i.in.forEach(d=>l[d]=!0),this._sources.set(s,l)})}),this._routes.forEach(i=>{i.length=Math.max(...i.in.map(s=>Ci(s,this._sources,1)))}),this._bus=a}init(e){const t={};for(const r in e)if(this._prev[r]!==e[r]){const a=this._parsers[r];t[r]=a?a(e[r]):e[r]}this._prev=this._prev?{...this._prev,...e}:{...e},this.setState(t),this._bus&&this._bus.exec("init-state",t)}setStateAsync(e){const t=this._setter(e,Ei);return this._async?Object.assign(this._async.signals,t):this._async={signals:t,timer:setTimeout(this._applyState.bind(this),1)},t}_applyState(){const e=this._async;if(e){this._async=null,this._triggerUpdates(e.signals,[]);for(const t in e.signals){const r=e.signals[t];r&&r()}}}setState(e,t=[]){const r=this._setter(e);return this._triggerUpdates(r,t),r}_triggerUpdates(e,t){const r=Object.keys(e),a=!t.length;t=t||[];for(let i=0;i<r.length;i++){const s=r[i],l=this._triggers.get(s);l&&l.forEach(d=>{t.indexOf(d)==-1&&t.push(d)})}a&&this._execNext(t)}_execNext(e){for(;e.length;){e.sort((r,a)=>r.length<a.length?1:-1);const t=e[e.length-1];e.splice(e.length-1),t.exec(e)}}}function Ci(n,e,t){const r=e.get(n);if(!r)return t;const a=Object.keys(r).map(i=>Ci(i,e,t+1));return Math.max(...a)}class Di{constructor(){this._nextHandler=null,this._handlers={},this._tag=new WeakMap,this.exec=this.exec.bind(this)}on(e,t,r){let a=this._handlers[e];a?r&&r.intercept?a.unshift(t):a.push(t):a=this._handlers[e]=[t],r&&r.tag&&this._tag.set(t,r.tag)}intercept(e,t,r){this.on(e,t,{...r,intercept:!0})}detach(e){for(const t in this._handlers){const r=this._handlers[t];for(let a=r.length-1;a>=0;a--)this._tag.get(r[a])===e&&r.splice(a,1)}}async exec(e,t){const r=this._handlers[e];if(r)for(let a=0;a<r.length;a++){const i=r[a](t);if(i===!1||i&&i.then&&await i===!1)return}return this._nextHandler&&await this._nextHandler.exec(e,t),t}setNext(e){return this._nextHandler=e}}let qr;function Ed(){if(typeof window>"u")return!0;const n=window.location.hostname,e=["c3Zhci5kZXY=","cmVhY3Qtd2lkZ2V0cy5jb20=","c3ZlbHRlLXdpZGdldHMuY29t","dnVlLXdpZGdldHMuY29t","YW5ndWxhci13aWRnZXRzLmNvbQ==","ZGh0bWx4LmNvbQ==","ZGh0bWx4Y29kZS5jb20=","d2ViaXhjb2RlLmNvbQ==","d2ViaXguaW8=","cmVwbC5jbw==","Y3NiLmFwcA==","cmVwbGl0LmRldg=="];for(let t=0;t<e.length;t++){const r=window.atob(e[t]);if(r===n||n.endsWith("."+r))return!0}return!1}qr=Ed(),qr=!0;function Mi(){return qr}function Ai(){return new Date().valueOf()>Math.imul(0x0069A3B6,1)*256e3}function Cd(n){Mi()||setTimeout(function(){if(typeof window<"u"&&Ai()){const e=window.atob("IFlvdXIgdHJpYWwgaGFzIGV4cGlyZWQuIFBsZWFzZSBwdXJjaGFzZSB0aGUgY29tbWVyY2lhbCBsaWNlbnNlIGZvciB0aGUgS2FuYmFuIHdpZGdldCBhdCBodHRwczovL2RodG1seC5jb20="),{columns:t}=n.getState();t.forEach(r=>r.label+=e),n.setState({columns:t})}},36e3)}const Dd=[{id:1,color:"#FE6158",label:"High"},{id:2,color:"#F1B941",label:"Medium"},{id:3,color:"#77D257",label:"Low"}],Md=["#33B0B4","#0096FA","#F1B941"],_n={label:{show:!0},description:{show:!1},progress:{show:!1},start_date:{show:!1},end_date:{show:!1},users:{show:!1},priority:{show:!1,values:Dd},color:{show:!1,values:Md},cover:{show:!1},attached:{show:!1},menu:{show:!0}},Ur=[{key:"label",type:"text",label:"Label"},{key:"description",type:"textarea",label:"Description"},{type:"combo",label:"Priority",key:"priority",config:{clear:!0}},{type:"color",label:"Color",key:"color",config:{clear:!0}},{type:"progress",key:"progress",label:"Progress"},{type:"date",key:"start_date",label:"Start date"},{type:"date",key:"end_date",label:"End date"},{type:"multiselect",key:"users",label:"Users"}],jn={debounce:100,autoSave:!0,placement:"sidebar"},Ye={kanban:"wx-kanban",toolbar:"wx-kanban-toolbar",editor:"wx-kanban-editor",content:"wx-kanban-content",scrollableContent:"wx-kanban-scrollable-content",search:"wx-kanban-search",vote:"wx-vote-card-button"},Ad=()=>[{by:"label",dir:"asc",text:"Label (a-z)",id:7},{by:"label",dir:"desc",text:"Label (z-a)",id:8},{by:"description",dir:"asc",text:"Description (a-z)",id:9},{by:"description",dir:"desc",text:"Description (z-a)",id:10}],Ti=n=>{const{readonly:e}=n,t=[{id:"duplicate-card",icon:"wxi-content-copy",text:"Duplicate"},{id:"delete-card",icon:"wxi-delete-outline",text:"Delete"}];return!e?.select&&e?.edit?[{id:"set-edit",icon:"wxi-edit-outline",text:"Edit"},...t]:t},Pi=({columns:n,columnIndex:e})=>[{id:"add-card",icon:"wxi-plus",text:"Add new card"},{id:"set-edit",icon:"wxi-edit-outline",text:"Rename"},{id:"move-column:left",icon:"wxi-arrow-left",text:"Move left",disabled:e<=0},{id:"move-column:right",icon:"wxi-arrow-right",text:"Move right",disabled:e>=n.length-1},{id:"delete-column",icon:"wxi-delete-outline",text:"Delete"}],Ri=({rows:n,rowIndex:e})=>[{id:"set-edit",icon:"wxi-edit-outline",text:"Rename"},{id:"move-row:up",icon:"wxi-arrow-up",text:"Move up",disabled:e<=0},{id:"move-row:down",icon:"wxi-arrow-down",text:"Move down",disabled:e>=n.length-1},{id:"delete-row",icon:"wxi-delete-outline",text:"Delete"}];function se(n,e){return!n||!e?!1:n==e}function Li(n,e){return!!n?.find(t=>se(t,e))}function Td(n){return Object.keys(n._cardsMap).reduce((e,t)=>e.concat(n._cardsMap[t]),[])}function ze(n,e){return`${n}`+(e?`:${e}`:"")}function Fi(n){return n.split(/(?<!temp):(?!\/\/)/)}function Jn(n,e,t){return t?n[e]+":"+n[t]:n[e]}function Pd(n,e,t={shift:20}){let r=null;function a(){if(e){const i=e.getBoundingClientRect(),s={x:e.scrollLeft,y:e.scrollTop},{shift:l}=t;n.clientX>i.width+i.left-l&&e.scrollTo(s.x+l,s.y),n.clientX<i.left+l&&e.scrollTo(s.x-l,s.y),n.clientY>i.height+i.top-l&&e.scrollTo(s.x,s.y+l),n.clientY<i.top+l&&e.scrollTo(s.x,s.y-l),r=setTimeout(()=>{a()},100)}}return a(),()=>{r&&clearTimeout(r)}}function Yr(n){const{shape:e,defaultMenuItems:t,readonly:r}=n,a={...e};if(a.menu===!1)return{menu:{show:!1,items:()=>!1}};if(a.menu||={},a.menu===!0&&(a.menu={show:!0}),typeof a.menu=="object"){const i={...a.menu};if(Array.isArray(i.items)){const l=[...i.items];i.items=()=>l}const s=i.items||t;i.items=l=>{let d=s({...l,readonly:r});return d&&(d=Oi(d)),d},i.show??=!0,a.menu=i}return a}function Oi(n){return n.map(e=>{const t={...e};return t.data&&(t.data=Oi(t.data)),t})}function wn(n,e){const{cards:t,columnKey:r,sort:a}=n;if(!a)return t;const i=t.reduce((l,d)=>(l[d[r]]=l[d[r]]||[],l[d[r]].push(d),l),{}),s=(l,d)=>`${typeof d=="function"?d(l):l[d]}`;return Object.keys(i).forEach(l=>{let d;"columns"in a?d=a.columns[l]||{}:d=a,d.by&&(e=e||(c=>{const{dir:v}=c,u=c.by;return(h,_)=>{const f=s(h,u),m=s(_,u);return v==="desc"?m.localeCompare(f,void 0,{numeric:!0}):f.localeCompare(m,void 0,{numeric:!0})}}),i[l].sort(e(d)))}),Object.values(i).flat()}function Rd(n,e){return(n||Ur.filter(t=>e[t.key]?.show)).map(t=>{const r=e[t.key];return r&&typeof t.key=="string"&&(r.values&&!t.values&&(t.values=r.values),t.config&&(r.config=t.config)),(t.type==="comments"||t.key==="users"&&(t.type==="multiselect"||t.type==="combo"))&&t.values&&t.values.forEach(zi),t.id=t.id||Hr(),t})}let Ld=0;function Fd(n){return n.users?.values&&n.users.values.forEach(zi),n}function zi(n){if(!n.id)throw"Please provide user IDs";return!n.avatar&&!n.avatarColor&&(n.avatarColor=["#00D19A","#2F77E3","#FFC975"][Math.floor(Ld++%3)]),n}function Bi(n,e){const{id:t,before:r,columnId:a,rowId:i}=e,s=n.getState(),{_areasMeta:l,cards:d,_cardsMap:c,columns:v,columnKey:u,rowKey:h,sort:_}=s,f=d.findIndex(E=>se(E.id,t));if(f<0||!c[ze(a,i)]||se(t,r))return;const m=d[f];if(typeof v.find(E=>se(E.id,a)).limit=="object"){const E=ze(a,i),p=E===Jn(m,u,h);if(l[E].noFreeSpace&&!p)return}else{const E=se(a,m[u]);if(l[a].noFreeSpace&&!E)return}const w=d.splice(f,1)[0],k={...w},b=c[Jn(k,u,h)]||[],x=b.findIndex(E=>se(E.id,t))||0,y=b[x+1]||{};if(w[u]=a,h&&i&&(w[h]=i),!r)d.push(w);else{const E=d.findIndex(p=>se(p.id,r));d.splice(E,0,w)}return n.setState({cards:_?wn({...s,cards:d},n.sortRule):d}),()=>{const E=k[u],p=h&&k[h];n.in.exec("move-card",{id:t,before:y.id,columnId:E,rowId:p,$meta:{skipHistory:!0}})}}function Od(n,e){const t=e.card||{},r=e.id||t.id||Zt(),a=n.getState(),{columnKey:i,rowKey:s,_areasMeta:l,cards:d,columns:c,rows:v,sort:u}=a,h=e.rowId||s&&t[s]||v[0].id;h&&!e.rowId&&(e.rowId=h);const _=e.columnId||t[i]||c[0].id;if(typeof c.find(m=>se(m.id,_)).limit=="object"){if(l[ze(_,h)].noFreeSpace)return!1}else if(l[_].noFreeSpace)return!1;const f={[i]:_,id:r,...t};return s&&(f[s]=h),d.push(f),n.setState({cards:u?wn({...a,cards:d},n.sortRule):d}),e.before&&Bi(n,{...e,id:r}),e.select!==!1&&n.in.exec("select-card",{id:r}),e.card=f,e.id=r,()=>{n.in.exec("delete-card",{id:r,$meta:{skipHistory:!0}})}}function zd(n,{id:e,card:t,replace:r}){const a=n.getState();let i,s=a.cards.map(l=>se(l.id,e)?(i={...l},r?{id:e,...t}:{...l,...t}):l);return a.sort&&(s=wn({...a,cards:s},n.sortRule)),n.setState({cards:s}),()=>{n.in.exec("update-card",{id:e,card:i,replace:!0,$meta:{skipHistory:!0}})}}function Bd(n,{id:e,card:t,select:r}){const{cards:a,columnKey:i}=n.getState(),s=a.find(l=>se(l.id,e));if(s){const l={...s,id:Zt(),...t||{}};n.in.exec("add-card",{columnId:l[i],before:e,card:l,select:r})}}function Nd(n,{id:e}){const t=n.getState();t.selected?.includes(e)&&n.in.exec("unselect-card",{id:e});const r=t.cards.findIndex(l=>se(l.id,e)),a=t.cards[r],i=t.cards[r+1]?.id,s=t.cards.filter(l=>!se(l.id,e));return n.setState({cards:s}),()=>{n.in.exec("add-card",{columnId:a[t.columnKey],before:i,card:a,$meta:{skipHistory:!0,restore:e}})}}function Ni(n,{id:e,before:t}){const{columns:r}=n.getState(),a=r.findIndex(l=>se(l.id,e)),i=r[a+1]?.id,s=r.splice(a,1)[0];if(t){const l=r.findIndex(d=>se(d.id,t));r.splice(l,0,s)}else r.push(s);return n.setState({columns:r}),()=>{n.in.exec("move-column",{id:e,before:i,$meta:{skipHistory:!0}})}}function Hd(n,e){const t=e.id||e.column?.id||Zt(),r=n.getState().columns,a={id:t,label:"Untitled",...e.column||{}};return r.push(a),n.setState({columns:r}),e.before&&Ni(n,{...e,id:t}),n.in.exec("scroll",{to:"column",id:t}),e.id=t,e.column=a,()=>{n.in.exec("delete-column",{id:t,$meta:{skipHistory:!0}})}}function qd(n,e){const t=n.getState();let r;const a=e.id||e.column?.id,i=t.columns.map(s=>se(s.id,a)?(r={...s},e.replace?{id:a,...e.column}:{...s,...e.column}):s);return n.setState({columns:i}),()=>{n.in.exec("update-column",{column:r,replace:!0,$meta:{skipHistory:!0}})}}function Ud(n,{id:e}){if(e){const t=n.getState(),r=t.columns.findIndex(l=>se(l.id,e)),a=t.columns[r],i=t.columns[r+1]?.id,s=t.columns.filter(l=>!se(l.id,e));return n.setState({columns:s}),()=>{n.in.exec("add-column",{column:a,before:i,$meta:{skipHistory:!0,restore:e}})}}}function Hi(n,{id:e,before:t}){const{rows:r,rowKey:a}=n.getState();if(!a)return;const i=r.findIndex(d=>se(d.id,e)),s=r[i+1]?.id,l=r.splice(i,1)[0];if(t){const d=r.findIndex(c=>se(c.id,t));r.splice(d,0,l)}else r.push(l);return n.setState({rows:r}),()=>{n.in.exec("move-row",{id:e,before:s,$meta:{skipHistory:!0}})}}function Yd(n,e){const t=n.getState(),r=t.rows,a=e.id||e.row?.id||Zt(),i={id:a,label:"Untitled",collapsed:!1,...e.row||{}};r.push(i);let s=t.rowKey;return s||(s="rowKey",r[0]={id:"default",label:"Untitled"},t.cards.map(l=>{l[s]="default"})),n.setState({rows:r,rowKey:s}),e.before&&Hi(n,{id:a,before:e.before}),n.in.exec("scroll",{to:"row",id:a}),e.id=a,e.row=i,()=>{n.in.exec("delete-row",{id:a,$meta:{skipHistory:!0}})}}function Kd(n,e){const t=n.getState();let r;const a=e.id||e.row?.id,i=t.rows.map(s=>se(s.id,a)?(r={...s},e.replace?{id:a,...e.row}:{...s,...e.row}):s);return n.setState({rows:i}),()=>{n.in.exec("update-row",{row:r,replace:!0,$meta:{skipHistory:!0}})}}function Vd(n,{id:e}){if(e){const t=n.getState(),{rows:r}=t,a=r.findIndex(l=>se(l.id,e)),i=r[a],s=r[a+1]?.id;return r.splice(a,1),n.setState({rows:r}),()=>{n.in.exec("add-row",{row:i,before:s,$meta:{skipHistory:!0,restore:e}})}}}function Gd(n,e){const{source:t}=e,{_cardsMeta:r}=n.getState();[...t].forEach(a=>{const i=r[a]||{};i.dragging=!0,r[a]=i}),n.setState({_cardsMeta:r})}function Wd(n,e){const{rowId:t,columnId:r}=e;if(!r)return;const{_areasMeta:a,cards:i,columns:s,rowKey:l}=n.getState(),d=i.find(h=>se(h.id,e.source[e.source.length-1])),c=ze(r,t),v=s.find(h=>se(h.id,r));let u;typeof v.limit=="object"?u=!a[c].noFreeSpace||se(c,ze(d.column,d[l])):u=!a[r].noFreeSpace||se(r,d.column),e.dragAllowed=u}function jd(n,{id:e,columnId:t,rowId:r,before:a,source:i}){if(!t)return;const s={_areasMeta:{}},{_areasMeta:l,_cardsMeta:d}=n.getState(),c=ze(t,r);if(c&&e){const u=l[c],{columnId:h,rowId:_}=u;if(i.length>1){const f=Hr();i.forEach(m=>{n.in.exec("move-card",{id:m,columnId:h,rowId:_,before:a,$meta:{batch:f}});const w=d[m];w&&(w.dragging=!1)})}else{n.in.exec("move-card",{id:e,columnId:h,rowId:_,before:a});const f=d[e];f&&(f.dragging=!1)}}s._cardsMeta=d;const v=n.getState()._areasMeta;Object.keys(v).forEach(u=>{s._areasMeta[u]={...v[u],height:null}}),n.setState(s)}function Jd(n,{id:e,groupMode:t,eventSource:r}){const{selected:a,search:i}=n.getState();if(e){let s=null;if(t)if(s=a?[...a]:[],s.includes(e)){n.in.exec("unselect-card",{id:e});return}else s.push(e);else s=[e];i&&n.in.exec("set-search",{value:null}),n.setState({selected:s}),s.length>1||r==="dnd"?n.in.exec("set-edit",null):n.in.exec("set-edit",{cardId:e,eventSource:"select-card"})}}function Zd(n,{id:e}){const t=n.getState().selected;if(t){if(n.in.exec("set-edit",null),!e){n.setState({selected:null});return}const r=t.filter(a=>!se(a,e));n.setState({selected:r})}}function Kr(n,e){return`${n}`.toLowerCase().includes(`${e}`.toLowerCase())}function Qd(n,e,t){return t?Kr(n[t]||"",e):Kr(n.label||"",e)||Kr(n.description||"",e)}function Xd(n,{value:e,by:t,searchRule:r}){const a=n.getState(),i=e?.trim(),s=a._cardsMeta;let l={value:e,by:t};i?Td(a).map(d=>{const c=s[d.id]=s[d.id]||{};(r||Qd)(d,i,t)?(c.found=!0,c.dimmed=!1):(c.found=!1,c.dimmed=!0)}):(Object.keys(s).forEach(d=>{const c=s[d];c&&(delete c.dimmed,delete c.found)}),typeof t>"u"&&(l=null)),n.setState({_cardsMeta:s,search:l})}function $d(n,e){n.setState({_scroll:e})}function eu(n,e){if(!e){n.setState({sort:null});return}const t=n.getState(),r=e.columnId,a=e.by||"label",i=e.dir||"asc",s=e.preserve||!1;let l=t.sort||{};r?("column"in l||(l={columns:{}}),l.columns[r]={by:a,dir:i,preserve:s}):l={dir:i,by:a,preserve:s};const d=wn({...t,sort:l},n.sortRule);s?n.setState({sort:l,cards:d}):n.setState({cards:d})}function tu(n,e){n.setState({_edit:e})}function nu(n,{id:e,cardId:t,comment:r}){if(t){const a=n.getState(),i=a.currentUser,s=e||r.id||Zt(),l=t||r.cardId;if(!l||!i&&!r.userId)return;const d=a.cards.map(c=>se(c.id,l)?{...c,comments:[...c.comments||[],{userId:i,...r,id:s,cardId:l,date:r.date||new Date}]}:c);return n.setState({cards:d}),()=>{n.in.exec("delete-comment",{id:s,cardId:l,$meta:{skipHistory:!0}})}}}function ru(n,{cardId:e,id:t,comment:r}){if(e){const a=n.getState(),i=t||r.id,s=e||r.cardId;if(!i||!s)return;let l={};const d=a.cards.map(c=>se(c.id,s)?{...c,comments:(c.comments||[]).map(v=>se(v.id,i)?(l={...v},{...v,...r}):v)}:c);return n.setState({cards:d}),()=>{n.in.exec("update-comment",{id:i,cardId:s,comment:l,$meta:{skipHistory:!0}})}}}function au(n,{cardId:e,id:t}){if(e){const r=n.getState();if(!t||!e)return;let a={};const i=r.cards.map(s=>se(s.id,e)?{...s,comments:(s.comments||[]).filter(l=>se(l.id,t)?(a={...l},!1):!0)}:s);return n.setState({cards:i}),()=>{n.in.exec("add-comment",{id:t,cardId:e,comment:a,$meta:{skipHistory:!0}})}}}function iu(n,e){const t=n.getState().links,r=e.id||e.link.id||Zt();if(t.find(i=>se(r,i.id)))return;const a={...e.link,id:r};return t.push(a),n.setState({links:t}),e.link=a,e.id=r,()=>{n.in.exec("delete-link",{id:r,$meta:{skipHistory:!0}})}}function ou(n,{id:e}){if(e){const t=n.getState(),r=t.links.find(i=>se(i.id,e)),a=t.links.filter(i=>!se(i.id,e));return n.setState({links:a}),()=>{n.in.exec("add-link",{id:e,link:r,$meta:{skipHistory:!0,restore:e}})}}}function su(n,{cardId:e,userId:t}){const r=n.getState(),{currentUser:a}=r;if(!e||!a&&!t)return;const i=r.cards.map(s=>se(s.id,e)?{...s,votes:[...s.votes||[],t||a]}:s);n.setState({cards:i})}function lu(n,{cardId:e,userId:t}){const r=n.getState(),{currentUser:a}=r;if(!e||!a&&!t)return;const i=r.cards.map(s=>se(s.id,e)?{...s,votes:(s.votes||[]).filter(l=>!se(l,t||a))}:s);n.setState({cards:i})}class cu extends Sd{in;out;sortRule;config;_router;constructor(e,t){super({writable:e,async:!1}),Cd(this),this.in=new Di,this.out=new Di,this.in.setNext(this.out),this.config={history:!0,...t||{}},this._router=new Id(super.setState.bind(this),[{in:["cards","rows","columns","columnKey","rowKey"],out:["_areasMeta","_cardsMap"],exec:a=>{const i=this.getState(),{rows:s,columns:l,columnKey:d,rowKey:c,cards:v}=i,u={},h={};if(!d)return{_cardsMap:h,_areasMeta:u};v.map(_=>{const f=Jn(_,d,c);h[f]=h[f]||[],h[f]?.push(_)}),l.map(_=>{h[_.id]=h[_.id]||[],c&&s.map(f=>{const m=ze(_.id,f.id);u[m]={columnId:_.id,rowId:f.id,column:_,row:f,cardsCount:0},h[m]=h[m]||[],h[_.id]=h[_.id]?.concat(h[m]||[])}),u[_.id]={columnId:_.id,column:_,cardsCount:0}}),this._computeLimits({_areasMeta:u,_cardsMap:h}),this.setState({_areasMeta:u,_cardsMap:h},a)}},{in:["renderType","scrollType"],out:["_layout"],exec:a=>{const{renderType:i,scrollType:s}=this.getState(),l=`${s}:${i}`;this.setState({_layout:l},a)}}],{}),this._initStructure();const r=this._getHandlers();this._setHandlers(r)}setState(e,t){return this._router.setState(e,t)}init(e){const{cards:t=[],links:r=[],columns:a=[],rows:i,columnKey:s="column",rowKey:l="",sort:d=null,readonly:c=!1,...v}=e,u=this._normalizeReadonlyConfig(c);let h=this._normalizeCards(t);const _=(r||[]).map(E=>{const p={...E};return p.masterId&&(p.source=p.masterId),p.slaveId&&(p.target=p.slaveId),p});d&&(h=wn({columnKey:s,sort:d,cards:h},this.sortRule));const f=a.map(E=>({...E})),m=(l&&i||[{id:""}]).map(E=>({...E})),{cardShape:w,columnShape:k,rowShape:b,editorShape:x}=this._normalizeShapes({...e,cards:h,readonly:u}),y={...v,cards:h,links:_,columns:f,columnKey:s,rowKey:l,rows:m,cardShape:w,columnShape:k,rowShape:b,editorShape:x,readonly:u};this._router.init(y),this.setState({_edit:null,selected:null})}undo(){const e=this.getState().history,t=e.undo.pop();if(t){if(typeof t=="object")t.undo(),e.redo.push({ev:t.ev,key:t.key});else if(typeof t=="number"){const r=e.batches[t];for(let a=r.length-1;a>=0;a--)r[a].undo();e.redo.push(t)}}this.setState({history:e})}redo(){const e=this.getState().history,t=[...e.redo],r=t.pop();if(r){if(typeof r=="object"){const{ev:a,key:i}=r;this.in.exec(i,a),this.setState({history:{...e,redo:t}})}else if(typeof r=="number"){const a=e.batches[r];delete e.batches[r],a.forEach(i=>{const{ev:s,key:l}=i;this.in.exec(l,s)}),this.setState({history:{...e,redo:t}})}}}_setHandlers(e){const t=this.getState().history;Object.keys(e).forEach(r=>{this.in.on(r,a=>{const i=e[r](this,a),s=a?.$meta;this.config.history&&i&&!s?.skipHistory&&(s?.batch?(t.batches[s.batch]??=[],t.batches[s.batch].push({undo:i,key:r,ev:{...a}}),t.undo.includes(s.batch)||t.undo.push(s.batch)):t.undo.push({undo:i,key:r,ev:{...a}}),t.redo.forEach(l=>{typeof l=="string"&&delete t.batches[l]}),t.redo=[],this.setState({history:t}))})})}_getHandlers(){return{"add-card":Od,"update-card":zd,"move-card":Bi,"duplicate-card":Bd,"delete-card":Nd,"add-column":Hd,"update-column":qd,"move-column":Ni,"delete-column":Ud,"add-row":Yd,"update-row":Kd,"move-row":Hi,"delete-row":Vd,"start-drag-card":Gd,"drag-card":Wd,"end-drag-card":jd,"set-search":Xd,"select-card":Jd,"unselect-card":Zd,scroll:$d,"set-sort":eu,"set-edit":tu,"add-comment":nu,"update-comment":ru,"delete-comment":au,"add-link":iu,"delete-link":ou,"add-vote":su,"delete-vote":lu,undo:()=>this.undo(),redo:()=>this.redo()}}_initStructure(){const e="default",t="default";this.setState({columnKey:"column",rowKey:"",columns:[],rows:[],cards:[],cardShape:_n,columnShape:{},rowShape:{},editorShape:Ur,readonly:null,cardHeight:null,scrollType:e,renderType:t,editor:{},currentUser:null,links:[],history:{undo:[],redo:[],batches:{}},sort:null,selected:null,search:null,_cardsMap:{},_cardsMeta:{},_areasMeta:{},_scroll:null,_edit:null,_layout:`${e}:${t}`})}_computeLimits({_areasMeta:e,_cardsMap:t}){for(const r in e){const a=t[r];if(a){const i=e[r];i.cardsCount=a.length||0;const s=i.column;if(s.limit){let l=0;typeof s.limit=="object"?i.rowId?l=s.limit[i.rowId]||0:l=Object.keys(s.limit).reduce((d,c)=>d+s.limit[c],0):l=s.limit,i.totalLimit=l,i.isOverLimit=!!l&&i.cardsCount>l,i.noFreeSpace=s.strictLimit&&!!l&&i.cardsCount>=l}}}}_normalizeCards(e){return e.map(t=>{const r=t.id||Hr();return{...t,id:r}})}_normalizeShapes(e){const{cardShape:t=_n,columnShape:r,rowShape:a,readonly:i,editorShape:s}=e;let l={...t};for(const u in t){const h=t[u];typeof h=="boolean"&&(l[u]={show:h})}l=Object.keys(l).reduce((u,h)=>{const _=_n[h];return _?u[h]={..._,...l[h]}:u[h]=l[h],u},{}),i&&!i.edit&&(l.menu=l.menu||{},l.menu.show=!1),l=Fd(l),l=Yr({readonly:i,shape:l,defaultMenuItems:Ti});const d=Rd(s,l),c=Yr({shape:r,defaultMenuItems:Pi}),v=Yr({shape:a,defaultMenuItems:Ri});return{cardShape:l,columnShape:c,rowShape:v,editorShape:d}}_normalizeReadonlyConfig(e){let t={add:!0,dnd:!0,edit:!0,select:!0};return typeof e=="object"?t={...t,...e}:e===!0&&Object.keys(t).forEach(r=>{t[r]=!1}),t}}function du(n,e,t=5){return Math.abs(e.x-n.x)>t||Math.abs(e.y-n.y)>t}function Vr(n,e){return n>=e[0]&&n<=e[1]}function uu(n,e){const{x:t,y:r}=n,a=Vr(t,[e.x,e.right]),i=Vr(r,[e.y,e.bottom]);return a&&i}function qi(n,e,t){const r={x:e.x-t.x,y:e.y-t.y};return{x:n.x-r.x,y:n.y-r.y}}function Ui(n,e,t=!1){const r=Array.from(n.querySelectorAll("[data-drop-area]")),a=Array.isArray(e)?e:[e],i=n.querySelector(`[data-drag-item='${a[a.length-1]}']`)?.offsetHeight||300,s={},l=[],d=r.reduce((c,v)=>{const u=JSON.parse(JSON.stringify(v.getBoundingClientRect())),h=v.getAttribute("data-drop-area"),_=Array.from(v.querySelectorAll("[data-drag-item]")),f=[],m=_.reduce((x,y)=>{const E=JSON.parse(JSON.stringify(y.getBoundingClientRect())),p=y.getAttribute("data-drag-item"),P=x[x.length-1]?.bottom??E.y,A={...E,y:P,id:p};return s[p]=A,x.push(A),Li(a,p)||f.push(p),x},[]),w=f.map((x,y)=>({...m[y],id:x}));if(!t){const x=v.offsetParent,y=30;v.offsetTop+v.offsetHeight+y>=x.scrollHeight&&(u.bottom+=i+y,u.height+=i+y)}const k={...u,id:h},b=v.querySelector(".wx-list-wrapper");return b&&(k.scrollList={node:b,initialScrollY:b.scrollTop}),l.push(k),c[h]=w,c},{});return{dragItemsCoords:s,dropAreasCoords:l,dropAreaItemsCoords:d}}function Yi(n){const e={};if(e.target=n.target,"touches"in n){const t=n.touches[0];e.touches=n.touches,e.clientX=t.clientX,e.clientY=t.clientY}else e.clientX=n.clientX,e.clientY=n.clientY;return e}function Gr(n,e="data-id"){let t=n;for(!t.tagName&&n.target&&(t=n.target);t;){if(t.getAttribute&&t.getAttribute(e))return t;t=t.parentNode}return null}function Wr(n,e="data-id"){const t=Gr(n,e);return t?t.getAttribute(e):null}function yn(n,e="data-id"){const t=Gr(n,e);return t?vu(t.getAttribute(e)):null}function vu(n){if(typeof n=="string"){const e=n*1;if(!isNaN(e))return e}return n}function fu(){return{detect:()=>!0,addEvent:function(n,e,t){return n.addEventListener(e,t),()=>n.removeEventListener(e,t)},addGlobalEvent:function(n,e){return document.addEventListener(n,e),()=>document.removeEventListener(n,e)},getTopNode:function(){return window.document.body}}}const mt=fu();new Date().valueOf();function hu(n,e){if(e.readonly)return;let t,r;const a=n;let i,s,l,d,c,v,u,h,_,f,m,w=null,k=null;const b=(Y,H)=>{e.api.exec(Y,H),e.onAction&&e.onAction(Y,H)};n.querySelector(`[data-kanban-id='${Ye.scrollableContent}']`)?.addEventListener("scroll",()=>{if(d){const{itemId:Y,itemRect:H,itemsId:T}=d;d.scroll={x:i.scrollLeft,y:i.scrollTop};const z=Ui(a,T,!0);c=z.dragItemsCoords,u=z.dropAreasCoords,v=z.dropAreaItemsCoords,c[Y]=H}},{capture:!0});const{data:x}=e.api.getStores(),y={duration:500,timer:null},E=()=>{y.callback&&(y.timer=setTimeout(y.callback,y.duration))},p=()=>{y.timer&&clearTimeout(y.timer)};function P(Y){if(s&&clearTimeout(s),i){const H=i.getBoundingClientRect(),T={x:i.scrollLeft,y:i.scrollTop},z=50;Y.clientX>H.width+H.left-z&&i.scrollTo(T.x+z,T.y),Y.clientX<H.left+z&&i.scrollTo(T.x-z,T.y),Y.clientY>H.height+H.top-z&&i.scrollTo(T.x,T.y+z),Y.clientY<H.top+z&&i.scrollTo(T.x,T.y-z),s=setTimeout(()=>{P(Y)},100)}}function A(Y){const H={},T=u.find(K=>uu(Y,K)),z=T?.id;if(z){const[K,j]=Fi(z);H.overAreaId={rowId:j,columnId:K};let te=Y.y;T.scrollList&&(te+=T.scrollList.node.scrollTop-T.scrollList.initialScrollY);const ie=v[z];H.before=ie.find(ve=>Vr(te,[ve.y,ve.bottom]))?.id}return H}function N(Y,H,T,z,K){if(Y.touches&&Y.touches.length>1)return;const j=z.itemId;K?.indexOf(j)===-1&&(b("select-card",{id:j,eventSource:"dnd"}),K=[j]),l=qi(H,z,c[j]),W(K);const te=A(T);_=te.before,h=te.overAreaId,m=K||[j],f=j;const{_areasMeta:ie,_layout:ve}=x.getState();u?.forEach(X=>{X.id&&(ie[X.id].height=ve!=="default:lazy"?X.height:null)}),b("start-drag-card",{id:j,rowId:h.rowId,columnId:h.columnId,before:_,source:m})}function V(Y,H,T,z){const K=c[z.itemId];l=qi(H,z,K),t.style.left=l.x+"px",t.style.top=l.y+"px";const j=A(T),te={id:f,rowId:h.rowId,columnId:h.columnId,before:_,source:m};j.overAreaId?.columnId&&(te.rowId!==j.overAreaId?.rowId||te.columnId!==j.overAreaId?.columnId)&&(h=j.overAreaId,te.rowId=h.rowId,te.columnId=h.columnId),_!==j.before&&(_=te.before=j.before),b("drag-card",te);const ie=Array.from(document.getElementsByClassName("wx-kanban-drop-area"));for(const ve of ie){const X=ve;X.style.minHeight=`${c[f].height}px`}}function W(Y){const H=a.closest(".wx-kanban");Y?.length>1&&H.style.setProperty("--wx-kanban-dragged-cards-count",JSON.stringify(`${Y.length}`)),H.appendChild(t),t.classList.add("wx-dragged-card"),t.style.left=l.x+"px",t.style.top=l.y+"px",mt.getTopNode(H).classList.add("wx-ondrag")}function Z(){const Y=a.closest(".wx-kanban");t.remove(),mt.getTopNode(Y).classList.remove("wx-ondrag"),Y.style.removeProperty("--wx-kanban-dragged-cards-count"),t=null}function L(Y,H,T){const z=T.scroll,K={x:H.scrollLeft,y:H.scrollTop};return{x:Y.clientX+(K.x-z.x),y:Y.clientY+(K.y-z.y)}}function D(Y){const H=Yi(Y);if(H.touches&&H.touches.length>1||"button"in Y&&Y.button!==0)return;const T=Gr(H.target,"data-drag-item");if(i=a.querySelector(`[data-kanban-id="${Ye.content}"]`),T){const z=yn(T,"data-drag-item"),K=yn(H.target,"data-drag-item"),j=x.getState().selected,te=j?.length>1?[...j,z]:[z],ie=Ui(a,te);c=ie.dragItemsCoords,u=ie.dropAreasCoords,v=ie.dropAreaItemsCoords,t=T.cloneNode(!0),r="touches"in Y?{up:"touchend",move:"touchmove"}:{up:"mouseup",move:"mousemove"},"touches"in Y?(y.callback=()=>{document.addEventListener(r.move,M,{passive:!1})},E()):w=mt.addGlobalEvent(r.move,M,H.target),k=mt.addGlobalEvent(r.up,q,H.target),d={x:H.clientX,y:H.clientY,itemId:z,itemsId:te,itemRect:c[z],areaId:K,scroll:{x:i.scrollLeft,y:i.scrollTop}}}}function M(Y){Y.preventDefault(),Y.stopPropagation();const H=Yi(Y);if(P(H),!d)return;const T=x.getState(),{selected:z}=T,K=L(H,i,d),j={x:H.clientX,y:H.clientY};!f&&du(d,j)&&N(H,j,K,d,z),f&&V(T,j,K,d)}function q(){w&&w(),k&&k(),p(),Z(),s&&clearTimeout(s),f&&(b("end-drag-card",{id:f,rowId:h.rowId,columnId:h.columnId,before:_,source:m}),f=null),d=null}return a.addEventListener("mousedown",D),a.addEventListener("touchstart",D),a.addEventListener("dragstart",Y=>Y.preventDefault()),{destroy(){a.removeEventListener("mousedown",D),a.removeEventListener("touchstart",D)}}}function mu(n,e){if(e.readonly)return;let t;const{api:r}=e,a=s=>{t=s.target};r.on("select-card",({id:s})=>{t||setTimeout(()=>{r.exec("scroll",{to:"card",id:s})},100)});const i=s=>{if(!t||Wr(s.target,"data-ignore-selection"))return;const l=yn(t,"data-drag-item"),d=yn(t,"data-kanban-id"),c=s.metaKey||s.ctrlKey,v=s.shiftKey;t===s.target&&d!==Ye.editor&&d!==Ye.vote&&gu({itemId:l,groupMode:c,rangeMode:v,api:r}),t=null};return n.addEventListener("mousedown",a),n.addEventListener("mouseup",i),{destroy(){n.removeEventListener("mousedown",a),n.removeEventListener("mouseup",i)}}}function gu(n){const{itemId:e,groupMode:t,rangeMode:r,api:a}=n,{_cardsMap:i,columnKey:s}=a.getState(),{selected:l}=a.getState();if(!e&&l?.length){a.exec("unselect-card",{id:null});return}if(r&&l?.length){const d=a.getCard(e),c=a.getCard(l[l.length-1]);if(_u(d,c,s)){const v=Object.keys(i).filter(m=>wu(m)===d[s]).reduce((m,w)=>{const k=i[w];return m.concat(k)},[]),u=v.findIndex(m=>se(m.id,e)),h=v.findIndex(m=>se(m.id,c?.id)),_=Math.min(u,h),f=Math.max(u,h);v.slice(_,f+1).forEach(m=>{l.indexOf(m.id)===-1&&a.exec("select-card",{id:m.id,groupMode:!0})});return}}a.exec("select-card",{id:e,groupMode:t})}function _u(n,e,t){return!n||!e||!t?!1:se(n[t],e[t])}function wu(n){return Fi(n)[0]}function yu(n,e){const{api:t,tick:r=()=>new Promise(l=>{requestAnimationFrame(()=>{l()})})}=e,a=t.getReactiveState()._scroll,i={card:"data-drag-item",column:"data-column-header",row:"data-row-header"};a?.subscribe(l=>{if(l){const{to:d,id:c,options:v}=l;s(`[${i[d]}="${c}"]`,v).then(u=>{u&&t.exec("scroll",null)}).catch()}});function s(l,d){return new Promise(c=>{r().then(()=>{const v=n.querySelector(l);v&&(v.scrollIntoView(d||{behavior:"smooth",block:"nearest",inline:"nearest"}),c(!0)),c(!1)})})}}function jr(n){let e=!1;function t(d){d.buttons===1&&(e=!0)}function r(){e=!1,a&&a()}let a=null;function i(d){e&&(a&&a(),a=Pd(d,n))}function s(){a&&(a(),a=null),e=!1}const l=mt.getTopNode(n);return l.addEventListener("mousemove",i),l.addEventListener("mouseup",s),n.addEventListener("mousedown",t),n.addEventListener("mouseover",t),n.addEventListener("mouseleave",r),{destroy:()=>{l.removeEventListener("mousemove",i),l.removeEventListener("mouseup",s),n.removeEventListener("mousedown",t),n.removeEventListener("mouseover",t),n.removeEventListener("mouseleave",r)}}}function xu(n,e){if(e.readonly)return;const t=e.locale,{api:r}=e,a=e.onAction;let i=e.inFocus||!1,s;function l(h,_){switch(h){case"delete":{const f=r.getState().selected;f?.length&&(e.confirmDeletion?.()||Promise.resolve()).then(()=>{f.forEach(m=>{r.exec("delete-card",{id:m})})}).catch(()=>{});break}case"ctrl+d":_.preventDefault(),r.getState().selected?.forEach(f=>{const m=r.getCard(f);r.exec("duplicate-card",{id:f,card:{label:`${t("Duplicate of")} ${m?.label}`}})});break;case"ctrl+z":_.preventDefault(),r.exec("undo",null);break;case"ctrl+shift+z":case"ctrl+y":_.preventDefault(),r.exec("redo",null);break}}function d(h){if(i){const _=h.ctrlKey||h.metaKey,f=h.shiftKey,m=h.code.replace("Key","").toLowerCase(),w=`${_?"ctrl+":""}${f?"shift+":""}${m}`;l(w,h),a&&a("keydown",{hotkey:w})}}function c(h){const _=Wr(h.target,"data-wx-widget");i=_===Ye.kanban||_===Ye.toolbar,s=_,a&&a("set-focus",{inFocus:i})}function v(h){const _=Wr(h.target,"data-wx-widget");s===_&&!i&&(i=!0,s=Ye.kanban,a&&a("set-focus",{inFocus:i}))}const u=[mt.addGlobalEvent("keydown",d,n),mt.addGlobalEvent("mousedown",c,n),mt.addGlobalEvent("focusin",c,n),mt.addGlobalEvent("focusout",v,n)];return{destroy:()=>{u.forEach(h=>h())}}}function Ki(n){switch(n?.toLowerCase()){case"jpg":case"jpeg":case"gif":case"png":case"bmp":case"tiff":case"pcx":case"svg":case"ico":return!0;default:return!1}}class bu{_store;constructor(e){this._store=e}json(e){const t=document.querySelector(".wx-kanban"),{cards:r,links:a,columns:i,rows:s}=this._store.getState(),l={cards:r,links:a,columns:i};s.length>0&&(l.rows=s),this._save(l,`${e||"kanban-export"}`,"json",t)}_save(e,t,r,a){const i=document.createElement("a");mt.getTopNode(a).appendChild(i),i.style.display="none";const s=JSON.stringify(e),l=new Blob([s],{type:"octet/stream"}),d=window.URL.createObjectURL(l);i.href=d,i.download=`${t}.${r}`,i.click(),window.URL.revokeObjectURL(d),i.remove()}}function pu(n,e){return{exec:n.in.exec.bind(n.in),on:n.out.on.bind(n.in),intercept:n.in.intercept.bind(n.in),detach:n.in.detach.bind(n.in),getState:n.getState.bind(n),getReactiveState:n.getReactive.bind(n),setNext:t=>e=e.setNext(t),getStores:()=>({data:n}),getCard:t=>{const{cards:r}=n.getState();return r.find(a=>a.id==t)},serialize:()=>{const{cards:t,links:r,columns:a,rows:i}=n.getState();return{cards:t,links:r,columns:a,rows:i}},export:new bu(n),getAreaCards:(t,r)=>{const a=ze(t,r);return n.getState()._cardsMap[a]},getColumnCards:t=>n.getState()._cardsMap[t]}}var ku=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Su(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Vi={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(ku,function(){var t={};function r(){return typeof navigator.userAgentData=="object"&&"mobile"in navigator.userAgentData?navigator.userAgentData.mobile:(m=navigator.userAgent||navigator.vendor||window.opera,/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(m)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(m.slice(0,4)));var m}function a(){if(r()){var m=window.innerWidth,w=window.innerHeight,k=Math.min(m,w),b=Math.max(m,w);return k<=480&&b<=896}return!1}function i(){return t.AppRunsOnLegacyTouchDevice==null&&(t.AppRunsOnLegacyTouchDevice=!c("(pointer:fine)")&&!c("(pointer:coarse)")&&!c("-moz-touch-enabled")&&("ontouchstart"in Window||(navigator.maxTouchPoints||0)>0||/touch|android|iphone|ipod|ipad/i.test(navigator.userAgent))),t.AppRunsOnLegacyTouchDevice}function s(){return t.DevicePointingAccuracy==null&&(l(),d()||t.waitingForLoaded||(t.waitingForLoaded=!0,window.addEventListener("DOMContentLoaded",l))),t.DevicePointingAccuracy}function l(){t.DeviceCanHover=c("(hover:hover)");var m="fine";switch(!0){case c("(pointer:none)"):m="none";break;case c("(pointer:coarse)"):case c("-moz-touch-enabled"):case i():m="coarse"}if(t.DevicePointingAccuracy=m,d()){var w=document.body.classList;if(m==="none"!==w.contains("noPointer")||m==="fine"!==w.contains("finePointer")||m==="coarse"!==w.contains("coarsePointer"))switch(document.body.classList.remove("noPointer","finePointer","coarsePointer"),m){case"none":document.body.classList.add("noPointer");break;case"fine":document.body.classList.add("finePointer");break;case"coarse":document.body.classList.add("coarsePointer")}}}function d(){return document.readyState==="interactive"||document.readyState==="complete"}function c(m){var w=window.matchMedia||window.webkitMatchmedia||window.mozMatchmedia||window.oMatchmedia;return w!=null&&w(m).matches}function v(m,w){return typeof m.item=="function"?m.item(w):m[w]}function u(m,w){for(var k=0,b=m.length;k<b;k++)if(w.test(v(m,k)))return!0;return!1}function h(m,w){if(typeof m!="function")throw new Error("handler function expected");t.EventHandlerRegistry==null&&(t.EventHandlerRegistry=[]);for(var k=t.EventHandlerRegistry,b=0,x=k.length;b<x;b++)if(k[b].Handler===m)return void(k[b].onceOnly=w);k.push({Handler:m,onceOnly:w}),k.length===1&&(t.AccuracyPoller=setInterval(function(){var y=s();l(),s()!==y&&function(){t.EventHandlerRegistry==null&&(t.EventHandlerRegistry=[]);for(var E=t.EventHandlerRegistry,p=0,P=E.length;p<P;p++){var A=E[p],N=A.Handler,V=A.onceOnly;try{N(s())}catch(W){console.warn("PointingAccuracy observation function failed with",W)}V&&_(N)}}()},500))}function _(m){t.EventHandlerRegistry==null&&(t.EventHandlerRegistry=[]);for(var w=t.EventHandlerRegistry,k=0,b=w.length;k<b;k++)if(w[k].Handler===m){w.splice(k,1);break}w.length===0&&(clearInterval(t.AccuracyPoller),t.AccuracyPoller=void 0)}var f={get isMobile(){return r()},get isPhone(){return a()},get isTablet(){return r()&&!a()},get isLegacyTouchDevice(){return i()},rewriteMediaQueriesOnLegacyTouchDevices:function m(){if(!t.MediaQueriesHaveBeenRewritten&&i())if(d()){for(var w=document.styleSheets,k=0,b=w.length;k<b;k++)for(var x=w[k].cssRules||w[k].rules,y=0,E=x.length;y<E;y++){var p=x[y];if(p.type===CSSRule.MEDIA_RULE&&u(p.media,/handheld/i)){var P=p.media;P.mediaText=P.mediaText.replace("handheld","screen")}}var A=document.getElementsByTagName("link");for(k=0,b=A.length;k<b;k++){var N=A[k];/handheld/i.test(N.media)&&(N.media=N.media.replace("handheld","screen"))}t.MediaQueriesHaveBeenRewritten=!0}else window.addEventListener("DOMContentLoaded",m)},get PointingAccuracy(){return s()},get canHover(){return t.DevicePointingAccuracy==null&&(l(),d()||t.waitingForLoaded||(t.waitingForLoaded=!0,window.addEventListener("DOMContentLoaded",l))),t.DeviceCanHover},onPointingAccuracyChanged:function(m){h(m,!1)},oncePointingAccuracyChanged:function(m){h(m,!0)},offPointingAccuracyChanged:function(m){_(m)},get observesPointingAccuracy(){return t.AccuracyPoller!=null}};return f})})(Vi);var Iu=Vi.exports;const Eu=Su(Iu);function Zn(n,e){return n.data&&(n.data=n.data.map(t=>Zn(t,e))),{...n,text:e(n.text),css:n.disabled?"disabled":""}}function Cu(n){let e=[];n.subscribe(l=>{e=l});const t=new Map,r=Nr(new Map);function a(l,d,c){t.set(l,d);const v=new ResizeObserver(()=>{c()});return v.observe(d),()=>{v.disconnect()}}function i(l,d,c){const v=typeof c<"u";r.update(u=>{const h=new Map(u);return v?h.set(l,c):h.delete(l),h}),r.update(u=>{const h=new Map(u);for(let _=d+(v?1:0);_<e.length;(_+=1)-1){const f=e[_].id,m=t.get(f);m&&h.set(f,m.offsetLeft)}return h})}function s(l,d){t.delete(l),i(l,d)}bt("column-tracking",{register:a,unregister:s,handleOffsetChange:i,get columnOffsets(){return r}})}function Gi(){return me("column-tracking")}function Wi(n,e){return n.map(t=>{const r=e(t);return t.data&&t.data.length&&(r.data=Wi(t.data,e)),r})}function ji(n,e){const t=[];return n.forEach(r=>{if(r.data){const a=ji(r.data,e);a.length&&t.push({...r,data:a})}else e(r)&&t.push(r)}),t}let Du=1;function Mu(n){return Wi(n,e=>({...e,id:e.id||Du++}))}const Au={};function Tu(n){return Au[n]}var Pu=I("<i></i>"),Ru=I('<span class="wx-value svelte-xfznf6"> </span>'),Lu=I('<span class="wx-subtext svelte-xfznf6"> </span>'),Fu=I('<i class="wx-sub-icon wxi-angle-right svelte-xfznf6"></i>'),Ou=I("<div><!> <!> <!> <!></div>");function zu(n,e){ne(e,!0);let t=S(e,"showSub",15,!1),r=S(e,"activeItem",15,null);function a(){t(e.item.data?e.item.id:!1),r(this)}var i=Ou();i.__click=function(...v){e.onclick?.apply(this,v)};var s=C(i);R(s,()=>e.item.icon,v=>{var u=Pu();F(()=>we(u,`wx-icon ${e.item.icon??""} svelte-xfznf6`)),g(v,u)});var l=U(s,2);R(l,()=>e.item.type,v=>{var u=$();const h=O(()=>Tu(e.item.type));var _=G(u);Et(_,()=>o(h),(f,m)=>{m(f,{get item(){return e.item}})}),g(v,u)},v=>{var u=Ru(),h=C(u);F(()=>ee(h,e.item.text)),g(v,u)});var d=U(l,2);R(d,()=>e.item.subtext,v=>{var u=Lu(),h=C(u);F(()=>ee(h,e.item.subtext)),g(v,u)});var c=U(d,2);R(c,()=>e.item.data,v=>{var u=Fu();g(v,u)}),F(()=>{we(i,`wx-item ${(e.item.css||"")??""} svelte-xfznf6`),J(i,"data-id",e.item.id)}),qe("mouseenter",i,a),g(n,i),re()}ge(["click"]);var Bu=I('<div class="wx-separator svelte-1tqohog"></div>'),Nu=I("<!> <!>",1),Hu=I('<div data-wx-menu="true"></div>');function Jr(n,e){ne(e,!0);let t=S(e,"left",3,0),r=S(e,"top",3,0),a=S(e,"at",3,"bottom"),i=S(e,"parent",3,null),s=S(e,"mount",3,null),l=S(e,"context",3,null),d=S(e,"css",3,""),c=ae(-1e4),v=ae(-1e4),u=ae(20),h=ae(void 0),_=ae(void 0),f=ae(!1),m=ae(null);function w(){const E=Gs(o(_),i(),a(),t(),r());E&&(B(c,Q(E.x)),B(v,Q(E.y)),B(u,Q(E.z)),B(h,Q(E.width)))}s()&&s()(w),vt(w);function k(){B(f,!1)}function b(){e.onclick&&e.onclick({action:null})}const x=O(()=>Mu(e.options));nt(()=>{w(i())});var y=Hu();Se(y,21,()=>o(x),E=>E.id,(E,p)=>{var P=Nu(),A=G(P);R(A,()=>o(p).type==="separator",V=>{var W=Bu();g(V,W)},V=>{zu(V,{get item(){return o(p)},get showSub(){return o(f)},set showSub(W){B(f,Q(W))},get activeItem(){return o(m)},set activeItem(W){B(m,Q(W))},onclick:W=>{if(!o(p).data&&!W.defaultPrevented){const Z={context:l(),action:o(p),event:W};o(p).handler&&o(p).handler(Z),e.onclick&&e.onclick(Z),W.stopPropagation()}}})});var N=U(A,2);R(N,()=>o(p).data&&o(f)===o(p).id,V=>{Jr(V,{get css(){return d()},get options(){return o(p).data},at:"right-overlap",get parent(){return o(m)},get context(){return l()},get onclick(){return e.onclick}})}),g(E,P)}),Be(y,(E,p)=>ci(E,p),()=>({callback:b,modal:!0})),Te(y,E=>B(_,E),()=>o(_)),F(()=>{we(y,`wx-menu ${d()??""} svelte-1tqohog`),J(y,"style",`position:absolute;top:${o(v)??""}px;left:${o(c)??""}px;width:${o(h)??""};z-index:${o(u)??""}`)}),qe("mouseleave",y,k),g(n,y),re()}var qu=I('<span data-menu-ignore="true"><!></span>'),Uu=I("<!> <!>",1);function Qn(n,e){ne(e,!0);let t=S(e,"at",3,"bottom"),r=S(e,"resolver",3,null),a=S(e,"dataKey",3,"contextId"),i=S(e,"filter",3,null),s=S(e,"css",3,"");var l=O(()=>et(d)!==null&&i()?ji(e.options,b=>i()(b,et(d))):e.options),d=ae(null),c=ae(null);let v=ae(0),u=ae(0);function h(b){B(c,null),e.onclick&&e.onclick(b)}function _(b,x){let y=null;for(;b&&b.dataset&&!y;)y=b.dataset[x],b=b.parentNode;return y?Er(y):null}function f(b,x){if(!b){B(c,null);return}if(b.defaultPrevented)return;const y=b.target;y&&y.dataset&&y.dataset.menuIgnore||(B(v,b.clientX+1),B(u,b.clientY+1),B(d,Q(typeof x<"u"?x:_(y,a()))),!(r()&&(B(d,Q(r()(et(d),b))),!et(d)))&&(B(c,Q(y)),b.preventDefault()))}var m=Uu(),w=G(m);R(w,()=>e.children,b=>{var x=qu();x.__click=f;var y=C(x);Ie(y,()=>e.children??Ee),g(b,x)});var k=U(w,2);return R(k,()=>et(c),b=>{Lr(b,{children:(y,E)=>{let p=()=>E?.().mount;var P=$(),A=G(P);Ya(A,()=>et(c),N=>{Jr(N,{get css(){return s()},get at(){return t()},get top(){return o(u)},get left(){return o(v)},get mount(){return p()},get parent(){return et(c)},get context(){return et(d)},onclick:h,get options(){return et(l)}})}),g(y,P)},$$slots:{default:!0}})}),g(n,m),re({show:f})}ge(["click"]),ge(["click"]);var Yu=I('<span data-menu-ignore="true"><!></span> <!>',1);function Ku(n,e){ne(e,!0);let t=S(e,"at",3,"bottom"),r=S(e,"css",3,"");const a=h=>{B(i,Q(h.target)),h.preventDefault()};var i=ae(null);function s(h){B(i,null),e.onclick&&e.onclick(h)}function l(h){let _=h.target;for(;!_.dataset.menuIgnore;)B(i,Q(_)),_=_.parentNode}var d=Yu(),c=G(d);c.__click=l;var v=C(c);Ie(v,()=>e.children??Ee);var u=U(c,2);return R(u,()=>et(i),h=>{Lr(h,{children:(f,m)=>{let w=()=>m?.().mount;var k=$(),b=G(k);Ya(b,()=>et(i),x=>{Jr(x,{get css(){return r()},get at(){return t()},get mount(){return w()},get parent(){return et(i)},get options(){return e.options},onclick:s})}),g(f,k)},$$slots:{default:!0}})}),g(n,d),re({handler:a})}ge(["click"]),ge(["contextmenu"]);var Vu=I('<div class="wx-list-wrapper svelte-jco5m0" data-id="virtual-content"><div class="wx-content svelte-jco5m0"><!></div></div>');function Gu(n,e){ne(e,!0);const t=Fe(),r=()=>ce(_,"$cardHeight",t),a=()=>ce(h,"$rows",t),i=()=>ce(u,"$columns",t),s=()=>ce(v,"$_cardsMap",t),l=()=>ce(f,"$cards",t),d=()=>ce(m,"$columnKey",t),c=me("wx-kanban-store"),{_cardsMap:v,columns:u,rows:h,cardHeight:_,cards:f,columnKey:m,_scroll:w}=c.getReactiveState(),k=10,b=O(()=>r()+k),x=O(()=>o(b)*2);let y=ae(void 0),E=ae(0),p=ae(Q({})),P=ae(0),A=ae(1),N=ae(0),V=ae(0);function W(){const T={};return B(E,Q(a().reduce((z,K)=>{if(K.collapsed)return z;const j=i().reduce((te,ie)=>{const ve=ze(ie.id,K.id),X=s()[ve].length;return X>te&&(te=X),te},0);return T[K.id]={id:K.id,maxCardsCount:j,minIndex:z,maxIndex:z+j,startIndex:0,endIndex:0,visible:!0},z+j},0))),L(),B(N,o(P)*o(b)),B(V,(o(E)-o(A))*o(b)),T}async function Z(T){if(o(y).querySelector(`[data-drag-item="${T}"]`))return;const K=l().find(X=>se(X.id,T)),j=Jn(K,d()),te=s()[j].findIndex(X=>se(X.id,T)),ie=i().findIndex(X=>X.id==j),ve=parseFloat(getComputedStyle(o(y)).getPropertyValue("--wx-kanban-column-width"))||300;return te>-1?(await Ft(),o(y).scrollTop=te*o(b),o(y).scrollLeft=ve*ie,!0):!1}function L(){const T=o(y).scrollTop-o(x),z=Math.floor(T<0?0:T/o(b)),K=z+Math.floor((o(y).offsetHeight+o(x)*2)/o(b));if(K>=o(E)){B(P,Q(z)),B(A,Q(o(E)));return}B(P,Q(z)),B(A,K)}function D(T,z,K){const j={};a().forEach(te=>{const ie=T[te.id]||{...o(p)[te.id]},ve=z-ie.minIndex,X=ve+(K-z);ie.startIndex=ve<0?0:ve,ie.endIndex=X>ie.maxIndex?ie.maxIndex:X,ie.visible=ve<=ie.maxIndex&&X>=0,te.collapsed&&(ie.visible=!0),j[te.id]=ie}),B(p,Q(j))}function M(){L()}nt(()=>{a(),o(P),o(A),s()&&be(()=>{const T=W();D(T,o(P),o(A))})}),w.subscribe(T=>{o(y)&&T?.to==="card"&&T.id&&Z(T.id).then(z=>{z&&c.exec("scroll",null)})});var q=Vu(),Y=C(q),H=C(Y);Ie(H,()=>e.children??Ee,()=>({startIndex:o(P),endIndex:o(A),byRow:o(p)})),Te(q,T=>B(y,T),()=>o(y)),Be(q,T=>jr(T)),F(()=>J(Y,"style",`padding-top:${o(N)??""}px;padding-bottom:${o(V)??""}px;`)),qe("scroll",q,M),g(n,q),re()}function Wu(n,e){ne(e,!1);const t=me("wx-i18n"),r=t.getGroup("kanban");return ti(),Xa(e,"locale",t),Xa(e,"_",r),re({locale:t,_:r})}var ju=I('<img class="svelte-4yp8c0">'),Ju=I("<div><!></div>");function Qt(n,e){ne(e,!0);let t=S(e,"data",19,()=>({label:"",avatar:"",avatarColor:""})),r=S(e,"noTransform",3,!1),a=S(e,"size",3,"normal");const i=O(()=>t().label.split(" ").map(c=>c[0]).join("")),s=O(()=>`${t().avatarColor?`background: ${t().avatarColor};`:""}`);var l=Ju(),d=C(l);R(d,()=>t().avatar,c=>{var v=ju();F(()=>{J(v,"src",t().avatar),J(v,"alt",t().label)}),g(c,v)},c=>{var v=$(),u=G(v);R(u,r,h=>{var _=pe();F(()=>ee(_,t().label)),g(h,_)},h=>{var _=pe();F(()=>ee(_,o(i))),g(h,_)},!0),g(c,v)}),F(()=>{we(l,`wx-user ${a()??""} svelte-4yp8c0`),J(l,"style",o(s)),he(l,"wx-transform",!t().avatarColor)}),g(n,l),re()}var Zu=I('<div class="wx-menu svelte-gu515o"><!></div>'),Qu=I('<!> <div class="wx-edit-btns svelte-gu515o"><div class="wx-comment-textarea-btn svelte-gu515o"><!></div> <div class="wx-comment-textarea-btn svelte-gu515o"><!></div></div>',1),Xu=I('<pre class="wx-text svelte-gu515o"> </pre>'),$u=I('<div class="wx-comment svelte-gu515o"><div class="wx-comment-icon svelte-gu515o"><!></div> <div class="wx-content svelte-gu515o"><div class="wx-comment-header svelte-gu515o"><div class="wx-name svelte-gu515o"> </div> <!></div> <div class="wx-date svelte-gu515o"> </div> <!></div></div>'),ev=I('<div class="wx-comment-list svelte-gu515o"></div>'),tv=I('<div class="wx-kanban-no-comments svelte-gu515o"> </div>'),nv=I('<div class="wx-new-comment-wrapper svelte-gu515o"><div class="wx-new-comment svelte-gu515o"><div class="wx-comment-icon svelte-gu515o"><!></div> <!></div> <div class="wx-comment-textarea-btn svelte-gu515o"><!> <!></div></div>'),rv=I('<div class="wx-comments svelte-gu515o"><!> <!> <!></div>');function Ji(n,e){ne(e,!0);const t=Fe(),r=()=>ce(_,"$selected",t),a=()=>ce(h,"$currentUser",t);let i=S(e,"comments",7),s=S(e,"users",19,()=>[]),l=S(e,"handleViewChange",3,null);const d=me("wx-kanban-store"),c=me("wx-i18n"),v=c.getGroup("kanban"),{showModal:u}=me("wx-helpers"),{currentUser:h,selected:_}=d.getReactiveState(),f=O(()=>r()?.[0]),m=e.shape.config||{},w=s().reduce((H,T)=>(H[T.id]=T,H),{}),k=m.format||"%M %d %Y %h:%i",b=Mt(k,c.getRaw().calendar);let x=ae("");function y(){o(x)&&d.exec("add-comment",{id:Hn(),cardId:o(f),comment:{text:o(x),date:new Date}}).then(()=>{i(d.getCard(o(f)).comments),B(x,"")})}let E=ae(null),p=ae(null);function P(H){B(E,Q(H.id)),B(p,Q(H.text))}function A(){o(p)&&d.exec("update-comment",{cardId:o(f),id:o(E),comment:{text:o(p)}}).then(()=>{i(d.getCard(o(f)).comments)}),N()}function N(){B(E,null),B(p,null)}function V(H){(m.confirmDeletion??!0?u({message:v("Would you like to delete this comment?")}):Promise.resolve()).then(()=>{d.exec("delete-comment",{cardId:o(f),id:H}).then(()=>{i(d.getCard(o(f)).comments)})}).catch(()=>{})}function W(H){const{context:T,action:z}=H;if(z)switch(z.id){case"edit-comment":P(i().find(K=>K.id==T));break;case"delete-comment":V(T);break}}let Z=ae(null);const L=[{id:"edit-comment",text:v("Edit"),icon:"wxi-edit-outline"},{id:"delete-comment",text:v("Delete"),icon:"wxi-delete-outline"}];var D=rv(),M=C(D);R(M,()=>i().length,H=>{var T=ev();T.__click=function(...z){o(Z).show?.apply(this,z)},Se(T,21,i,z=>z.id,(z,K)=>{var j=$u(),te=C(j),ie=C(te);Qt(ie,{size:"small",get data(){return w[o(K).userId]}});var ve=U(te,2),X=C(ve),oe=C(X),le=C(oe),de=U(oe,2);R(de,()=>o(E)!==o(K).id&&se(o(K).userId,a()),Ae=>{var ke=Zu(),xe=C(ke);De(xe,{css:"wxi-dots-v"}),F(()=>J(ke,"data-menu-id",o(K).id)),g(Ae,ke)});var ue=U(X,2),fe=C(ue);F(()=>ee(fe,b(o(K).date)));var _e=U(ue,2);R(_e,()=>se(o(E),o(K).id),Ae=>{var ke=Qu(),xe=G(ke);Dr(xe,{get value(){return o(p)},set value(ot){B(p,Q(ot))}});var Oe=U(xe,2),Re=C(Oe),Ne=C(Re);Pe(Ne,{type:"secondary",onclick:N,children:(ot,Ke)=>{var st=pe();F(()=>ee(st,v("Cancel"))),g(ot,st)},$$slots:{default:!0}});var Nt=U(Re,2),it=C(Nt);Pe(it,{type:"primary",onclick:A,children:(ot,Ke)=>{var st=pe();F(()=>ee(st,v("Save"))),g(ot,st)},$$slots:{default:!0}}),g(Ae,ke)},Ae=>{var ke=$(),xe=G(ke);R(xe,()=>o(K).html&&m.html,Oe=>{var Re=$(),Ne=G(Re);On(Ne,()=>o(K).html),g(Oe,Re)},Oe=>{var Re=Xu(),Ne=C(Re);F(()=>ee(Ne,o(K).text)),g(Oe,Re)},!0),g(Ae,ke)}),F(()=>{J(j,"data-comment-id",o(K).id),ee(le,w[o(K).userId].label)}),g(z,j)}),g(H,T)},H=>{var T=$(),z=G(T);R(z,()=>!a(),K=>{var j=tv(),te=C(j);F(()=>ee(te,v("No comments yet"))),g(K,j)},null,!0),g(H,T)});var q=U(M,2);Te(Qn(q,{at:"left-bottom",options:L,resolver:H=>H,dataKey:"menuId",onclick:W}),H=>B(Z,Q(H)),()=>o(Z));var Y=U(q,2);R(Y,()=>a()&&!o(E),H=>{var T=nv(),z=C(T),K=C(z),j=C(K);Qt(j,{size:"small",get data(){return w[a()]}});var te=U(K,2),ie=O(()=>v("Add a comment..."));Dr(te,{get value(){return o(x)},set value(de){B(x,Q(de))},get placeholder(){return o(ie)}});var ve=U(z,2),X=C(ve),oe=O(()=>!o(x));Pe(X,{get disabled(){return o(oe)},type:"primary",onclick:y,children:(de,ue)=>{var fe=pe();F(()=>ee(fe,v("Send"))),g(de,fe)},$$slots:{default:!0}});var le=U(X,2);R(le,()=>m.placement==="page"&&e.placement==="modal",de=>{Pe(de,{type:"secondary",onclick:()=>l()("main"),children:(ue,fe)=>{var _e=pe();F(()=>ee(_e,v("Back"))),g(ue,_e)},$$slots:{default:!0}})}),g(H,T)}),g(n,D),re()}ge(["click"]);const av="wx-uploader-api",iv={uploader:{B:"B",KB:"KB",MB:"MB",GB:"GB",TB:"TB",PB:"PB",EB:"EB","Drop files here or":"Drop files here or","select files":"select files"}};function Zi(n,e){Array.from(n.target.files).forEach(r=>e(r))}var ov=I('<input type="file" class="input svelte-15jokro"> <!>',1),sv=I('<div class="dropzone svelte-15jokro"><span> <span class="action svelte-15jokro"> </span></span></div>'),lv=I('<div class="label svelte-15jokro"><input type="file" class="input svelte-15jokro"> <!></div>');function cv(n,e){ne(e,!0);let t=S(e,"data",31,()=>Q([])),r=S(e,"ready",31,()=>Q(new Promise(()=>({})))),a=S(e,"accept",3,""),i=S(e,"multiple",3,!0),s=S(e,"folder",3,!1),l=S(e,"uploadURL",3,""),d=S(e,"apiOnly",3,!1),c=S(e,"disabled",3,!1),v=ae(void 0),u=ae(void 0),h=0,_={},f=me("wx-i18n");f||(f=Wt(iv),bt("wx-i18n",f));const m=me("wx-i18n").getGroup("uploader"),w=(L,D)=>{c()||(D=D||{},L.addEventListener("dragenter",()=>{D.dragEnter&&D.dragEnter(),A()}),L.addEventListener("dragleave",()=>{D.dragEnter&&D.dragLeave(),N()}),L.addEventListener("dragover",M=>M.preventDefault(),!0),L.addEventListener("drop",M=>{M.preventDefault(),_=D,k(M),D.dragEnter&&D.dragLeave()},!0))};vt(()=>{o(v).webkitdirectory=s()});function k(L){Array.from(L.dataTransfer.items).forEach(M=>{const q=M.webkitGetAsEntry();q&&b(q)}),B(u,!1),h=0}function b(L,D){D=D||"",L.isFile?L.file(M=>{x(M)}):L.isDirectory&&L.createReader().readEntries(q=>{q.forEach(Y=>{b(Y,D+Y.name+"/")})})}function x(L){const D={..._,id:Ue(),status:"client",name:L.name,file:L};D.selected&&D.selected(D),e.onchange&&e.onchange(D),i()?t([...t(),D]):t([D]),E(D),o(v).value=""}function y(L){const D=new FormData;D.append("upload",L.file);const M={method:"POST",body:D};return fetch(l(),M).then(q=>q.json()).then(q=>({id:L.id,...q}),()=>({id:L.id,status:"error"})).catch(q=>console.log(q))}function E(L){if(!L)return;const D=typeof l()=="function"?l()(L):y(L);r(D.then(M=>{M.status=M.status||"server",P(L.id,M)}).catch(M=>{P(L.id,{status:"error",error:M})}))}function p(){let L="server";for(let D=0;D<t().length;(D+=1)-1){if(t()[D].status==="client")return"client";t()[D].status==="error"&&(L="error")}return L}function P(L,D){const M=t().findIndex(H=>H.id==L),q=t(t()[M]={...t()[M],...D},!0),Y={...q,status:p()};q&&q.uploaded&&q.uploaded(Y),e.onupload&&e.onupload(Y),q.temp&&t(t().filter(H=>H.id!=L))}function A(){h===0&&B(u,!0),h+=1}function N(){h-=1,h===0&&B(u,!1)}function V(L){_=L||{},o(v).click()}bt(av,{open:V,getState:p,droparea:w});var W=$(),Z=G(W);return R(Z,d,L=>{var D=ov(),M=G(D);M.__change=[Zi,x],Te(M,Y=>B(v,Y),()=>o(v));var q=U(M,2);Ie(q,()=>e.children??Ee),F(()=>{J(M,"accept",a()),M.multiple=i(),M.disabled=c()}),g(L,D)},L=>{var D=lv(),M=C(D);M.__change=[Zi,x],Te(M,Y=>B(v,Y),()=>o(v));var q=U(M,2);R(q,()=>e.children,Y=>{var H=$(),T=G(H);Ie(T,()=>e.children,()=>({open:V})),g(Y,H)},Y=>{var H=sv(),T=C(H),z=C(T);F(()=>ee(z,`${m("Drop files here or")??""}  `));var K=U(z);K.__click=V;var j=C(K);F(()=>ee(j,m("select files"))),g(Y,H)}),Be(D,Y=>w(Y)),F(()=>{he(D,"active",o(u)),he(D,"wx-disabled",c()),J(M,"accept",a()),M.multiple=i(),M.disabled=c()}),g(L,D)}),g(n,W),re({droparea:w,getState:p,open:V})}ge(["change","click"]),ge(["click"]);var dv=I('<div class="wx-thumb svelte-l8op85"></div>'),uv=I('<div class="wx-size"> </div>'),vv=I("<!> <!>",1),fv=I('<div class="wx-hidden svelte-l8op85"><a class="wx-upload-link svelte-l8op85" target="_blank" rel="noreferrer nofollow noopener"><!></a> <!> <!></div>'),hv=I('<div class="wx-row svelte-l8op85"><div class="wx-file-icon svelte-l8op85"><!></div> <div class="wx-name svelte-l8op85"> </div> <!> <div class="wx-controls svelte-l8op85"><!></div></div>'),mv=I('<div class="wx-layout svelte-l8op85"><div class="wx-header svelte-l8op85"><!></div> <div class="wx-list svelte-l8op85"></div></div>');function gv(n,e){ne(e,!0);const t=Fe(),r=()=>ce(e.data,"$data",t),a=me("wx-i18n").getGroup("kanban"),i=["B","KB","MB","GB","TB","PB","EB"];function s(){e.data.set([])}function l(f){e.data.update(m=>m.filter(w=>w.id!==f))}function d(f){let m=0;for(;f>1024;)m+=1,f=f/1024;return Math.round(f*100)/100+" "+a(i[m])}function c(f){const m=f?.url?.split(".").pop(),w=f?.previewURL?.split(".").pop();return Ki(w)||Ki(m)}function v(f){e.data.update(m=>m.map(w=>{if(w.id===f)return{...w,isCover:!0};{const k={...w};return delete k.isCover,k}}))}function u(){e.data.update(f=>f.map(m=>{const w={...m};return delete w.isCover,w}))}var h=$(),_=G(h);R(_,()=>r().length,f=>{var m=mv(),w=C(m),k=C(w);De(k,{css:"wxi-close",onclick:s});var b=U(w,2);Se(b,5,r,x=>x.id,(x,y)=>{var E=hv(),p=C(E),P=C(p);R(P,()=>c(o(y)),L=>{var D=dv();F(()=>J(D,"style",`background-image: url('${(o(y).previewURL||o(y).url)??""}')`)),g(L,D)},L=>{De(L,{css:"wxi-paperclip"})});var A=U(p,2),N=C(A),V=U(A,2);R(V,()=>o(y).size,L=>{var D=uv(),M=C(D);F(()=>ee(M,d(o(y).size))),g(L,D)});var W=U(V,2),Z=C(W);R(Z,()=>o(y).status==="client",L=>{De(L,{css:"wxi-loading wx-spin"})},L=>{var D=$(),M=G(D);R(M,()=>o(y).status==="error",q=>{var Y=vv(),H=G(Y);De(H,{css:"wxi-alert"});var T=U(H,2);De(T,{css:"wxi-delete-outline",onclick:()=>l(o(y).id)}),g(q,Y)},q=>{var Y=$(),H=G(Y);R(H,()=>!o(y).status||o(y).status==="server",T=>{var z=fv(),K=C(z),j=C(K);De(j,{css:"wxi-external"});var te=U(K,2);De(te,{css:"wxi-delete-outline",onclick:()=>l(o(y).id)});var ie=U(te,2);R(ie,()=>c(o(y)),ve=>{var X=$(),oe=G(X);R(oe,()=>!o(y).isCover,le=>{Pe(le,{onclick:()=>v(o(y).id),children:(de,ue)=>{var fe=pe();F(()=>ee(fe,a("Make cover"))),g(de,fe)},$$slots:{default:!0}})},le=>{Pe(le,{onclick:u,children:(de,ue)=>{var fe=pe();F(()=>ee(fe,a("Remove cover"))),g(de,fe)},$$slots:{default:!0}})}),g(ve,X)}),F(()=>{J(K,"href",o(y).url),J(K,"download",o(y).name)}),g(T,z)},null,!0),g(q,Y)},!0),g(L,D)}),F(()=>ee(N,o(y).name)),g(x,E)}),g(f,m)}),g(n,h),re()}var _v=I('<div class="wx-files-control svelte-1vstfbt"><!>  <!></div>');function wv(n,e){ne(e,!0);const t=Fe(),r=()=>ce(a,"$files",t);let a=Nr(null);const i=e.values.subscribe(u=>{a.set(u[e.field.key]||[])});function s(u){e.values.update(h=>{const _=u.filter(f=>f.status!=="error").map(f=>{const m={...f};return delete m.__root,f.file&&(m.size=f.file.size,delete m.file),m});return h[e.field.key]=_,h})}const l=a.subscribe(u=>{u.find(h=>h.status==="client")||s(u)});Sr(()=>{l(),i()});var d=_v(),c=C(d);gv(c,{data:a});var v=U(c,2);cv(v,Ge({get data(){return hs(),r()},set data(u){fs(a,Q(u))}},()=>e.field)),g(n,d),re()}function yv(n,e){B(e,!0)}var xv=I('<!> <div class="wx-buttons svelte-d1z2io"><!> <!> <!></div>',1),bv=I('<div class="wx-layout svelte-d1z2io"><!> <div class="wx-input-icon svelte-d1z2io"><!></div> <!></div>');function pv(n,e){ne(e,!0);let t=S(e,"start",15),r=S(e,"end",15),a=S(e,"id",19,Ue);const i=me("wx-i18n").getGroup("calendar");let s=ae(void 0),l=typeof e.format=="function"?e.format:Mt(e.format,i);function d(b){b.stopPropagation(),B(s,null)}function c(){const b=new Date;t(b),r(b)}function v(){t(null),r(null)}const u=O(()=>t()?l(t())+(r()?` - ${l(r())}`:""):"");let h=ae(void 0);var _=bv();qe("scroll",Rn,d),_.__click=[yv,s];var f=C(_);Kn(f,{get value(){return o(u)},get id(){return a()},readonly:!0,inputStyle:"cursor: pointer; text-overflow: ellipsis; padding-right: 18px;"});var m=U(f,2),w=C(m);De(w,{css:"wxi-calendar"});var k=U(m,2);R(k,()=>o(s),b=>{Lr(b,{get target(){return o(h)},children:(x,y)=>{At(x,{oncancel:d,width:"unset",children:(E,p)=>{var P=xv(),A=G(P);wc(A,{get start(){return t()},set start(L){t(L)},get end(){return r()},set end(L){r(L)},buttons:[]});var N=U(A,2),V=C(N);Pe(V,{type:"link",css:"wx-calendar-btn",onclick:v,children:(L,D)=>{var M=pe("Clear");g(L,M)},$$slots:{default:!0}});var W=U(V,2);Pe(W,{type:"link",css:" wx-calendar-btn",onclick:c,children:(L,D)=>{var M=pe("Today");g(L,M)},$$slots:{default:!0}});var Z=U(W,2);Pe(Z,{type:"primary",css:" wx-calendar-btn",onclick:d,children:(L,D)=>{var M=pe("Done");g(L,M)},$$slots:{default:!0}}),g(E,P)},$$slots:{default:!0}})},$$slots:{default:!0}})}),Te(_,b=>B(h,b),()=>o(h)),g(n,_),re()}ge(["click"]);function kv(n,e){ne(e,!0);let t=S(e,"start",15),r=S(e,"end",15),a=S(e,"id",19,Ue);pv(n,{get start(){return t()},set start(i){t(i)},get end(){return r()},set end(i){r(i)},get id(){return a()},get format(){return e.format}}),re()}function Sv(n,e){e(n.target.value)}var Iv=I('<input type="text" class="wx-title svelte-18nf24j">');function Ev(n,e){ne(e,!0);let t=S(e,"id",19,()=>String(Fs())),r=S(e,"value",15,""),a=S(e,"focus",3,!1),i=S(e,"placeholder",3,""),s=S(e,"readonly",3,!1),l=S(e,"disabled",3,!1);function d(v){a()&&v.focus()}var c=Iv();c.__input=[Sv,r],Be(c,v=>d(v)),F(()=>{J(c,"id",t()),Ot(c,r()),J(c,"placeholder",i()),c.readOnly=s(),c.disabled=l()}),g(n,c),re()}ge(["input"]);function Cv(n,e,t,r){B(e,!0),B(t,null),B(r,null)}var Dv=(n,e,t)=>e(o(t)),Mv=I('<div class="wx-link svelte-1wjxxyz"><div class="wx-link-content"><div class="wx-relates svelte-1wjxxyz"> </div> <div class="wx-task svelte-1wjxxyz"> </div></div> <div class="wx-delete-icon svelte-1wjxxyz"><!></div></div>'),Av=I('<div class="wx-set-link svelte-1wjxxyz"><div class="wx-combos-wrapper svelte-1wjxxyz"><div class="wx-relates-combo svelte-1wjxxyz"><!></div> <div class="wx-tasks-combo svelte-1wjxxyz"><!></div></div> <div class="wx-btns-wrapper svelte-1wjxxyz"><div class="wx-cancel-btn"><!></div> <div class="wx-link-btn svelte-1wjxxyz"><!></div></div></div>'),Tv=I('<div class="wx-add-link svelte-1wjxxyz"><!> <span> </span></div>'),Pv=I("<div><!> <!></div>");function Rv(n,e){ne(e,!0);const t=Fe(),r=()=>ce(d,"$cards",t),a=()=>ce(c,"$links",t),i=me("wx-kanban-store"),s=me("wx-i18n").getGroup("kanban"),{showModal:l}=me("wx-helpers"),{cards:d,links:c}=i.getReactiveState(),v=[{id:1,relation:"relatesTo",source:!1,label:s("Relates to")},{id:2,relation:"requiredFor",source:!0,label:s("Is required for")},{id:3,relation:"requiredFor",source:!1,label:s("Depends on")},{id:4,relation:"duplicate",source:!0,label:s("Duplicates")},{id:5,relation:"duplicate",source:!1,label:s("Is duplicated by")},{id:6,relation:"parent",source:!0,label:s("Is parent for")},{id:7,relation:"parent",source:!1,label:s("Is subtask of")}];let u=ae(null);const h=O(()=>v.find(L=>se(L.id,o(u)))?.relation);let _=ae(null),f=ae(!1);const m=e.shape.config||{},w=O(()=>{if(e.card)return r(),a().filter(L=>se(L.source,e.card.id)&&i.getCard(L.target)||se(L.target,e.card.id)&&i.getCard(L.source)).map(L=>{const D={...L};return D.isSource=se(D.source,e.card.id),D.label=v.find(M=>M.relation===D.relation&&(D.relation==="relatesTo"||D.isSource===M.source)).label,D})}),k=O(()=>{if(!o(w))return!1;let L=r().filter(D=>!se(D.id,e.card.id));return o(h)&&(L=L.filter(D=>!o(w).find(M=>(se(D.id,M.target)&&se(M.source,e.card.id)||se(D.id,M.source)&&se(M.target,e.card.id))&&M.relation===o(h)))),L}),b=O(()=>e.card?.id);nt(()=>{o(b)&&x()});function x(){B(f,!1),B(_,null),B(u,null)}function y(L){const D=L.isSource?"target":"source";return i.getCard(L[D]).label}function E(){if(o(u)&&o(_)){const L=v.find(D=>se(D.id,o(u))).source;i.exec("add-link",{link:{source:L?e.card.id:o(_),target:L?o(_):e.card.id,relation:o(h)}}),x()}}function p(L){(m.confirmDeletion??!0?l({message:s("Would you like to delete this link?")}):Promise.resolve()).then(()=>{i.exec("delete-link",{id:L})}).catch(()=>{})}function P(L){B(u,Q(L.value)),B(_,null)}function A(L){B(_,Q(L.value))}function N(L){const D=L.isSource?"target":"source";i.exec("select-card",{id:L[D]})}var V=Pv(),W=C(V);Se(W,17,()=>o(w),L=>L.id,(L,D)=>{var M=Mv(),q=C(M),Y=C(q),H=C(Y),T=U(Y,2);T.__click=[Dv,N,D];var z=C(T);F(()=>ee(z,y(o(D))));var K=U(q,2),j=C(K);De(j,{css:"wxi-delete-outline",onclick:()=>p(o(D).id)}),F(()=>ee(H,o(D).label)),g(L,M)});var Z=U(W,2);R(Z,()=>o(f),L=>{var D=Av(),M=C(D),q=C(M),Y=C(q),H=O(()=>s("Select a relation"));Mr(Y,{options:v,get value(){return o(u)},get placeholder(){return o(H)},onchange:P,children:(de,ue)=>{let fe=()=>ue?.().option;var _e=pe();F(()=>ee(_e,fe().label)),g(de,_e)},$$slots:{default:!0}});var T=U(q,2),z=C(T),K=O(()=>s("Select a task")),j=O(()=>!o(u));Mr(z,{get options(){return o(k)},get value(){return o(_)},get placeholder(){return o(K)},get disabled(){return o(j)},onchange:A,children:(de,ue)=>{let fe=()=>ue?.().option;var _e=pe();F(()=>ee(_e,fe().label)),g(de,_e)},$$slots:{default:!0}});var te=U(M,2),ie=C(te),ve=C(ie);Pe(ve,{type:"secondary block",onclick:x,children:(le,de)=>{var ue=pe();F(()=>ee(ue,s("Cancel"))),g(le,ue)},$$slots:{default:!0}});var X=U(ie,2),oe=C(X);Pe(oe,{type:"primary block",onclick:E,children:(le,de)=>{var ue=pe();F(()=>ee(ue,s("Link Task"))),g(le,ue)},$$slots:{default:!0}}),g(L,D)},L=>{var D=Tv();D.__click=[Cv,f,_,u];var M=C(D);De(M,{css:"wxi-plus"});var q=U(M,2),Y=C(q);F(()=>ee(Y,s("Add link"))),g(L,D)}),F(()=>we(V,`wx-links wx-${e.fieldPlace??""} svelte-1wjxxyz`)),g(n,V),re()}ge(["click"]);var Lv=I('<div class="wx-color svelte-16wv92v"></div>'),Fv=I('<div class="wx-combo-option svelte-16wv92v"><!> </div>'),Ov=I('<div class="wx-color svelte-16wv92v"></div>'),zv=I('<div class="wx-multiselect-option svelte-16wv92v"><!> <span class="wx-multiselect-label svelte-16wv92v"> </span></div>'),Bv=I('<div class="wx-links svelte-16wv92v"><!></div>'),Nv=I("<div><!></div>");function Qi(n,e){ne(e,!0);const t=Fe(),r=()=>ce(e.values,"$values",t);let a=S(e,"fields",19,()=>[]),i=S(e,"fieldsPlace",3,"right");const s=me("wx-i18n").getGroup("kanban"),l=e.api.getState().cardShape.users?.values;var d=$(),c=G(d);Se(c,17,a,v=>v.id,(v,u)=>{var h=$(),_=G(h);R(_,()=>o(u).type==="text",f=>{var m=O(()=>s(o(u).label));Xe(f,{get label(){return o(m)},position:"top",children:(k,b)=>{let x=()=>b?.().id;Kn(k,Ge({get id(){return x()},get value(){return r()[o(u).key]},set value(y){at(e.values,be(r)[o(u).key]=y,be(r))},focus:!0},()=>o(u).config))},$$slots:{default:!0}})},f=>{var m=$(),w=G(m);R(w,()=>o(u).type==="title",k=>{Xe(k,{children:(x,y)=>{let E=()=>y?.().id;Ev(x,Ge({get id(){return E()},get value(){return r()[o(u).key]},set value(p){at(e.values,be(r)[o(u).key]=p,be(r))},focus:!0},()=>o(u).config))},$$slots:{default:!0}})},k=>{var b=$(),x=G(b);R(x,()=>o(u).type==="textarea",y=>{var E=O(()=>s(o(u).label));Xe(y,{get label(){return o(E)},position:"top",children:(P,A)=>{let N=()=>A?.().id;var V=O(()=>i()==="right");Dr(P,Ge({get id(){return N()},get value(){return r()[o(u).key]},set value(W){at(e.values,be(r)[o(u).key]=W,be(r))}},()=>o(u).config,{get resize(){return o(V)}}))},$$slots:{default:!0}})},y=>{var E=$(),p=G(E);R(p,()=>o(u).type==="progress",P=>{var A=O(()=>`${s(o(u).label)} ${r()[o(u).key]}%`);Xe(P,{get label(){return o(A)},position:"top",children:(V,W)=>{let Z=()=>W?.().id;zc(V,Ge({get id(){return Z()},get value(){return r()[o(u).key]},set value(L){at(e.values,be(r)[o(u).key]=L,be(r))}},()=>o(u).config))},$$slots:{default:!0}})},P=>{var A=$(),N=G(A);R(N,()=>o(u).type==="combo",V=>{var W=O(()=>s(o(u).label));Xe(V,{get label(){return o(W)},position:"top",children:(L,D)=>{let M=()=>D?.().id;Mr(L,Ge({get id(){return M()},get options(){return o(u).values},get value(){return r()[o(u).key]},set value(Y){at(e.values,be(r)[o(u).key]=Y,be(r))}},()=>o(u).config,{children:(Y,H)=>{let T=()=>H?.().option;var z=Fv(),K=C(z);R(K,()=>T().color,te=>{var ie=Lv();F(()=>J(ie,"style",`background:${T().color??""}`)),g(te,ie)},te=>{var ie=$(),ve=G(ie);R(ve,()=>T().avatar||T().avatarColor,X=>{Qt(X,{get data(){return T()}})},null,!0),g(te,ie)});var j=U(K);F(()=>ee(j,` ${T().label??""}`)),g(Y,z)},$$slots:{default:!0}}))},$$slots:{default:!0}})},V=>{var W=$(),Z=G(W);R(Z,()=>o(u).type==="select",L=>{var D=O(()=>s(o(u).label));Xe(L,{get label(){return o(D)},position:"top",children:(q,Y)=>{let H=()=>Y?.().id;xi(q,Ge({get id(){return H()},get value(){return r()[o(u).key]},set value(T){at(e.values,be(r)[o(u).key]=T,be(r))},get options(){return o(u).values}},()=>o(u).config))},$$slots:{default:!0}})},L=>{var D=$(),M=G(D);R(M,()=>o(u).type==="color",q=>{var Y=O(()=>s(o(u).label));Xe(q,{get label(){return o(Y)},position:"top",children:(T,z)=>{let K=()=>z?.().id;yl(T,Ge({get id(){return K()},get value(){return r()[o(u).key]},set value(j){at(e.values,be(r)[o(u).key]=j,be(r))},get colors(){return o(u).values}},()=>o(u).config))},$$slots:{default:!0}})},q=>{var Y=$(),H=G(Y);R(H,()=>o(u).type==="multiselect",T=>{var z=O(()=>s(o(u).label));Xe(T,{get label(){return o(z)},position:"top",children:(K,j)=>{Ec(K,Ge({get value(){return r()[o(u).key]},set value(ie){at(e.values,be(r)[o(u).key]=ie,be(r))},checkboxes:!0,get options(){return o(u).values}},()=>o(u).config,{children:(ie,ve)=>{let X=()=>ve?.().option;var oe=zv(),le=C(oe);R(le,()=>X().color,fe=>{var _e=Ov();F(()=>J(_e,"style",`background:${X().color??""}`)),g(fe,_e)},fe=>{var _e=$(),Ae=G(_e);R(Ae,()=>X().avatar||X().avatarColor,ke=>{Qt(ke,{get data(){return X()}})},null,!0),g(fe,_e)});var de=U(le,2),ue=C(de);F(()=>ee(ue,X().label)),g(ie,oe)},$$slots:{default:!0}}))},$$slots:{default:!0}})},T=>{var z=$(),K=G(z);R(K,()=>o(u).type==="date",j=>{var te=O(()=>s(o(u).label));Xe(j,{get label(){return o(te)},position:"top",children:(ve,X)=>{let oe=()=>X?.().id;var le=O(()=>o(u).format||"%m/%d/%Y");gc(ve,Ge({get id(){return oe()},get format(){return o(le)},get value(){return r()[o(u).key]},set value(de){at(e.values,be(r)[o(u).key]=de,be(r))}},()=>o(u).config))},$$slots:{default:!0}})},j=>{var te=$(),ie=G(te);R(ie,()=>o(u).type==="dateRange",ve=>{var X=O(()=>s(o(u).label));Xe(ve,{get label(){return o(X)},position:"top",children:(le,de)=>{let ue=()=>de?.().id;var fe=O(()=>o(u).format||"%m/%d/%Y");kv(le,{get id(){return ue()},get format(){return o(fe)},get start(){return r()[o(u).key.start]},set start(_e){at(e.values,be(r)[o(u).key.start]=_e,be(r))},get end(){return r()[o(u).key.end]},set end(_e){at(e.values,be(r)[o(u).key.end]=_e,be(r))}})},$$slots:{default:!0}})},ve=>{var X=$(),oe=G(X);R(oe,()=>o(u).type==="files",le=>{var de=O(()=>s(o(u).label));Xe(le,{get label(){return o(de)},position:"top",children:(ue,fe)=>{wv(ue,{get field(){return o(u)},get values(){return e.values}})},$$slots:{default:!0}})},le=>{var de=$(),ue=G(de);R(ue,()=>o(u).type==="links",fe=>{var _e=Bv(),Ae=C(_e),ke=O(()=>s(o(u).label));Xe(Ae,{get label(){return o(ke)},position:"top",children:(xe,Oe)=>{var Re=O(()=>a().find(Ne=>Ne.type==="links"));Rv(xe,{get fieldPlace(){return i()},get shape(){return o(Re)},get card(){return e.editCard}})},$$slots:{default:!0}}),g(fe,_e)},fe=>{var _e=$(),Ae=G(_e);R(Ae,()=>o(u).type==="comments"&&(o(u).values?.length||l?.length),ke=>{var xe=Nv(),Oe=C(xe),Re=O(()=>s(o(u).label));Xe(Oe,{get label(){return o(Re)},position:"top",children:(Ne,Nt)=>{var it=$(),ot=G(it);R(ot,()=>o(u).config?.placement==="editor",Ke=>{var st=O(()=>o(u).values||l);Ji(Ke,{get comments(){return r()[o(u).key]},get placement(){return e.placement},get users(){return o(st)},get shape(){return o(u)}})},Ke=>{Pe(Ke,{type:"primary block",onclick:()=>e.handleViewChange("comments"),children:(st,co)=>{var uo=pe();F(()=>ee(uo,`${s("Show comments")??""}
						(${(e.editCard.comments?.length||0)??""})`)),g(st,uo)},$$slots:{default:!0}})}),g(Ne,it)},$$slots:{default:!0}}),F(()=>we(xe,`wx-card-comments ${i()??""} svelte-16wv92v`)),g(ke,xe)},null,!0),g(fe,_e)},!0),g(le,de)},!0),g(ve,X)},!0),g(j,te)},!0),g(T,z)},!0),g(q,Y)},!0),g(L,D)},!0),g(V,W)},!0),g(P,A)},!0),g(y,E)},!0),g(k,b)},!0),g(f,m)}),g(v,h)}),g(n,d),re()}var Hv=I('<div class="wx-multiselect-option svelte-1ktufvm"><!> <span class="wx-multiselect-label svelte-1ktufvm"> </span></div>'),qv=I('<div class="wx-kanban-voters-list svelte-1ktufvm"></div>'),Uv=I('<div class="wx-kanban-editor-voting svelte-1ktufvm"><div class="wx-kanban-editor-vote svelte-1ktufvm"><!></div> <!></div>');function Yv(n,e){ne(e,!0);let t=S(e,"value",7);const r=me("wx-kanban-store");let a=ae(!1);const i=O(()=>t()?.includes(e.currentUser)),s=O(()=>t()?.length&&e.users.length?t().map(h=>e.users.find(_=>_.id==h)):[]);function l(){o(i)?(r.exec("delete-vote",{cardId:e.cardId}),t(t().filter(h=>h!==e.currentUser))):(r.exec("add-vote",{cardId:e.cardId}),t([...t()||[],e.currentUser]))}var d=Uv(),c=C(d),v=C(c);Pe(v,{onclick:l,icon:"wxi-like",children:(h,_)=>{var f=pe();F(()=>ee(f,t()?.length||0)),g(h,f)},$$slots:{default:!0}});var u=U(c,2);R(u,()=>o(a)&&o(s)?.length,h=>{At(h,{width:"230px",oncancel:()=>B(a,!1),align:"end",children:(_,f)=>{var m=qv();Se(m,21,()=>o(s),w=>w.id,(w,k)=>{var b=Hv(),x=C(b);Qt(x,{size:"small",get data(){return o(k)}});var y=U(x,2),E=C(y);F(()=>ee(E,o(k).label)),g(w,b)}),g(_,m)},$$slots:{default:!0}})}),F(()=>he(c,"wx-kanban-editor-voted",o(i))),qe("mouseenter",c,()=>B(a,!0)),qe("mouseleave",c,()=>B(a,!1)),g(n,d),re()}var Kv=I('<div class="wx-editor-save-button svelte-br54ec"><!></div>'),Vv=I("<!> <!>",1),Gv=I('<div class="wx-kanban-editor-left svelte-br54ec"><!></div>'),Wv=I('<div class="wx-editor-manual-save svelte-br54ec"><div class="wx-editor-cancel-button svelte-br54ec"><!></div> <div class="wx-editor-save-button svelte-br54ec"><!></div></div>'),jv=I('<div class="wx-kanban-editor-main svelte-br54ec"><!> <div class="wx-kanban-editor-right svelte-br54ec"><!></div></div> <!>',1),Jv=I('<div class="wx-editor-controls-wrapper svelte-br54ec"><!> <div><!></div></div> <!>',1),Zv=I("<!> <div><!></div>",1);function Zr(n,e){ne(e,!0);const t=Fe(),r=()=>ce(_,"$_edit",t),a=()=>ce(h,"$cards",t),i=()=>ce(w,"$values",t),s=()=>ce(f,"$cardShape",t),l=()=>ce(m,"$currentUser",t);let d=S(e,"shape",3,null);const c=O(()=>({...jn,...e.config})),v=O(()=>o(c).placement==="modal"),u=O(()=>o(c).placement),{cards:h,_edit:_,cardShape:f,currentUser:m}=e.api.getReactiveState(),w=kd(k({}),()=>{o(c).autoSave&&E()},{debounce:o(c).debounce});function k(D){const M={...D};return d().forEach(q=>{typeof M[q.key]>"u"&&(q.type==="files"||q.type==="comments"?M[q.key]=[]:q.type==="date"?M[q.key]=null:q.type==="progress"?M[q.key]=0:M[q.key]="")}),M}let b=ae(void 0);e.api.on("start-drag-card",D=>{B(b,Q(D.id))}),e.api.on("end-drag-card",()=>{B(b,null)});const x=O(()=>!o(b)&&r()&&a()?.find(D=>D.id===r()?.cardId));nt(()=>{w.reset(k(o(x)))});function y(){e.api.exec("set-edit",null)}function E(){e.api.exec("update-card",{card:{...i()},id:i().id})}function p(){E(),o(u)==="modal"&&y()}let P=ae(void 0),A=ae("main");function N(D){B(A,Q(D))}const V=O(()=>o(u)==="sidebar"?[]:d().filter(D=>D.modalSection==="left")),W=O(()=>o(u)==="sidebar"?[...d()]:d().filter(D=>D.modalSection!=="left")),Z=O(()=>{const D=e.api?.getState().cardShape.users;return D?.values?.length?D.values:[]}),L=O(()=>o(v)&&!o(V).length);Tt(n,{words:{...Nn,...Bn},optional:!0,children:(D,M)=>{var q=Zv(),Y=G(q);Wu(Y,{get _(){return o(P)},set _(z){B(P,Q(z))}});var H=U(Y,2);H.__click=function(...z){e.onclick?.apply(this,z)};var T=C(H);R(T,()=>o(P)&&o(x),z=>{var K=Jv(),j=G(K),te=C(j);R(te,()=>o(A)==="main"&&!o(c).autoSave&&!o(v),oe=>{var le=Kv(),de=C(le);Pe(de,{type:"primary",css:"wx-editor-btn",onclick:p,children:(ue,fe)=>{var _e=pe();F(()=>ee(_e,o(P)("Save"))),g(ue,_e)},$$slots:{default:!0}}),g(oe,le)});var ie=U(te,2),ve=C(ie);R(ve,()=>o(A)==="main",oe=>{var le=Vv(),de=G(le);R(de,()=>s().votes?.show,fe=>{Yv(fe,{get cardId(){return o(x).id},get users(){return o(Z)},get value(){return i().votes},get currentUser(){return l()}})});var ue=U(de,2);De(ue,{css:"wxi-close",onclick:y}),g(oe,le)},oe=>{Pe(oe,{onclick:()=>N("main"),children:(le,de)=>{var ue=pe();F(()=>ee(ue,o(P)("Back"))),g(le,ue)},$$slots:{default:!0}})});var X=U(j,2);R(X,()=>o(A)==="main",oe=>{var le=jv(),de=G(le),ue=C(de);R(ue,()=>o(v)&&o(V).length,ke=>{var xe=Gv(),Oe=C(xe);Qi(Oe,{get api(){return e.api},get fields(){return o(V)},fieldsPlace:"left",get placement(){return o(u)},values:w,get editCard(){return o(x)},handleViewChange:N}),g(ke,xe)});var fe=U(ue,2),_e=C(fe);Qi(_e,{get api(){return e.api},get fields(){return o(W)},fieldsPlace:"right",get placement(){return o(u)},values:w,get editCard(){return o(x)},handleViewChange:N});var Ae=U(de,2);R(Ae,()=>o(v)&&o(A)==="main"&&!o(c).autoSave,ke=>{var xe=Wv(),Oe=C(xe),Re=C(Oe);Pe(Re,{css:"wx-editor-btn",onclick:y,children:(it,ot)=>{var Ke=pe();F(()=>ee(Ke,o(P)("Cancel"))),g(it,Ke)},$$slots:{default:!0}});var Ne=U(Oe,2),Nt=C(Ne);Pe(Nt,{type:"primary",css:"wx-editor-btn",onclick:p,children:(it,ot)=>{var Ke=pe();F(()=>ee(Ke,o(P)("Save"))),g(it,Ke)},$$slots:{default:!0}}),g(ke,xe)}),g(oe,le)},oe=>{var le=$(),de=G(le);R(de,()=>o(A)==="comments",ue=>{var fe=O(()=>d().find(_e=>_e.type==="comments"));Ji(ue,{get comments(){return i().comments},get users(){return o(Z)},get shape(){return o(fe)},get placement(){return o(u)},handleViewChange:N})},null,!0),g(oe,le)}),F(()=>we(ie,`wx-editor-controls${(o(v)&&o(A)==="comments"?" comments":"")??""} svelte-br54ec`)),g(z,K)}),F(()=>{we(H,`wx-editor ${o(u)??""} ${o(A)??""} svelte-br54ec`),J(H,"data-kanban-id",Ye.editor),J(H,"data-wx-widget",Ye.editor),he(H,"wx-modal-narrow",o(L)),he(H,"wx-editor-open",o(x))}),g(D,q)},$$slots:{default:!0}}),re()}ge(["click"]);var Qv=I('<div class="wx-editor-modal svelte-10gkwu4"><!></div>'),Xv=I('<div class="wx-sidebar svelte-10gkwu4"><!></div>');function $v(n,e){ne(e,!0);const t=Fe(),r=()=>ce(l,"$_edit",t),a=()=>ce(d,"$editor",t),i=()=>ce(c,"$editorShape",t),s=me("wx-kanban-store"),{_edit:l,editor:d,editorShape:c}=s.getReactiveState(),v=O(()=>s.getCard(r()?.cardId)),u=O(()=>({...jn,...a()}));var h=$(),_=G(h);R(_,()=>o(u).placement==="modal",f=>{var m=$(),w=G(m);R(w,()=>o(v),k=>{var b=Qv(),x=C(b);nd(x,{children:(y,E)=>{Zr(y,{api:s,get config(){return o(u)},get shape(){return i()}})},$$slots:{default:!0}}),F(()=>J(b,"data-kanban-id",Ye.editor)),g(k,b)}),g(f,m)},f=>{var m=Xv(),w=C(m);Zr(w,{api:s,get config(){return o(u)},get shape(){return i()}}),F(()=>{J(m,"data-kanban-id",Ye.editor),he(m,"wx-sidebar-open",!!o(v))}),g(f,m)}),g(n,h),re()}var ef=(n,e,t)=>e(o(t).id),tf=I("<div></div>");function Xi(n,e){ne(e,!1);const t=Fe(),r=()=>ce(l,"$columns",t),a=()=>ce(i,"$columnOffsets",t),{columnOffsets:i}=Gi(),s=me("wx-kanban-store"),{columns:l}=s.getReactiveState();function d(u){s.exec("update-column",{id:u,column:{collapsed:!1}})}ti();var c=$(),v=G(c);Se(v,1,r,u=>u.id,(u,h)=>{var _=$(),f=G(_);R(f,()=>o(h).collapsed,m=>{var w=tf();const k=ua(()=>`left:${a().get(o(h).id)??""}px;`);w.__click=[ef,d,h],F(()=>{we(w,`wx-collapsed-column${(o(h).css?" "+o(h).css:"")??""} svelte-vzvzkt`),J(w,"style",o(k))}),g(m,w)}),g(u,_)}),g(n,c),re()}ge(["click"]);var nf=I('<input type="text" class="wx-input svelte-9z9yku">'),rf=I('<div class="wx-menu svelte-9z9yku"><!></div>'),af=I('<div class="wx-label-icon svelte-9z9yku"><!></div> <div class="wx-label-text svelte-9z9yku"><!></div> <!>',1),of=I('<div class="wx-content svelte-9z9yku"><!></div>'),sf=I("<div><div><!> <div></div></div> <!></div>");function $i(n,e){ne(e,!0);const t=Fe(),r=()=>ce(x,"$rowKey",t),a=()=>ce(f,"$readonly",t),i=()=>ce(m,"$rows",t),s=()=>ce(w,"$rowShape",t),l=()=>ce(b,"$columns",t),d=()=>ce(k,"$_cardsMap",t);let c=S(e,"row",19,()=>({id:"default",label:"default",collapsed:!1}));const v=me("wx-kanban-store"),u=me("wx-i18n").getGroup("kanban"),{showModal:h}=me("wx-helpers");function _(){v.exec("update-row",{id:c().id,row:{collapsed:!c().collapsed}})}const{readonly:f,rows:m,rowShape:w,_cardsMap:k,columns:b,rowKey:x}=v.getReactiveState(),y=O(()=>!!r()),E=O(()=>a().edit);let p=ae(!1),P=null;const A=O(()=>i().findIndex(X=>X.id===c().id));function N(){o(p)&&P?.trim()&&v.exec("update-row",{id:c().id,row:{label:P}}),B(p,!1),P=null}function V(){o(E)&&B(p,!0)}function W(X){P=X.target.value}function Z(X){X.charCode===13&&N()}function L(X){X.focus()}function D(X){const oe=X==="up"?o(A)-1:o(A)+2,le=i()[oe]?.id;v.exec("move-row",{id:c().id,before:le})}function M(X){const oe=X.action;if(oe){if(oe.onClick){oe.onClick({id:oe.id,item:oe,row:c()});return}switch(oe.id){case"set-edit":V();break;case"delete-row":{(s().confirmDeletion??!0?h({message:u("Would you like to delete this row?")}):Promise.resolve()).then(()=>{v.exec("delete-row",{id:c().id})}).catch(()=>{});break}case"move-row:up":D("up");break;case"move-row:down":D("down");break}}}const q=(X,oe,le,de)=>{const ue=de.menu.items({rows:le,rowIndex:oe,row:X});return!ue||!ue.length?null:ue.map(fe=>Zn(fe,u))},Y=O(()=>q(c(),o(A),i(),s())),H=O(()=>s().menu.show&&!!o(Y)&&o(E)&&!o(p));function T(X,oe,le,de){let ue="wx-row";if(X.collapsed&&(ue+=" wx-collapsed"),X.css&&(ue+=" "+X.css),oe&&oe.css){let fe=[];le.forEach(_e=>fe=fe.concat(de[ze(_e.id,X.id)])),ue+=" "+oe.css(X,fe)}return ue}const z=O(()=>T(c(),s(),l(),d()));var K=sf(),j=C(K),te=C(j);R(te,()=>o(y),X=>{var oe=af(),le=G(oe),de=C(le),ue=O(()=>`wxi-angle-${c().collapsed?"right":"down"}`);De(de,{get css(){return o(ue)},onclick:_});var fe=U(le,2);fe.__dblclick=V;var _e=C(fe);R(_e,()=>o(p),ke=>{var xe=nf();xe.__input=W,Be(xe,Oe=>L(Oe)),F(()=>Ot(xe,c().label)),qe("keypress",xe,Z),qe("blur",xe,N),g(ke,xe)},ke=>{var xe=pe();F(()=>ee(xe,c().label)),g(ke,xe)});var Ae=U(fe,2);R(Ae,()=>o(H),ke=>{Qn(ke,{get options(){return o(Y)},onclick:M,children:(xe,Oe)=>{var Re=rf(),Ne=C(Re);De(Ne,{css:"wxi-dots-h"}),g(xe,Re)},$$slots:{default:!0}})}),g(X,oe)});var ie=U(te,2),ve=U(j,2);R(ve,()=>!c().collapsed,X=>{var oe=of(),le=C(oe);Ie(le,()=>e.children??Ee),g(X,oe)}),F(()=>{we(K,`${o(z)??""} svelte-9z9yku`),he(K,"wx-collapsed",c().collapsed),we(j,`wx-label ${(o(y)?"collapsable":"")??""} svelte-9z9yku`),J(j,"data-row-header",c().id),we(ie,`wx-label-line ${(o(y)?"collapsable":"")??""} svelte-9z9yku`)}),g(n,K),re()}ge(["dblclick","input"]);var lf=I('<div class="wx-label svelte-fhl0ry"> </div>'),cf=I('<div class="wx-value svelte-fhl0ry"> </div>'),df=I('<div class="wx-layout svelte-fhl0ry"><!> <div class="wx-wrap svelte-fhl0ry"><div class="wx-progress svelte-fhl0ry"></div> <!></div></div>');function uf(n,e){let t=S(e,"label",3,""),r=S(e,"min",3,0),a=S(e,"max",3,100),i=S(e,"value",3,0),s=S(e,"showValue",3,!0);const l=O(()=>Math.round((i()-r())/(a()-r())*100)+"%"),d=O(()=>`background: linear-gradient(90deg, var(--wx-color-primary) 0% ${o(l)}, var(--wx-kanban-progress-inactive-color) ${o(l)} 100%);`);var c=df(),v=C(c);R(v,t,f=>{var m=lf(),w=C(m);F(()=>ee(w,t())),g(f,m)});var u=U(v,2),h=C(u),_=U(h,2);R(_,s,f=>{var m=cf(),w=C(m);F(()=>ee(w,o(l))),g(f,m)}),F(()=>J(h,"style",o(d))),g(n,c)}var vf=I('<div class="wx-users svelte-fncexv"></div>'),ff=I('<span class="wx-date-value svelte-fncexv"> </span>'),hf=I('<span class="wx-date-value svelte-fncexv"> </span>'),mf=I('<div class="wx-date svelte-fncexv"><!> <!> <!> <!></div>'),gf=I('<span class="wx-item-value svelte-fncexv"> </span>'),_f=I('<div class="wx-votes svelte-fncexv"><!></div>'),wf=I('<span class="wx-item-value svelte-fncexv"> </span>'),yf=I('<div class="wx-comments svelte-fncexv"><!></div>'),xf=I('<span class="wx-item-value svelte-fncexv"> </span>'),bf=I('<div class="wx-attached svelte-fncexv"><!></div>'),pf=I('<div class="wx-footer svelte-fncexv"><!> <div class="wx-card-icons svelte-fncexv"><div class="wx-icons-container svelte-fncexv"><!></div> <div class="wx-icons-container svelte-fncexv"><!> <!> <!></div></div></div>');function kf(n,e){ne(e,!0);const t=Fe(),r=()=>ce(o(c),"$currentUser",t),a=me("wx-kanban-store"),i=me("wx-i18n"),s="%M %d";function l(p,P){let A={};const{show:N}=P?.users||{},V=p.users;if(N&&V){const Y=(Array.isArray(V)?V:[V]).reduce((z,K)=>{const j=P.users.values?.find(te=>te.id===K);return j&&z.push(j),z},[]);let H=Y.map(z=>({...z,label:z.label||""})),T=2;e.cardShape.users.maxCount===!1?T=1/0:e.cardShape.users.maxCount&&(T=e.cardShape.users.maxCount),Y.length>T&&(H=H.splice(0,T),H.push({label:`+${Y.length-H.length}`,id:"$total"})),H?.length&&(A.users=H)}const{show:W,format:Z}=P.start_date||{},{show:L,format:D}=P.end_date||{};let{end_date:M,start_date:q}=p;return(W||L)&&(q&&(A.startDate=Mt(Z||s,i.getRaw().calendar)(q)),M&&(A.endDate=Mt(D||s,i.getRaw().calendar)(M))),P?.attached?.show&&p.attached?.length&&(A.attached=p.attached.length),P.comments?.show&&p.comments?.length&&(A.comments=p.comments?.length),P.votes?.show&&(A.votes=p.votes?.length||0),A}const d=O(()=>l(e.cardFields,e.cardShape)),c=O(()=>a?.getReactiveState().currentUser),v=O(()=>e.cardShape.votes?.clickable);function u(){if(o(v)){const p=e.cardFields.id;e.cardFields.votes?.includes(r())?a.exec("delete-vote",{cardId:p}):a.exec("add-vote",{cardId:p})}}var h=pf();const _=O(()=>!!Object.keys(o(d)).length);F(()=>he(h,"wx-with-content",o(_)));var f=C(h);R(f,()=>o(d).users,p=>{var P=vf();Se(P,21,()=>o(d).users,A=>A.id,(A,N)=>{var V=O(()=>o(N).id==="$total");Qt(A,{get data(){return o(N)},get noTransform(){return o(V)}})}),g(p,P)});var m=U(f,2),w=C(m),k=C(w);R(k,()=>o(d).endDate||o(d).startDate,p=>{var P=mf(),A=C(P);De(A,{css:"wxi-calendar"});var N=U(A,2);R(N,()=>o(d).startDate,Z=>{var L=ff(),D=C(L);F(()=>ee(D,o(d).startDate)),g(Z,L)});var V=U(N,2);R(V,()=>o(d).endDate&&o(d).startDate,Z=>{var L=pe("-");g(Z,L)});var W=U(V,2);R(W,()=>o(d).endDate,Z=>{var L=hf(),D=C(L);F(()=>ee(D,o(d).endDate)),g(Z,L)}),g(p,P)});var b=U(w,2),x=C(b);R(x,()=>o(d).votes||o(d).votes===0&&o(v),p=>{var P=_f();const A=O(()=>e.cardFields.votes?.includes(r()));var N=C(P);De(N,{css:"wxi-like",onclick:u,children:(V,W)=>{var Z=gf(),L=C(Z);F(()=>ee(L,o(d).votes)),g(V,Z)},$$slots:{default:!0}}),F(()=>{J(P,"data-kanban-id",o(v)?"wx-vote-card-button":""),he(P,"wx-kanban-editor-voted",o(A)),he(P,"wx-clickable",o(v))}),g(p,P)});var y=U(x,2);R(y,()=>o(d).comments,p=>{var P=yf(),A=C(P);De(A,{css:"wxi-message",children:(N,V)=>{var W=wf(),Z=C(W);F(()=>ee(Z,o(d).comments)),g(N,W)},$$slots:{default:!0}}),g(p,P)});var E=U(y,2);R(E,()=>o(d).attached,p=>{var P=bf(),A=C(P);De(A,{css:"wxi-paperclip",children:(N,V)=>{var W=xf(),Z=C(W);F(()=>ee(Z,o(d).attached)),g(N,W)},$$slots:{default:!0}}),g(p,P)}),g(n,h),re()}var Sf=I('<div class="wx-field wx-priority svelte-16qucgr"><span class="wx-priority-label svelte-16qucgr"> </span></div>'),If=I('<span class="wx-label"> </span>'),Ef=I('<div><!> <span class="wx-value"> </span></div>'),Cf=I('<div class="wx-card-header svelte-16qucgr"></div>');function Df(n,e){function t(i,s){let l=[];if(s.priority?.show){const c=s.priority.values?.find(v=>v.id===i.priority);c&&l.push({type:"priority",value:c.label,color:c.color})}const d=s.headerFields;if(d){const c=d.reduce((v,u)=>(i[u.key]&&v.push({value:i[u.key],label:u.label,css:u.css}),v),[]);c&&l.push(...c)}return l}const r=O(()=>t(e.cardFields,e.cardShape));var a=Cf();Se(a,21,()=>o(r),rt,(i,s)=>{var l=$(),d=G(l);R(d,()=>o(s).value,c=>{var v=$(),u=G(v);R(u,()=>o(s).type==="priority",h=>{var _=Sf(),f=C(_),m=C(f);F(()=>{J(_,"style",`background:${o(s).color??""}`),ee(m,o(s).value)}),g(h,_)},h=>{var _=Ef(),f=C(_);R(f,()=>o(s)?.label,k=>{var b=If(),x=C(b);F(()=>ee(x,`${o(s).label??""}:`)),g(k,b)});var m=U(f,2),w=C(m);F(()=>{we(_,`wx-field ${(o(s).css||"")??""} svelte-16qucgr`),ee(w,o(s).value)}),g(h,_)}),g(c,v)}),g(i,l)}),g(n,a)}var Mf=I('<div class="wx-color wx-rounded svelte-17mj8o9"></div>'),Af=I('<div class="wx-field wx-image svelte-17mj8o9"><img alt="" class="svelte-17mj8o9"></div>'),Tf=I("<span> </span>"),Pf=I('<div class="wx-menu svelte-17mj8o9" data-ignore-selection="true"><div><!></div></div>'),Rf=I('<div class="wx-field wx-description svelte-17mj8o9"> </div>'),Lf=I('<div class="wx-field svelte-17mj8o9"><!></div>'),Ff=I('<!> <!> <div><!> <div class="wx-body svelte-17mj8o9"><div class="wx-field wx-label svelte-17mj8o9"><!> <!></div> <!> <!></div> <!></div>',1);function Qr(n,e){ne(e,!0);let t=S(e,"menu",3,!0);const r=O(()=>e.cardFields?.attached?.find(x=>x.isCover)),a=O(()=>o(r)?o(r).coverURL||o(r).url:null);function i(x,y){let E="wx-content";return x.css&&(E+=" "+x.css),y.css?()=>E+=` ${y.css(x)}`:()=>E}const s=O(()=>i(e.cardFields,e.cardShape)());var l=Ff(),d=G(l);R(d,()=>e.cardShape.color?.show&&e.cardFields.color,x=>{var y=Mf();F(()=>J(y,"style",`background:${e.cardFields.color??""}`)),g(x,y)});var c=U(d,2);R(c,()=>e.cardShape?.cover?.show&&o(a),x=>{var y=Af(),E=C(y);F(()=>{he(y,"wx-rounded",!(e.cardShape.color?.show&&e.cardFields.color)),J(E,"src",o(a))}),g(x,y)});var v=U(c,2),u=C(v);Df(u,{get cardFields(){return e.cardFields},get cardShape(){return e.cardShape}});var h=U(u,2),_=C(h),f=C(_);R(f,()=>e.cardShape?.label?.show&&e.cardFields.label,x=>{var y=Tf(),E=C(y);F(()=>ee(E,e.cardFields.label)),g(x,y)});var m=U(f,2);R(m,t,x=>{var y=Pf(),E=C(y),p=C(E);De(p,{css:"wxi-dots-v"}),F(()=>J(E,"data-menu-id",e.cardFields.id)),g(x,y)});var w=U(_,2);R(w,()=>e.cardShape?.description?.show&&e.cardFields.description,x=>{var y=Rf(),E=C(y);F(()=>ee(E,e.cardFields.description)),g(x,y)});var k=U(w,2);R(k,()=>e.cardShape?.progress?.show&&e.cardFields.progress,x=>{var y=Lf(),E=C(y),p=O(()=>e.cardShape.progress?.config?.min||0),P=O(()=>e.cardShape.progress?.config?.max||100);uf(E,{get min(){return o(p)},get max(){return o(P)},get value(){return e.cardFields.progress}}),g(x,y)});var b=U(h,2);kf(b,{get cardFields(){return e.cardFields},get cardShape(){return e.cardShape}}),F(()=>{we(v,`${o(s)??""} svelte-17mj8o9`),he(v,"wx-selected",e.selected),he(v,"wx-dragging",e.dragging)}),g(n,l),re()}var Of=I('<div class="wx-card svelte-7hhwxe"><!></div>');function Xr(n,e){ne(e,!0);const t=Fe(),r=()=>ce(v,"$_cardsMeta",t),a=()=>ce(d,"$selected",t),i=()=>ce(u,"$cardHeight",t),s=()=>ce(c,"$cardShape",t),l=me("wx-kanban-store"),{selected:d,cardShape:c,_cardsMeta:v,cardHeight:u}=l.getReactiveState(),h=O(()=>r()?.[e.cardFields.id]?.dragging||!1),_=O(()=>Li(a(),e.cardFields.id)||!1),f=O(()=>i()?i()+"px":"auto"),m=O(()=>e.cardTemplate);var w=Of(),k=C(w);Et(k,()=>o(m),(b,x)=>{x(b,{get cardFields(){return e.cardFields},get dragging(){return o(h)},get selected(){return o(_)},get cardShape(){return s()},get menu(){return e.menu}})}),F(()=>{J(w,"data-drag-item",e.cardFields.id),J(w,"style",`height:${o(f)??""};max-height:${o(f)??""};`),J(w,"data-id",e.cardFields.id),he(w,"wx-hidden",o(h)),he(w,"wx-selected",o(_)),he(w,"wx-dimmed",r()?.[e.cardFields.id]?.dimmed)}),g(n,w),re()}var zf=I('<div class="wx-collapsed-label svelte-1betjxn"><div class="wx-label-text svelte-1betjxn"> </div></div>');function Bf(n,e){ne(e,!0);var t=zf(),r=C(t),a=C(r);F(()=>ee(a,e.column.label)),g(n,t),re()}var Nf=I('<div class="wx-item svelte-1ve5ytw"><!></div>'),Hf=I('<div class="wx-virtual-list svelte-1ve5ytw"><div class="wx-content svelte-1ve5ytw"></div> <!></div>');function qf(n,e){ne(e,!0);let t=Q([]),r=ae(void 0),a=ae(void 0),i=ae(void 0),s=ae(0),l=ae(0),d=ae(0);const c=O(()=>e.items.slice(o(s),o(l)).map((p,P)=>({index:P+o(s),data:p})));let v=ae(0),u=ae(0),h=ae(0);async function _(p){if(o(a).querySelector(`[data-id="${p}"]`))return;const A=e.items.findIndex(N=>N.id===p);A>-1&&(o(a).scrollTop=(A+1)*o(h)-o(d)/2,w(),p=null)}async function f(p,P,A){await Ft(),t.length=p.length,t.fill(0);const{scrollTop:N}=o(a);let V=o(v)-N;for(let W=o(s);W<p.length;(W+=1)-1){if(V>P){B(l,Q(W));break}let Z=o(r)[W-o(s)];Z||(B(l,W+1),await Ft(),Z=o(r)[W-o(s)]);const L=Z.offsetHeight;t[W]=L,V+=L}B(h,Q(Math.round((o(v)+V)/o(l)))),m(o(h)),await Ft(),A&&_(A)}function m(p){const P=e.items.length-o(l);B(u,P*p)}async function w(){const{scrollTop:p}=o(a);o(c).forEach((N,V)=>{const{index:W}=N;t[W]=o(r)[V].offsetHeight});let P=0,A=0;for(;P<e.items.length;){const N=t[P]||o(h);if(A+N>p){B(s,Q(P)),B(v,Q(A));break}A+=N,P+=1}for(;P<e.items.length&&(A+=t[P]||o(h),P+=1,!(A>p+o(d))););B(l,Q(P)),B(h,Q(Math.round(A/o(l)))),m(o(h))}async function k(){w(),onscroll&&onscroll({start:o(s),end:o(l)})}let b=!1;vt(()=>{B(r,Q(o(i).children)),b=!0}),nt(()=>{b&&f(e.items,o(d),e.scrollToId)});var x=Hf(),y=C(x);Se(y,21,()=>o(c),p=>p.index,(p,P)=>{var A=Nf(),N=C(A);Ie(N,()=>e.children??Ee,()=>({item:o(P).data})),F(()=>{J(A,"data-id",o(P).data.id),J(A,"data-index",o(P).index)}),g(p,A)}),Te(y,p=>B(i,p),()=>o(i));var E=U(y,2);Ie(E,()=>e.extra??Ee),Te(x,p=>B(a,p),()=>o(a)),wt(()=>ds(x,"offsetHeight",p=>B(d,p))),Be(x,p=>jr(p)),F(()=>J(y,"style",`padding-top: ${o(v)??""}px; padding-bottom: ${o(u)??""}px;`)),qe("scroll",x,k),g(n,x),re()}var Uf=I('<div class="wx-kanban-drop-area svelte-raznc"></div>'),Yf=I("<!> <!>",1),Kf=I('<div class="wx-kanban-drop-area svelte-raznc"></div>'),Vf=I("<div><!></div>"),Gf=I('<div class="wx-list-wrapper svelte-raznc" data-id="scroll-column"><!></div>');function Wf(n,e){ne(e,!0);let t=S(e,"cardTemplate",3,null);const r=me("wx-kanban-store"),{_scroll:a}=r.getReactiveState();let i=ae(void 0),s=ae(void 0),l=ae(void 0);r.on("start-drag-card",h=>{B(s,Q(ze(h.columnId,h.rowId))),B(i,Q(h.before)),B(l,Q(h.id))}),r.on("drag-card",h=>{B(s,Q(h.dragAllowed?ze(h.columnId,h.rowId):null)),B(i,Q(h.before))}),r.on("end-drag-card",()=>{B(s,Q(B(i,Q(B(l,null)))))});const d=O(()=>e.cards.filter(h=>!se(o(l),h.id)));let c=ae(void 0);a.subscribe(h=>{h?.to==="card"&&h.id&&o(d).find(_=>se(_.id,h.id))&&(B(c,Q(h.id)),r.exec("scroll",null))});var v=$(),u=G(v);R(u,()=>e.cards,h=>{var _=Gf(),f=C(_);qf(f,{get items(){return o(d)},get scrollToId(){return o(c)},children:(k,b)=>{let x=()=>b?.().item;var y=Yf(),E=G(y);R(E,()=>se(x().id,o(i))&&se(o(s),e.areaId),N=>{var V=Uf();g(N,V)});var p=U(E,2),P=O(()=>t()||Qr),A=O(()=>e.isMenuVisible?.[x().id]?.visible);Xr(p,{get cardTemplate(){return o(P)},get cardFields(){return x()},get menu(){return o(A)}}),g(k,y)},extra:k=>{var b=Vf(),x=C(b);R(x,()=>!o(i)&&se(o(s),e.areaId),y=>{var E=Kf();g(y,E)}),g(k,b)},$$slots:{default:!0,extra:!0}}),F(()=>he(_,"wx-not-anchored",o(s))),g(h,_)}),g(n,v),re()}var jf=I('<div class="wx-kanban-drop-area svelte-15vp8g6"></div>'),Jf=I("<!> <!>",1),Zf=I('<div class="wx-kanban-drop-area svelte-15vp8g6"></div>'),Qf=I("<!> <!>",1),Xf=I('<div class="wx-list-wrapper svelte-15vp8g6"><!></div>');function $f(n,e){ne(e,!0);let t=S(e,"cardTemplate",3,null);const r=me("wx-kanban-store");let a=ae(void 0),i=ae(void 0);r.on("start-drag-card",d=>{B(i,Q(ze(d.columnId,d.rowId))),B(a,Q(d.before))}),r.on("drag-card",d=>{B(i,Q(d.dragAllowed?ze(d.columnId,d.rowId):null)),B(a,Q(d.before))}),r.on("end-drag-card",()=>{B(i,Q(B(a,null)))});var s=$(),l=G(s);R(l,()=>e.cards,d=>{var c=Xf(),v=C(c);R(v,()=>e.cards,u=>{var h=Qf(),_=G(h);Se(_,17,()=>e.cards,m=>m.id,(m,w)=>{var k=Jf(),b=G(k);R(b,()=>se(o(w).id,o(a))&&se(o(i),e.areaId),p=>{var P=jf();g(p,P)});var x=U(b,2),y=O(()=>t()||Qr),E=O(()=>e.isMenuVisible?.[o(w).id]?.visible);Xr(x,{get cardTemplate(){return o(y)},get cardFields(){return o(w)},get menu(){return o(E)}}),g(m,k)});var f=U(_,2);R(f,()=>!o(a)&&se(o(i),e.areaId),m=>{var w=Zf();g(m,w)}),g(u,h)}),Be(c,u=>jr(u)),F(()=>he(c,"wx-not-anchored",o(i))),g(d,c)}),g(n,s),re()}function eh(n,e,t,r){e.exec("add-card",{columnId:t.column.id,rowId:t.row.id,card:{label:r("Untitled")}})}var th=I('<div class="wx-kanban-drop-area svelte-u46fyc"></div>'),nh=I("<!> <!>",1),rh=I('<div class="wx-kanban-drop-area svelte-u46fyc"></div>'),ah=I("<!> <!>",1),ih=I('<div class="wx-add-card-btn svelte-u46fyc"><!> <span class="wx-add-card-tip svelte-u46fyc"> </span></div>'),oh=I('<div class="wx-swimlane-limit svelte-u46fyc"> </div>'),sh=I('<!> <div class="wx-controls-wrapper svelte-u46fyc"><!> <!></div>',1),lh=I("<div><!> <!></div>");function eo(n,e){ne(e,!0);const t=Fe(),r=()=>ce(_,"$readonly",t),a=()=>ce(h,"$_areasMeta",t),i=()=>ce(w,"$_cardsMap",t),s=()=>ce(f,"$columnShape",t),l=()=>ce(m,"$_layout",t);let d=S(e,"cardTemplate",3,null),c=S(e,"virtual",3,null);const v=me("wx-kanban-store"),u=me("wx-i18n").getGroup("kanban"),{_areasMeta:h,readonly:_,columnShape:f,_layout:m,_cardsMap:w}=v.getReactiveState();let k=ae(void 0),b=ae(void 0);v.on("start-drag-card",M=>{B(b,Q(ze(M.columnId,M.rowId))),B(k,Q(M.before))}),v.on("drag-card",M=>{B(b,Q(M.dragAllowed?ze(M.columnId,M.rowId):null)),B(k,Q(M.before))}),v.on("end-drag-card",()=>{B(b,Q(B(k,null)))});const x=O(()=>r().add),y=O(()=>a()[ze(e.column.id,e.row.id)]),E=O(()=>a()[e.column.id]),p=O(()=>{const M=i()[ze(e.column.id,e.row.id)];if(c()&&M){let[q,Y]=[c().startIndex,c().endIndex];return c().byRow[e.row.id]&&([q,Y]=[c().byRow[e.row.id].startIndex,c().byRow[e.row.id].endIndex]),M.slice(q,Y)}return M}),P=O(()=>ze(e.column.id,e.row.id)),A=O(()=>o(y)?.height),N=O(()=>o(A)?`${o(A)}px`:"auto");function V(M,q,Y,H){let T="wx-column";return q.collapsed&&(T+=" wx-collapsed"),Y&&(T+=" wx-over-limit"),q.css&&(T+=" "+q.css),M?.css&&(T+=" "+M.css(q,H)),T}const W=O(()=>V(s(),e.column,o(y).isOverLimit,i()[e.column.id]));var Z=lh(),L=C(Z);R(L,()=>!e.column.collapsed,M=>{var q=sh(),Y=G(q);R(Y,()=>l()==="column:lazy",K=>{Wf(K,{get cards(){return o(p)},get cardTemplate(){return d()},get areaId(){return o(P)},get isMenuVisible(){return e.isMenuVisible}})},K=>{var j=$(),te=G(j);R(te,()=>l()==="column:default",ie=>{$f(ie,{get cards(){return o(p)},get cardTemplate(){return d()},get areaId(){return o(P)},get isMenuVisible(){return e.isMenuVisible}})},ie=>{var ve=ah(),X=G(ve);R(X,()=>o(p),le=>{var de=$(),ue=G(de);Se(ue,17,()=>o(p),fe=>fe.id,(fe,_e)=>{var Ae=nh(),ke=G(Ae);R(ke,()=>se(o(_e).id,o(k))&&se(o(b),o(P)),Ne=>{var Nt=th();g(Ne,Nt)});var xe=U(ke,2),Oe=O(()=>d()||Qr),Re=O(()=>e.isMenuVisible?.[o(_e).id]?.visible);Xr(xe,{get cardTemplate(){return o(Oe)},get cardFields(){return o(_e)},get menu(){return o(Re)}}),g(fe,Ae)}),g(le,de)});var oe=U(X,2);R(oe,()=>!o(k)&&se(o(b),o(P)),le=>{var de=rh();g(le,de)}),g(ie,ve)},!0),g(K,j)});var H=U(Y,2),T=C(H);R(T,()=>o(x)&&(typeof e.column.limit=="object"?!o(y).noFreeSpace:!o(E).noFreeSpace),K=>{var j=ih();j.__click=[eh,v,e,u];var te=C(j);De(te,{css:"wxi-plus"});var ie=U(te,2),ve=C(ie);F(()=>ee(ve,u("Add new card..."))),g(K,j)});var z=U(T,2);R(z,()=>o(y).rowId&&typeof e.column.limit=="object"&&o(y).totalLimit,K=>{var j=oh(),te=C(j);F(()=>ee(te,`${o(y).cardsCount??""}/${o(y).totalLimit??""}`)),g(K,j)}),g(M,q)},M=>{var q=$(),Y=G(q);R(Y,()=>s().collapsedTemplate,H=>{var T=$();const z=O(()=>s().collapsedTemplate);var K=G(T);Et(K,()=>o(z),(j,te)=>{te(j,{get column(){return e.column},get columnState(){return o(y)}})}),g(H,T)},H=>{Bf(H,{get column(){return e.column},get columnState(){return o(y)}})},!0),g(M,q)});var D=U(L,2);R(D,()=>e.column.overlay,M=>{var q=$(),Y=G(q);Et(Y,()=>e.column.overlay,(H,T)=>{T(H,{})}),g(M,q)}),F(()=>{we(Z,`${o(W)??""} svelte-u46fyc`),J(Z,"data-drop-area",o(P)),J(Z,"style",`min-height:${o(N)??""};`)}),g(n,Z),re()}ge(["click"]);var ch=I('<div class="wx-label svelte-1dnc12v"> <!></div>'),dh=I('<div class="wx-menu svelte-1dnc12v"><!></div>'),uh=I('<div class="wx-collapse-icon svelte-1dnc12v"><!></div> <!> <!>',1);function vh(n,e){ne(e,!0);let t=S(e,"renaming",3,!1),r=S(e,"readonly",3,!1);var a=uh(),i=G(a);J(i,"data-action","collapse");var s=C(i),l=O(()=>e.column.collapsed?"wxi-angle-right":"wxi-angle-left");De(s,{get css(){return o(l)}});var d=U(i,2);R(d,()=>!t()&&!e.column.collapsed,v=>{var u=ch();J(u,"data-action","rename");var h=C(u),_=U(h);R(_,()=>e.column.limit,f=>{var m=pe();F(()=>ee(m,`(${e.columnState.cardsCount??""}/${e.columnState.totalLimit??""})`)),g(f,m)}),F(()=>ee(h,`${e.column.label??""} `)),g(v,u)});var c=U(d,2);R(c,()=>e.isMenuVisible&&!r()&&!t()&&!e.column.collapsed,v=>{var u=dh(),h=C(u);De(h,{css:"wxi-dots-h"}),F(()=>J(u,"data-menu-id",e.column.id)),g(v,u)}),g(n,a),re()}var fh=I('<span class="wx-mark svelte-1doi7f4">Trial</span>'),hh=I('<input type="text" class="wx-input svelte-1doi7f4">'),mh=I("<div><!> <!> <!></div>");function gh(n,e){ne(e,!0);const t=Fe(),r=()=>ce(c,"$_areasMeta",t),a=()=>ce(v,"$columnShape",t),i=()=>ce(u,"$_cardsMap",t),s=()=>ce(h,"$readonly",t);let l=S(e,"renaming",7,!1);const d=me("wx-kanban-store"),{_areasMeta:c,columnShape:v,_cardsMap:u,readonly:h}=d.getReactiveState(),_=O(()=>r()[e.column.id]);let f=null,m=ae(void 0);function w(){l()&&f?.trim()&&d.exec("update-column",{id:e.column.id,column:{label:f}}),l(!1),f=null,e.onaction?.({action:"close-column-input",data:{}})}function k(D){f=D.target.value}function b(D){D.charCode===13&&w()}function x(D){D.focus()}function y(D,M,q,Y){let H="wx-column";return M.collapsed&&(H+=" wx-collapsed"),q&&(H+=" wx-over-limit"),M.css&&(H+=" "+M.css),D?.css&&(H+=" "+D.css(M,Y)),H}const E=O(()=>y(a(),e.column,o(_).isOverLimit,i()[e.column.id])),{register:p,unregister:P,handleOffsetChange:A}=Gi();function N(){A?.(e.column.id,e.index,o(m).offsetLeft)}vt(()=>p(e.column.id,o(m),N)),Sr(()=>{P(e.column.id,e.index)});var V=mh(),W=C(V);R(W,()=>a().headerTemplate,D=>{var M=$();const q=O(()=>a().headerTemplate);var Y=G(M),H=O(()=>!s().edit);Et(Y,()=>o(q),(T,z)=>{z(T,{get column(){return e.column},get columnState(){return o(_)},get isMenuVisible(){return e.isMenuVisible},get renaming(){return l()},get readonly(){return o(H)}})}),g(D,M)},D=>{var M=O(()=>!s().edit);vh(D,{get column(){return e.column},get columnState(){return o(_)},get isMenuVisible(){return e.isMenuVisible},get renaming(){return l()},get readonly(){return o(M)}})});var Z=U(W,2);R(Z,()=>!Mi(),D=>{var M=fh();const q=O(Ai);F(()=>he(M,"wx-error",o(q))),g(D,M)});var L=U(Z,2);R(L,l,D=>{var M=hh();M.__input=k,Be(M,q=>x(q)),F(()=>Ot(M,e.column.label)),qe("keypress",M,b),qe("blur",M,w),g(D,M)}),Te(V,D=>B(m,D),()=>o(m)),F(()=>{we(V,`${o(E)??""} svelte-1doi7f4`),J(V,"data-id",e.column.id),J(V,"data-column-header",e.column.id)}),g(n,V),re()}ge(["input"]);var _h=I('<div class="wx-header svelte-1vlv8y5"></div> <!>',1);function to(n,e){ne(e,!0);const t=Fe(),r=()=>ce(v,"$columnShape",t),a=()=>ce(c,"$readonly",t),i=()=>ce(u,"$columns",t),s=me("wx-kanban-store"),l=me("wx-i18n").getGroup("kanban"),{showModal:d}=me("wx-helpers"),{readonly:c,columnShape:v,columns:u}=s.getReactiveState(),h=O(()=>r().fixedHeaders!==!1),_=O(()=>a().add===!1),f=(D,M,q,Y)=>{let H=Y.menu.items({columns:q,columnIndex:M,column:D});return!H||!H.length?null:(o(_)&&(H=H.filter(T=>T.id!=="add-card")),H.map(T=>Zn(T,l)))},m=O(()=>{const D={};return i().forEach((M,q)=>{D[M.id]=f(M,q,i(),r())}),D});function w(D,M){const q=i().findIndex(T=>T.id===D),Y=M==="left"?q-1:q+2,H=i()[Y]?.id;s.exec("move-column",{id:D,before:H})}let k=ae(null);function b(D){const{action:M,context:q}=D;if(M){if(M.onClick){M.onClick({id:M.id,item:M,column:q});return}switch(M.id){case"add-card":s.exec("add-card",{columnId:q.id,card:{label:l("Untitled")}});break;case"set-edit":a().edit&&B(k,Q(q.id));break;case"delete-column":{(r().confirmDeletion??!0?d({message:l("Would you like to delete this column?")}):Promise.resolve()).then(()=>{s.exec("delete-column",{id:q.id})}).catch(()=>{});break}case"move-column:left":w(q.id,"left");break;case"move-column:right":w(q.id,"right");break}}}let x=ae(null),y=ae(Q([]));function E(D){return B(y,Q(o(m)[D]||[])),i().find(M=>M.id===D)}const p=({action:D,data:M})=>{if(D==="close-column-input")B(k,null);else if(D==="expand-column"){P(M.id);return}};function P(D){const M=i().find(q=>q.id==D);s.exec("update-column",{id:D,column:{collapsed:!M.collapsed}})}function A(D,M){Ir(M.target,"data-action")?.dataset.action!=="rename"||!a().edit||i().find(Y=>Y.id==D).collapsed||B(k,Q(D))}const N={dblclick:A,collapse:P};function V(D){return r().menu.show&&!!o(m)[D]?.length}var W=_h(),Z=G(W);Z.__click=function(...D){o(x).show?.apply(this,D)},Se(Z,7,i,D=>D.id,(D,M,q)=>{var Y=O(()=>V(o(M).id)),H=O(()=>o(k)==o(M).id);gh(D,{get column(){return o(M)},get isMenuVisible(){return o(Y)},get renaming(){return o(H)},get index(){return o(q)},onaction:p})}),Be(Z,(D,M)=>mn(D,M),()=>N);var L=U(Z,2);Te(Qn(L,{at:"left-bottom",get options(){return o(y)},resolver:E,dataKey:"menuId",onclick:b}),D=>B(x,Q(D)),()=>o(x)),F(()=>he(Z,"fixed",o(h))),g(n,W),re()}ge(["click"]);var wh=I("<!> <!>",1),yh=I("<!> <!>",1),xh=I("<!> <!>",1),bh=I("<!> <!>",1),ph=I('<div class="wx-kanban svelte-3y7ur4"><div class="wx-content-wrapper svelte-3y7ur4"><div class="wx-content svelte-3y7ur4"><!></div></div> <!></div> <!>',1);function kh(n,e){ne(e,!0);const t=Fe(),r=()=>ce(w,"$cards",t),a=()=>ce(m,"$cardShape",t),i=()=>ce(f,"$readonly",t),s=()=>ce(b,"$_layout",t),l=()=>ce(h,"$columns",t),d=()=>ce(_,"$rows",t),c=()=>ce(k,"$editor",t),v=me("wx-kanban-store"),u=me("wx-i18n").getGroup("kanban");let{columns:h,rows:_,readonly:f,cardShape:m,cards:w,editor:k,_layout:b}=v.getReactiveState();const{showModal:x}=me("wx-helpers");let y=ae(null),E=ae(Q([]));const p=(T,z)=>{const K=z.menu.items({card:T});return!K||!K.length?null:K.map(j=>Zn(j,u))},P=O(()=>r().reduce((T,z)=>{const K=p(z,a());return T[z.id]={options:K,visible:!!(a().menu.show&&K?.length)},T},{}));function A(T){const z=r().find(K=>K.id==T);return z&&(v.getState().selected?.length>1&&v.exec("select-card",{id:parseInt(T)}),B(E,Q(o(P)[z.id].options||[]))),z}function N(T){const{action:z,context:K}=T;if(z){if(z.onClick){z.onClick({id:z.id,item:z,card:K});return}switch(z.id){case"delete-card":{(a().confirmDeletion?.show??!0?V():Promise.resolve()).then(()=>{v.exec("delete-card",{id:K.id})}).catch(()=>{});break}case"set-edit":v.exec("set-edit",{cardId:K.id,eventSource:"ui"});break;case"duplicate-card":v.exec("duplicate-card",{id:K.id,card:{label:`${u("Duplicate of")} ${K.label}`}});break}}}function V(){return x({message:u("Would you like to delete this card?")})}Cu(h);let W=ae(void 0);v.on("start-drag-card",T=>{B(W,Q(T.id))}),v.on("end-drag-card",()=>{B(W,null)});var Z=ph(),L=G(Z),D=C(L),M=C(D);M.__click=function(...T){o(y).show?.apply(this,T)};var q=C(M);R(q,()=>s()==="default:lazy",T=>{Gu(T,{children:(K,j)=>{let te=()=>j?.().startIndex,ie=()=>j?.().endIndex,ve=()=>j?.().byRow;var X=yh(),oe=G(X);to(oe,{});var le=U(oe,2);R(le,()=>l().length,de=>{var ue=wh(),fe=G(ue);Se(fe,1,d,Ae=>Ae.id,(Ae,ke)=>{var xe=$(),Oe=G(xe);R(Oe,()=>ve()[o(ke).id]?.visible,Re=>{$i(Re,{get row(){return o(ke)},children:(Ne,Nt)=>{var it=$(),ot=G(it);Se(ot,1,l,Ke=>Ke.id,(Ke,st)=>{var co=O(()=>({startIndex:te(),endIndex:ie(),byRow:ve()}));eo(Ke,{get column(){return o(st)},get row(){return o(ke)},get virtual(){return o(co)},get cardTemplate(){return e.cardTemplate},get isMenuVisible(){return o(P)}})}),g(Ne,it)},$$slots:{default:!0}})}),g(Ae,xe)});var _e=U(fe,2);Xi(_e,{}),g(de,ue)}),g(K,X)},$$slots:{default:!0}})},T=>{var z=bh(),K=G(z);to(K,{});var j=U(K,2);R(j,()=>l().length,te=>{var ie=xh(),ve=G(ie);Se(ve,1,d,oe=>oe.id,(oe,le)=>{$i(oe,{get row(){return o(le)},children:(de,ue)=>{var fe=$(),_e=G(fe);Se(_e,1,l,Ae=>Ae.id,(Ae,ke)=>{eo(Ae,{get column(){return o(ke)},get row(){return o(le)},get cardTemplate(){return e.cardTemplate},get isMenuVisible(){return o(P)}})}),g(de,fe)},$$slots:{default:!0}})});var X=U(ve,2);Xi(X,{}),g(te,ie)}),g(T,z)}),Be(D,(T,z)=>mu(T,z),()=>({api:v,readonly:i().select===!1}));var Y=U(D,2);R(Y,()=>i().edit&&!o(W)&&c().show!==!1,T=>{$v(T,{})}),Be(L,(T,z)=>hu(T,z),()=>({api:v,readonly:i().dnd===!1})),Be(L,(T,z)=>xu(T,z),()=>({api:v,readonly:i().edit===!1,locale:u,confirmDeletion:a().confirmDeletion?.show??!0?V:null})),Be(L,(T,z)=>yu(T,z),()=>({api:v,tick:Ft}));var H=U(L,2);Te(Qn(H,{at:"left-bottom",get options(){return o(E)},resolver:A,dataKey:"menuId",onclick:N}),T=>B(y,Q(T)),()=>o(y)),F(()=>{J(L,"data-wx-widget",Ye.kanban),he(L,"wx-dragged",!!o(W)),he(L,"wx-touch",Eu.isMobile||navigator.maxTouchPoints>1),J(D,"data-kanban-id",Ye.content),he(D,"wx-virtual-content",s()==="default:lazy"),J(M,"data-kanban-id",Ye.scrollableContent),he(M,"wx-virtual-content",s()==="default:lazy"),he(M,"wx-not-anchored",!!o(W))}),g(n,Z),re()}ge(["click"]);function Sh(n,e){ne(e,!0);let t=S(e,"rows",3,null),r=S(e,"cardShape",3,_n),a=S(e,"columnShape",3,null),i=S(e,"rowShape",3,null),s=S(e,"editorShape",3,null),l=S(e,"readonly",3,!1),d=S(e,"columnKey",3,"column"),c=S(e,"rowKey",3,""),v=S(e,"scrollType",3,"default"),u=S(e,"renderType",3,"default"),h=S(e,"cardHeight",3,null),_=S(e,"cardTemplate",3,null),f=S(e,"editor",27,()=>Q(jn)),m=S(e,"history",3,!0),w=S(e,"currentUser",3,null),k=S(e,"links",3,null),b=S(e,"dataStore",15,null),x=S(e,"init",3,null),y=hn(e,["$$slots","$$events","$$legacy","columns","rows","cards","cardShape","columnShape","rowShape","editorShape","readonly","columnKey","rowKey","scrollType","renderType","cardHeight","cardTemplate","editor","history","currentUser","links","dataStore","init"]);const E=/-/g;let p=new Os((V,W)=>{const Z="on"+V.replace(E,"");y[Z]&&y[Z](W)});b()||(b(new cu(V=>Nr(V),{history:m()})),b().out.setNext(p));const P=pu(b(),p);bt("wx-kanban-store",P);let A=!0;const N=()=>{b().init({columnKey:d(),rowKey:c(),columns:e.columns,rows:t(),cards:e.cards,cardShape:r(),columnShape:a(),editorShape:s(),rowShape:i(),readonly:l(),cardHeight:h(),currentUser:w(),links:k(),editor:f(),scrollType:v(),renderType:u(),_cardsMap:{},_cardsMeta:{}}),A&&x()&&(x()(P),A=!1)};return N(),nt(N),Tt(n,{words:{...Nn,...Bn},optional:!0,children:(V,W)=>{Xc(V,{children:(Z,L)=>{kh(Z,{get cardTemplate(){return _()}})},$$slots:{default:!0}})},$$slots:{default:!0}}),re({api:P})}function $r(n,e){ne(e,!0);let t=hn(e,["$$slots","$$events","$$legacy","template"]);const r=O(()=>typeof e.template=="function"?e.template({...t}):e.template);var a=$(),i=G(a);R(i,()=>o(r),s=>{var l=$(),d=G(l);On(d,()=>o(r)),g(s,l)}),g(n,a),re()}function Ih(n,e){ne(e,!0);let t=S(e,"fonts",3,!0);var r=$(),a=G(r);R(a,()=>e.children,i=>{bi(i,{get fonts(){return t()},children:(s,l)=>{var d=$(),c=G(d);Ie(c,()=>e.children??Ee),g(s,d)},$$slots:{default:!0}})},i=>{bi(i,{get fonts(){return t()}})}),g(n,r),re()}function Eh(n,e){ne(e,!0);let t=S(e,"fonts",3,!0);var r=$(),a=G(r);R(a,()=>e.children,i=>{ki(i,{get fonts(){return t()},children:(s,l)=>{var d=$(),c=G(d);Ie(c,()=>e.children??Ee),g(s,d)},$$slots:{default:!0}})},i=>{ki(i,{get fonts(){return t()}})}),g(n,r),re()}function Ch(n,e){ne(e,!0);let t=S(e,"fonts",3,!0);var r=$(),a=G(r);R(a,()=>e.children,i=>{Si(i,{get fonts(){return t()},children:(s,l)=>{var d=$(),c=G(d);Ie(c,()=>e.children??Ee),g(s,d)},$$slots:{default:!0}})},i=>{Si(i,{get fonts(){return t()}})}),g(n,r),re()}var Dh=I('<div class="wx-item-inner svelte-yq8s5f"><span class="wx-list-item-text svelte-yq8s5f"> </span></div>'),Mh=I('<div class="wx-list-item svelte-yq8s5f"><!></div>'),Ah=I('<div class="wx-results svelte-yq8s5f"></div>'),Th=I('<div class="wx-list-item wx-no-results svelte-yq8s5f"> </div>'),Ph=I('<div class="wx-search-popup svelte-yq8s5f"><div class="wx-settings svelte-yq8s5f"><div class="wx-select svelte-yq8s5f"><div class="wx-title svelte-yq8s5f"> </div> <!></div></div> <!></div>'),Rh=I('<div class="wx-search svelte-yq8s5f"><div class="wx-search-input svelte-yq8s5f"><!></div> <!></div>');function Lh(n,e){ne(e,!0);const t=Fe(),r=()=>ce(o(l),"$_cardsMeta",t),a=()=>ce(o(d),"$search",t),i=me("wx-i18n").getGroup("kanban");let s=S(e,"options",19,()=>[{id:null,label:i("Everywhere")},{id:"label",label:i("Label")},{id:"description",label:i("Description")}]);const l=O(()=>e.api?.getReactiveState()._cardsMeta),d=O(()=>e.api?.getReactiveState().search),c=O(()=>{if(r()){const A=Object.keys(r()).reduce((N,V)=>(r()[V].found&&N.push(e.api?.getCard(V)),N),[]);if(A.length)return A}return null});function v({value:A}){A||(A=null);const N=s().find(V=>V.id===A);e.api?.exec("set-search",{value:a()?.value||"",by:A,searchRule:N?.searchRule})}let u=ae(!1),h=ae(void 0);function _(A){o(h).contains(A.target)||(B(u,!1),e.api?.exec("set-search",{value:"",by:a()?.by||null}))}function f({value:A,input:N}){a()?.value!==A&&(B(u,!!N),e.api?.exec("set-search",{value:A,by:a()?.by||null}))}function m(){B(u,!0)}function w(A){e.api?.exec("select-card",{id:A}),B(u,!1)}const k={click:A=>w(A)};var b=Rh();J(b,"tabindex",1);var x=C(b);x.__click=m;var y=C(x),E=O(()=>a()?.value||""),p=O(()=>i("Search"));Kn(y,{get value(){return o(E)},get placeholder(){return o(p)},clear:!0,icon:"wxi-search",css:"wx-icon-left",onchange:f,onfocus:m});var P=U(x,2);R(P,()=>o(u),A=>{At(A,{oncancel:_,children:(N,V)=>{var W=Ph(),Z=C(W),L=C(Z),D=C(L),M=C(D);F(()=>ee(M,`${i("Search in")??""}:`));var q=U(D,2),Y=O(()=>a()?.by||null);xi(q,{get value(){return o(Y)},get options(){return s()},onchange:v});var H=U(Z,2);R(H,()=>o(c),T=>{var z=Ah();Se(z,21,()=>o(c),rt,(K,j)=>{var te=Mh(),ie=C(te);R(ie,()=>e.resultTemplate,ve=>{var X=$();const oe=O(()=>e.resultTemplate);var le=G(X);Et(le,()=>o(oe),(de,ue)=>{ue(de,{get result(){return o(j)}})}),g(ve,X)},ve=>{var X=Dh(),oe=C(X),le=C(oe);F(()=>ee(le,o(j).label)),g(ve,X)}),F(()=>J(te,"data-id",o(j).id)),g(K,te)}),Be(z,(K,j)=>mn(K,j),()=>k),g(T,z)},T=>{var z=Th(),K=C(z);F(()=>ee(K,i("No results"))),g(T,z)}),g(N,W)},$$slots:{default:!0}})}),Te(b,A=>B(h,A),()=>o(h)),F(()=>J(b,"data-wx-widget",Ye.search)),g(n,b),re()}ge(["click"]);function Fh(n,e){ne(e,!0);const t=me("wx-i18n").getGroup("kanban");function r(){e.api?.exec("add-row",{id:Hn(),row:{label:t("Untitled")}})}var a=O(()=>t("Add new row"));De(n,{onclick:r,get title(){return o(a)},css:"wxi-table-row-plus-after"}),re()}function Oh(n,e){ne(e,!0);const t=me("wx-i18n").getGroup("kanban");function r(){e.api?.exec("add-column",{id:Hn(),column:{label:t("Untitled")}})}var a=O(()=>t("Add new column"));De(n,{onclick:r,get title(){return o(a)},css:"wxi-table-column-plus-after"}),re()}var zh=I('<div class="wx-preserve svelte-1284skx"><!> </div>'),Bh=I('<div class="wx-control svelte-1284skx"><!></div>'),Nh=I('<div class="wx-sort-button svelte-1284skx"><!> <!></div>');function Hh(n,e){ne(e,!0);const t=Fe(),r=()=>ce(o(l),"$stateSort",t),a=me("wx-i18n").getGroup("kanban");let i=S(e,"options",3,null);const s=O(()=>(Array.isArray(i())?i():Ad()).map(f=>{const{id:m,text:w,label:k,dir:b}=f;return{...f,id:m||Ue(),text:a(w||k),icon:b==="asc"?"wxi-asc":"wxi-desc"}}));let l=O(()=>e.api?.getReactiveState().sort),d=O(()=>r()?.preserve?o(s).find(f=>f.by===r().by&&f.dir===r().dir):null);function c(f){const m=f?.action;if(m){const w=o(s).find(k=>k.id===m.id);w&&e.api.exec("set-sort",{by:w.by,dir:w.dir})}}function v(){e.api.exec("set-sort",null)}var u=Nh(),h=C(u);R(h,()=>o(d),f=>{var m=zh(),w=C(m);De(w,{css:"wxi-close",onclick:v});var k=U(w);F(()=>ee(k,` ${o(d).text??""}`)),g(f,m)});var _=U(h,2);Ku(_,{get options(){return o(s)},at:"left-bottom",onclick:c,children:(f,m)=>{var w=Bh();F(()=>J(w,"title",a("Sort")));var k=C(w);De(k,{css:"wxi-sort"}),g(f,w)},$$slots:{default:!0}}),g(n,u),re()}function qh(n,e){ne(e,!0);const t=Fe(),r=()=>ce(o(s),"$history",t),a=me("wx-i18n").getGroup("kanban");function i(){e.api.exec("undo")}const s=O(()=>e.api?.getReactiveState().history),l=O(()=>o(s)&&r().undo.length>0);var d=O(()=>a("Undo")),c=O(()=>`wxi-undo ${o(l)?"":"wx-disabled"}`);De(n,{onclick:i,get title(){return o(d)},get css(){return o(c)}}),re()}function Uh(n,e){ne(e,!0);const t=Fe(),r=()=>ce(o(s),"$history",t),a=me("wx-i18n").getGroup("kanban");function i(){e.api.exec("redo")}const s=O(()=>e.api?.getReactiveState().history),l=O(()=>o(s)&&r().redo?.length>0);var d=O(()=>a("Redo")),c=O(()=>`wxi-redo ${o(l)?"":"wx-disabled"}`);De(n,{onclick:i,get title(){return o(d)},get css(){return o(c)}}),re()}function ea(n,e,t){const r=document.createElement("DIV");r.className="wx-theme",n.appendChild(r);let a=window.getComputedStyle(r).getPropertyValue("--wx-theme-name");return r.remove(),(e&&e!==a||!e&&!a&&t)&&(a&&n.classList.remove(`wx-${a}-theme`),a=e||t,n.classList.add(`wx-${a}-theme`)),a}const no={material:Ih,willow:Eh,"willow-dark":Ch};function ro(){ii(Yn)}class Yh{api;export;#e=ae();get config(){return o(this.#e)}set config(e){B(this.#e,Q(e))}container;_kanban;constructor(e,t){this.container=typeof e=="string"?document.querySelector(e):e,this.config=t,Yn.detect()&&ro(),this._init()}destructor(){yr(this._kanban),this._kanban=this.api=null}setConfig(e){this._storeConfig(e),typeof e.history<"u"&&console.debug("history cannot be reset at runtime"),typeof e.theme<"u"?this.setTheme(e.theme):this.api.getStores().data.init({...this.config})}parse(e){this.setConfig(e)}serialize(){const{cards:e,links:t,columns:r,rows:a}=this.api.getState();return{cards:e,links:t,columns:r,rows:a}}getCard(e){return this.api.getCard(e)}getAreaCards(e,t){return this.api.getAreaCards(e,t)}getColumnCards(e){return this.api.getColumnCards(e)}getSelection(){return this.api.getState().selected}undo(){this.api.exec("undo",null)}redo(){this.api.exec("redo",null)}addCard(e){this.api.exec("add-card",e)}updateCard(e){this.api.exec("update-card",e)}duplicateCard(e){this.api.exec("duplicate-card",e)}deleteCard(e){this.api.exec("delete-card",e)}moveCard(e){this.api.exec("move-card",e)}addColumn(e){this.api.exec("add-column",e)}updateColumn(e){this.api.exec("update-column",e)}addRow(e){this.api.exec("add-row",e)}updateRow(e){this.api.exec("update-row",e)}moveColumn(e){this.api.exec("move-column",e)}moveRow(e){this.api.exec("move-row",e)}deleteColumn(e){this.api.exec("delete-column",e)}deleteRow(e){this.api.exec("delete-row",e)}addLink(e){this.api.exec("add-link",e)}deleteLink(e){this.api.exec("delete-link",e)}addComment(e){this.api.exec("add-comment",e)}updateComment(e){this.api.exec("update-comment",e)}deleteComment(e){this.api.exec("delete-comment",e)}selectCard(e){this.api.exec("select-card",e)}unselectCard(e){this.api.exec("unselect-card",e)}setSearch(e){this.api.exec("set-search",e)}setSort(e){this.api.exec("set-sort",e)}setEdit(e){this.api.exec("set-edit",{...e})}scroll(e){this.api.exec("scroll",e)}setLocale(e){this._reset({locale:e})}setTheme(e){this._reset({theme:e})}_init(e){this._kanban&&this.destructor();const t=ea(this.container,this.config.theme?.name,"material"),r=new Map([["wx-i18n",Wt(this.config.locale)],["wx-theme",t]]);no[t]&&Fn(no[t],{target:this.container,props:{fonts:this.config.theme?.fonts}}),e&&(this.config.dataStore=e),this._kanban=Fn(Sh,{target:this.container,props:this.config,context:r,intro:!1}),this.api=this._kanban.api,this.export=this.api.export}_reset(e){const t=this.api.getStores().data;this._storeConfig(e),this._init(t)}_storeConfig(e){const t=this.serialize();this.config={...this.config,...t,...e}}}function Kh(n){return new Proxy($r,{apply(e,t,r){const[,a]=r;return a.template=n,e(r[0],a)}})}function Vh(n,e){Zr(n,{get api(){return e.api},get config(){return e.config},get shape(){return e.shape}})}class Gh{api;config;container;_component;constructor(e,t){this.container=typeof e=="string"?document.querySelector(e):e,this.config=t,this._init()}destructor(){yr(this._component),this._component=this.api=null}setConfig(e){e&&(this.config={...this.config,...e},this._init())}setLocale(e,t){this.setConfig({locale:e,api:t})}_init(){this._component&&this.destructor();const e=new Map([["wx-i18n",Wt(this.config.locale)],["wx-theme",ea(this.container,this.config.theme,"material")]]);this._component=Fn(Vh,{target:this.container,props:this._configToProps(this.config),context:e,intro:!1})}_configToProps(e){return e}}const ao={};function Wh(n){return ao[n]||n}function Xt(n,e){ao[n]=e}var jh=I("<div>&nbsp;</div>");function io(n,e){let t=S(e,"menu",3,!1);var r=jh();F(()=>we(r,`wx-separator${(t()?"-menu":"")??""} svelte-1eu7qav`)),g(n,r)}var Jh=I('<div class="wx-spacer svelte-1mbb7ow"></div>');function oo(n){var e=Jh();g(n,e)}var Zh=I("<div><!></div>");function ta(n,e){ne(e,!0);let t=S(e,"item",19,()=>({})),r=S(e,"menu",3,!1),a=O(()=>Wh(t().comp||"label"));function i(){t().handler&&t().handler(t()),e.onclick&&e.onclick({item:t()})}let s=O(()=>t().key?e.values[t().key]:void 0);function l({value:u}){t().handler&&t().handler(t(),u),e.onchange&&e.onchange({value:u,item:t()})}const d=O(()=>r()&&t().menuText||t().text);var c=$(),v=G(c);R(v,()=>t().comp=="spacer",u=>{oo(u)},u=>{var h=$(),_=G(h);R(_,()=>t().comp=="separator",f=>{io(f,{get menu(){return r()}})},f=>{var m=Zh();const w=O(()=>o(a));var k=C(m);Et(k,()=>o(w),(b,x)=>{x(b,Ge({get value(){return o(s)},onchange:l,onclick:i,get text(){return o(d)},get menu(){return r()}},t))}),F(()=>{we(m,`wx-tb-element ${(t().css||"")??""} svelte-ptl7r2`),J(m,"data-id",t().id),he(m,"wx-spacer",t().spacer),he(m,"wx-menu",r())}),g(f,m)},!0),g(u,h)}),g(n,c),re()}const Qh=(n,e)=>B(e,!1);var Xh=I("<i></i>"),$h=I('<div class="wx-label-text"> </div>'),em=I('<i class="wx-label-arrow wxi-angle-down"></i>'),tm=I('<div class="wx-drop-group"><!></div>'),nm=I('<div class="wx-collapsed svelte-155fw4u"><!> <!> <!></div> <!>',1),rm=I('<div class="wx-label svelte-155fw4u"> </div>'),am=I('<div class="wx-tb-body svelte-155fw4u"></div> <!>',1),im=I("<div><!></div>");function Xn(n,e){ne(e,!0);let t=S(e,"values",3,null),r=S(e,"menu",3,!1),a=ae(!0);const i=c=>{s(),e.onclick&&e.onclick(c)},s=()=>B(a,!0);var l=im(),d=C(l);R(d,()=>e.item.collapsed&&!r(),c=>{var v=nm(),u=G(v);u.__click=[Qh,a];var h=C(u);R(h,()=>e.item.icon,w=>{var k=Xh();F(()=>we(k,`icon ${e.item.icon??""} svelte-155fw4u`)),g(w,k)});var _=U(h,2);R(_,()=>e.item.text,w=>{var k=$h(),b=C(k);F(()=>ee(b,e.item.text)),g(w,k)});var f=U(_,2);R(f,()=>e.item.text&&!e.item.icon,w=>{var k=em();g(w,k)});var m=U(u,2);R(m,()=>!o(a),w=>{At(w,{width:"",oncancel:s,children:(k,b)=>{var x=tm(),y=C(x),E=O(()=>({...e.item,text:"",collapsed:!1}));Xn(y,{get item(){return o(E)},get values(){return t()},get menu(){return r()},get onchange(){return e.onchange},onclick:i}),g(k,x)},$$slots:{default:!0}})}),g(c,v)},c=>{var v=am(),u=G(v);Se(u,21,()=>e.item.items,rt,(_,f)=>{var m=$(),w=G(m);R(w,()=>o(f).items,k=>{Xn(k,{get item(){return o(f)},get values(){return t()},onclick:i,get onchange(){return e.onchange}})},k=>{ta(k,{get item(){return o(f)},get values(){return t()},onclick:i,get onchange(){return e.onchange}})}),g(_,m)});var h=U(u,2);R(h,()=>e.item.text,_=>{var f=rm(),m=C(f);F(()=>ee(m,e.item.text)),g(_,f)}),g(c,v)}),F(()=>{we(l,`wx-tb-group ${(e.item.css||"")??""} svelte-155fw4u`),he(l,"wx-column",e.item.layout=="column"),he(l,"wx-group-collapsed",e.item.collapsed&&!r())}),g(n,l),re()}ge(["click"]);var om=I('<div class="wx-drop-menu svelte-7mtmlh"></div>'),sm=I('<div data-id="$menu"><!> <!></div>');function lm(n,e){ne(e,!0);let t=S(e,"items",19,()=>[]),r=ae(void 0),a=ae(void 0);function i(){B(r,null)}function s(){B(r,!0)}function l(u){i(),e.onclick&&e.onclick(u)}var d=sm(),c=C(d);Pe(c,{icon:"wxi-dots-h",onclick:s});var v=U(c,2);R(v,()=>o(r),u=>{At(u,{get width(){return`${e.width??""}px`},oncancel:i,children:(h,_)=>{var f=om();Se(f,21,t,rt,(m,w)=>{var k=$(),b=G(k);R(b,()=>o(w).items,x=>{Xn(x,{get item(){return o(w)},get values(){return e.values},menu:!0,onclick:l,get onchange(){return e.onchange}})},x=>{ta(x,{get item(){return o(w)},get values(){return e.values},menu:!0,onclick:l,get onchange(){return e.onchange}})}),g(m,k)}),g(h,f)},$$slots:{default:!0}})}),Te(d,u=>B(a,u),()=>o(a)),F(()=>we(d,`wx-menu ${(e.css||"")??""} svelte-7mtmlh`)),g(n,d),re()}var cm=I("<div><!> <!></div>");function dm(n,e){ne(e,!0);let t=S(e,"items",31,()=>Q([])),r=S(e,"menuCss",3,""),a=S(e,"values",15,null),i=S(e,"overflow",3,"menu");function s(x){a()&&(a(a()[x.item.key]=x.value,!0),a(a())),e.onchange&&e.onchange(x)}let l=null,d=-1,c=ae(Q([]));function v(){if(i()==="wrap")return;const x=l.clientWidth;if(l.scrollWidth>x){if(i()==="collapse")return h();const p=l.children;let P=0;for(let A=0;A<t().length;(A+=1)-1){if(P+=p[A].clientWidth,t()[A].comp=="separator"&&(P+=8),P>x-40){if(d===A)return;d=A,B(c,Q([]));for(let N=A;N<t().length;(N+=1)-1)o(c).push(t()[N]),p[N].style.visibility="hidden";A>0&&t()[A-1].comp=="separator"&&(p[A-1].style.visibility="hidden");break}p[A].style.visibility=""}}else{const p=x-u();if(p<=0)return;if(i()==="collapse")return _(p);if(o(c).length){d=null;const P=l.children;for(let A=0;A<t().length;(A+=1)-1)P[A].style.visibility="";B(c,Q([]))}}}function u(){const x=l.children;let y=0;for(let E=0;E<t().length;(E+=1)-1)t()[E].comp!="spacer"&&(y+=x[E].clientWidth,t()[E].comp=="separator"&&(y+=8));return y}function h(){for(let x=t().length-1;x>=0;(x-=1)+1)if(t()[x].items&&!t()[x].collapsed){t(t()[x].collapsed=!0,!0),t(t()[x].$width=l.children[x].offsetWidth,!0),Ft().then(v),t([...t()]);return}}function _(x){for(let y=0;y<t().length;(y+=1)-1)if(t()[y].collapsed&&t()[y].$width){t()[y].$width-l.children[y].offsetWidth<x+10&&(t(t()[y].collapsed=!1,!0),Ft().then(v)),t([...t()]);return}}function f(x){return x.forEach(y=>{y.id||(y.id=Ue())}),x}vt(()=>{const x=new ResizeObserver(()=>v());return x.observe(l),()=>{x&&x.unobserve(l)}});const m=O(()=>f(t()));var w=cm(),k=C(w);Se(k,17,()=>o(m),rt,(x,y)=>{var E=$(),p=G(E);R(p,()=>o(y).items,P=>{Xn(P,{get item(){return o(y)},get values(){return a()},get onclick(){return e.onclick},onchange:s})},P=>{ta(P,{get item(){return o(y)},get values(){return a()},get onclick(){return e.onclick},onchange:s})}),g(x,E)});var b=U(k,2);R(b,()=>o(c).length,x=>{lm(x,{get items(){return o(c)},get css(){return r()},get values(){return a()},get onclick(){return e.onclick},onchange:s})}),Te(w,x=>l=x,()=>l),F(()=>{we(w,`wx-toolbar ${e.css??""} svelte-b19ms9`),he(w,"wx-wrap",i()==="wrap")}),g(n,w),re()}var um=I('<div class="wx-item svelte-b4dkf1"><i></i> </div>');function vm(n,e){let t=S(e,"text",3,"");var r=$(),a=G(r);R(a,()=>e.menu,i=>{var s=um();s.__click=function(...c){e.onclick?.apply(this,c)};var l=C(s),d=U(l);F(()=>{we(l,`${e.icon||"wxi-empty"} ${(e.css||"")??""} svelte-b4dkf1`),ee(d,` ${t()??""}`)}),g(i,s)},i=>{Pe(i,{get icon(){return e.icon},get type(){return e.type},get css(){return e.css},get text(){return t()},get disabled(){return e.disabled},get onclick(){return e.onclick}})}),g(n,r)}ge(["click"]);var fm=I('<div class="wx-label svelte-agyr5c"><!></div>'),hm=I('<div class="wx-label svelte-agyr5c"> </div>');function mm(n,e){ne(e,!0);var t=$(),r=G(t);R(r,()=>e.children,a=>{var i=fm(),s=C(i);Ie(s,()=>e.children),g(a,i)},a=>{var i=hm(),s=C(i);F(()=>ee(s,e.value||e.text)),g(a,i)}),g(n,t),re()}var gm=I("<i></i>"),_m=I('<div class="wx-item svelte-ng2v87"><!> </div>');function wm(n,e){var t=$(),r=G(t);R(r,()=>e.menu,a=>{var i=_m();i.__click=function(...d){e.onclick?.apply(this,d)};var s=C(i);R(s,()=>e.icon,d=>{var c=gm();F(()=>we(c,`${e.icon??""} ${e.css??""} svelte-ng2v87`)),g(d,c)});var l=U(s);F(()=>ee(l,` ${e.text??""}`)),g(a,i)},a=>{Pe(a,{get icon(){return e.icon},get type(){return e.type},get css(){return e.css},get title(){return e.text},get disabled(){return e.disabled},get onclick(){return e.onclick}})}),g(n,t)}ge(["click"]);function ym(n,e,t){e.onclick&&e.onclick({id:t()})}var xm=I("<i></i>"),bm=I("<div><!> </div>");function pm(n,e){ne(e,!0);let t=S(e,"id",3,""),r=S(e,"text",3,""),a=S(e,"css",3,""),i=S(e,"icon",3,"");var s=bm();s.__click=[ym,e,t];var l=C(s);R(l,i,c=>{var v=xm();F(()=>we(v,`${i()??""} svelte-g7c8cw`)),g(c,v)});var d=U(l);F(()=>{we(s,`wx-label ${a()??""} svelte-g7c8cw`),ee(d,` ${r()??""}`)}),g(n,s),re()}ge(["click"]),Xt("button",vm),Xt("separator",io),Xt("spacer",oo),Xt("label",mm),Xt("item",pm),Xt("icon",wm);function km(n,e){ne(e,!0),e.items.forEach(t=>{t.api=e.api,t.type==="search"?t.comp=Lh:t.type==="undo"?t.comp=qh:t.type==="redo"?t.comp=Uh:t.type==="spacer"?t.comp="spacer":t.type==="sort"?t.comp=Hh:t.type==="addColumn"?t.comp=Oh:t.type==="addRow"?t.comp=Fh:t.type==="template"&&t.template?t.comp=$r:t&&(t.comp=$r,t.template=t.type)}),Tt(n,{words:{...Nn,...Bn},optional:!0,children:(t,r)=>{dm(t,{get items(){return e.items},get onchange(){return e.onchange}})},$$slots:{default:!0}}),re()}class Sm{api;config;container;_toolbar;constructor(e,t){this.container=typeof e=="string"?document.querySelector(e):e,this.config=t,this._init()}destructor(){yr(this._toolbar),this._toolbar=this.api=null}setConfig(e){e&&(this.config={...this.config,...e},this._init())}setLocale(e,t){const r={locale:e};t&&(r.api=t),this.setConfig(r)}_init(){this._toolbar&&this.destructor();const e=new Map([["wx-i18n",Wt(this.config.locale)],["wx-theme",ea(this.container,this.config.theme,"material")]]);this._toolbar=Fn(km,{target:this.container,props:this._configToProps(this.config),context:e,intro:!1})}_configToProps(e){let t=[{type:"search"},{type:"spacer"},{type:"undo"},{type:"redo"},{type:"sort"},{type:"addColumn"},{type:"addRow"}];return e.items&&(t=this._normalizeItems(e.items)),{...e,items:t}}_normalizeItems(e){return e.map(t=>typeof t=="string"?{type:t}:typeof t=="function"?{type:"template",template:t}:"template"in t&&!t.type?{type:"template",template:t.template}:t)}}new Date().valueOf();function na(n){return typeof n=="string"&&n.length===20&&parseInt(n.substr(7))>1e12}class Im{constructor(){this._nextHandler=null,this._handlers={},this._tag=new WeakMap,this.exec=this.exec.bind(this)}on(e,t,r){let a=this._handlers[e];a?r&&r.intercept?a.unshift(t):a.push(t):a=this._handlers[e]=[t],r&&r.tag&&this._tag.set(t,r.tag)}intercept(e,t,r){this.on(e,t,{...r,intercept:!0})}detach(e){for(const t in this._handlers){const r=this._handlers[t];for(let a=r.length-1;a>=0;a--)this._tag.get(r[a])===e&&r.splice(a,1)}}async exec(e,t){const r=this._handlers[e];if(r)for(let a=0;a<r.length;a++){const i=r[a](t);if(i===!1||i&&i.then&&await i===!1)return}return this._nextHandler&&await this._nextHandler.exec(e,t),t}setNext(e){return this._nextHandler=e}}const $n=Symbol(),so=0,Em=1,Cm=2;class Dm{constructor(){this.reset(!0)}reset(e=!1){this._awaitAddingQueue=[],this._queue={},this._waitPull={},this._status=[],e&&(this._idPool={},this._backId=[])}resolve(e,t){const r=this._backId[t];if(typeof r>"u")return e;const a=r[e];return typeof a>"u"?e:a}getSync(){const e=this._awaitAddingQueue;if(!e.length)return so;for(let t=0;t<e.length;t++)if(!e[t].sent)return Em;return Cm}waitSync(){return new Promise(e=>{this.getSync()===so?e():this._status.push(e)})}getId(e){return this._idPool[e]||(na(e)?null:e)}waitId(e){return new Promise(t=>{const r=this.getId(e);r!==null&&t(r);const a=this._waitPull[e]||[];a.push(t),this._waitPull[e]=a})}add(e,t,r){return new Promise((a,i)=>{if(r={...r,resolve:a,reject:i},r.debounce){const s=`${e}"/"${t.id}`,l=this._queue[s];l&&(r.resolve=d=>{l.resolve(d),a(d)},r.reject=d=>{l.reject(d),i()},clearTimeout(l.timer)),this._queue[s]=r,r.timer=setTimeout(()=>{this.tryExec(e,t,r)},r.debounce);return}this.tryExec(e,t,r)})}tryExec(e,t,r,a){const i=this.exec(e,t,r,a);return i===null?(a||this._awaitAddingQueue.push({action:e,data:t,proc:r}),!1):(i.then(s=>{const l=s&&s.id&&s.id!=t.id&&na(t.id);if(l&&(this._idPool[t.id]=s.id,this._waitPull[t.id]&&(this._waitPull[t.id].forEach(d=>d(s.id)),delete this._waitPull[t.id]),r.kind)){let d=this._backId[r.kind];d||(d=this._backId[r.kind]={}),d[s.id]=t.id}t.response=s,r.resolve(!0),a&&a(),l&&this.execQueue()},s=>{a&&a(),r.reject(s)}),!0)}exec(e,t,r,a){const i=this.correctID(t,r.ignoreID?t.id:null);if(i===$n)return null;let s;try{s=r.handler(i,e,t)}catch(l){a(),r.reject(l)}return s}correctID(e,t){let r=null;for(const a in e){const i=e[a];if(typeof i=="object"){const s=this.correctID(i,t);if(s!==i){if(s===$n)return $n;r===null&&(r={...e}),r[a]=s}}else if(na(i)){const s=this._idPool[i];if(s)r===null&&(r={...e}),r[a]=s;else if(!t)return $n}}return r||e}execQueue(){this._awaitAddingQueue.forEach(e=>{if(!e.sent){const t=()=>this._finishQueue(e);this.tryExec(e.action,e.data,e.proc,t)&&(e.sent=!0)}})}_finishQueue(e){if(this._awaitAddingQueue=this._awaitAddingQueue.filter(t=>t!==e),!this._awaitAddingQueue.length&&this._status.length){const t=[...this._status];this._status=[],t.forEach(r=>r())}}}class Mm extends Im{constructor(e,t){super(),this._customHeaders={},this._batchQueue=[],this._batchTimeout=null,this._url=e,this._batchUrl=t?.batchURL,this._queue=new Dm;const r=this.getHandlers();for(const a in r)this.on(a,i=>{if(!i.skipProvider)return this._queue.add(a,i,r[a])})}getHandlers(){return{}}setHeaders(e){this._customHeaders=e}getQueue(){return this._queue}async send(e,t,r,a={}){return this._batchUrl&&t!=="GET"?this.sendBatchRequest(e,t,r,a):this.sendRequest(e,t,r,a)}async sendBatchRequest(e,t,r,a){return new Promise(i=>{this._batchQueue.push({url:e,method:t,data:r,resolve:i}),this._batchTimeout&&clearTimeout(this._batchTimeout),this._batchTimeout=setTimeout(async()=>{const s=[...this._batchQueue];if(this._batchQueue=[],s.length>1){const l=s.map(c=>({url:c.url,method:c.method,data:{...c.data}})),d=await this.sendRequest(this._batchUrl,"POST",l);s.forEach((c,v)=>c.resolve(d[v]))}else{const l=await this.sendRequest(e,t,r,a);i(l)}},10)})}toPayload(e){return JSON.stringify(e)}async sendRequest(e,t,r,a={}){const i={"Content-Type":"application/json",...a,...this._customHeaders},s={method:t,headers:i};r&&(s.body=typeof r=="object"?this.toPayload(r):r);const l=this._url.charAt(-1)==="/"||e[0]==="/"?"":"/";return fetch(`${this._url}${l}${e||""}`,s).then(d=>d.json())}}const Bt=1,er=2,tr=3,lo=4,Am=5;class Tm extends Mm{constructor(e){super(e)}getHandlers(){return{"add-card":{ignoreID:!0,kind:Bt,handler:e=>(e.card=this.prepareCard(e.card),this.send("cards","POST",e))},"update-card":{debounce:500,handler:e=>(e.card=this.prepareCard(e.card),this.send(`cards/${e.id}`,"PUT",e))},"move-card":{handler:e=>this.send(`cards/${e.id}/move`,"PUT",e)},"delete-card":{handler:e=>this.send(`cards/${e.id}`,"DELETE")},"add-column":{ignoreID:!0,kind:tr,handler:e=>this.send("columns","POST",e)},"update-column":{debounce:500,handler:e=>this.send(`columns/${e.id}`,"PUT",e)},"move-column":{handler:e=>this.send(`columns/${e.id}/move`,"PUT",e)},"delete-column":{handler:e=>this.send(`columns/${e.id}`,"DELETE")},"add-row":{ignoreID:!0,kind:er,handler:e=>this.send("rows","POST",e)},"update-row":{debounce:500,handler:e=>this.send(`rows/${e.id}`,"PUT",e)},"move-row":{handler:e=>this.send(`rows/${e.id}/move`,"PUT",e)},"delete-row":{handler:e=>this.send(`rows/${e.id}`,"DELETE")},"add-vote":{handler:e=>this.send(`cards/${e.cardId}/vote`,"POST")},"delete-vote":{handler:e=>this.send(`cards/${e.cardId}/vote`,"DELETE")},"add-comment":{ignoreID:!0,handler:e=>this.send(`cards/${e.cardId}/comments`,"POST",e.comment)},"update-comment":{handler:e=>this.send(`cards/${e.cardId}/comments/${e.id}`,"PUT",e.comment)},"delete-comment":{handler:e=>this.send(`cards/${e.cardId}/comments/${e.id}`,"DELETE")},"add-link":{ignoreID:!0,kind:lo,handler:e=>this.send("links","POST",e)},"delete-link":{handler:e=>this.send(`links/${e.id}`,"DELETE")}}}getCards(){return this.send("cards","GET").then(this.parseCards)}getColumns(){return this.send("columns","GET")}getRows(){return this.send("rows","GET")}getUsers(){return this.send("users","GET")}getLinks(){return this.send("links","GET")}getIDResolver(){return this.getQueue().resolve.bind(this.getQueue())}parseCards(e){return e.forEach(t=>(t.end_date&&(t.end_date=new Date(t.end_date)),t.start_date&&(t.start_date=new Date(t.start_date)),t)),e}prepareCard(e){return e?{...e,users:e.users||null}:null}}function Pm(n,e){function t(f){return"id"in f&&(f.id=e(f.id,Bt)),"column"in f&&(f.column=e(f.column,tr)),"row"in f&&(f.row=e(f.row,er)),f}function r(f){return"id"in f&&(f.id=e(f.id,er)),f}function a(f){return"id"in f&&(f.id=e(f.id,tr)),f}function i(f){return"id"in f&&(f.id=e(f.id,lo)),"source"in f&&(f.source=e(f.source,Bt)),"target"in f&&(f.target=e(f.target,Bt)),f}function s(f){return"id"in f&&(f.id=e(f.id,Am)),"cardId"in f&&(f.cardId=e(f.cardId,Bt)),f}function l(f){return f.cardId=e(f.cardId,Bt),f}function d(f){const m=t(f.card);switch(m.start_date=m.start_date?new Date(m.start_date):null,m.end_date=m.end_date?new Date(m.end_date):null,f.type){case"add-card":n.exec(f.type,{skipProvider:!0,card:m,select:!1});break;case"update-card":n.exec("update-card",{skipProvider:!0,id:m.id,card:m});break;case"delete-card":n.exec("delete-card",{skipProvider:!0,id:m.id});break;case"move-card":{n.exec("move-card",{skipProvider:!0,id:m.id,rowId:m.row,columnId:m.column,before:e(f.before,Bt)});break}}}function c(f){const m=a(f.column);switch(f.type){case"add-column":n.exec("add-column",{skipProvider:!0,column:m});break;case"delete-column":n.exec("delete-column",{skipProvider:!0,id:m.id});break;case"update-column":n.exec("update-column",{skipProvider:!0,id:m.id,column:m});break;case"move-column":n.exec("move-column",{skipProvider:!0,id:m.id,before:e(f.before,tr)})}}function v(f){const m=r(f.row);switch(f.type){case"add-row":n.exec("add-row",{skipProvider:!0,row:m});break;case"delete-row":n.exec("delete-row",{skipProvider:!0,id:m.id});break;case"update-row":n.exec("update-row",{skipProvider:!0,id:m.id,row:m});break;case"move-row":n.exec("move-row",{skipProvider:!0,id:m.id,before:e(f.before,er)})}}function u(f){const m=i(f.link);switch(f.type){case"add-link":n.exec("add-link",{skipProvider:!0,id:m.id,link:m});break;case"delete-link":n.exec("delete-link",{skipProvider:!0,id:m.id})}}function h(f){const m=s(f.comment);switch(f.type){case"add-comment":n.exec("add-comment",{skipProvider:!0,id:m.id,cardId:m.cardId,comment:m});break;case"update-comment":n.exec("update-comment",{skipProvider:!0,id:m.id,cardId:m.cardId,comment:m});break;case"delete-comment":n.exec("delete-comment",{skipProvider:!0,id:m.id,cardId:m.cardId})}}function _(f){const m=l(f.vote);switch(f.type){case"add-vote":n.exec("add-vote",{skipProvider:!0,cardId:m.cardId,userId:m.userId});break;case"delete-vote":n.exec("delete-vote",{skipProvider:!0,cardId:m.cardId,userId:m.userId})}}return{cards:d,columns:c,rows:v,links:u,comments:h,votes:_}}class Rm{constructor(e){const{url:t,token:r}=e;this._url=t,this._token=r,this._mode=1,this._seed=1,this._queue=[],this.data={},this.api={},this._events={}}headers(){return{Accept:"application/json","Content-Type":"application/json","Remote-Token":this._token}}fetch(e,t){const r={credentials:"include",headers:this.headers()};return t&&(r.method="POST",r.body=t),fetch(e,r).then(a=>a.json())}load(e){return e&&(this._url=e),this.fetch(this._url).then(t=>this.parse(t))}parse(e){const{key:t,websocket:r}=e;t&&(this._token=e.key);for(const a in e.data)this.data[a]=e.data[a];for(const a in e.api){const i=this.api[a]={},s=e.api[a];for(const l in s)i[l]=this._wrapper(a+"."+l)}return r&&this.connect(),this}connect(){const e=this._socket;e&&(this._socket=null,e.onclose=function(){},e.close()),this._mode=2,this._socket=function(t,r,a,i){let s=r;s[0]==="/"&&(s=document.location.protocol+"//"+document.location.host+r),s=s.replace(/^http(s|):/,"ws$1:");const l=s.indexOf("?")!=-1?"&":"?";s=`${s}${l}token=${a}&ws=1`;const d=new WebSocket(s);return d.onclose=()=>setTimeout(()=>t.connect(),2e3),d.onmessage=c=>{const v=JSON.parse(c.data);switch(v.action){case"result":t.result(v.body,[]);break;case"event":t.fire(v.body.name,v.body.value);break;case"start":i();break;default:t.onError(v.data)}},d}(this,this._url,this._token,()=>(this._mode=3,this._send(),this._resubscribe(),this))}_wrapper(e){return function(){const t=[].slice.call(arguments);let r=null;const a=new Promise((i,s)=>{r={data:{id:this._uid(),name:e,args:t},status:1,resolve:i,reject:s},this._queue.push(r)});return this.onCall(r,a),this._mode===3?this._send(r):setTimeout(()=>this._send(),1),a}.bind(this)}_uid(){return(this._seed++).toString()}_send(e){if(this._mode==2)return void setTimeout(()=>this._send(),100);const t=e?[e]:this._queue.filter(a=>a.status===1);if(!t.length)return;const r=t.map(a=>(a.status=2,a.data));this._mode!==3?this.fetch(this._url,JSON.stringify(r)).catch(a=>this.onError(a)).then(a=>this.result(a,r)):this._socket.send(JSON.stringify({action:"call",body:r}))}result(e,t){const r={};if(e)for(let a=0;a<e.length;a++)r[e[a].id]=e[a];else for(let a=0;a<t.length;a++)r[t[a].id]={id:t[a].id,error:"Network Error",data:null};for(let a=this._queue.length-1;a>=0;a--){const i=this._queue[a],s=r[i.data.id];s&&(this.onResponse(i,s),s.error?i.reject(s.error):i.resolve(s.data),this._queue.splice(a,1))}}on(e,t){const r=this._uid();let a=this._events[e];const i=!!a;return i||(a=this._events[e]=[]),a.push({id:r,handler:t}),i||this._mode!=3||this._socket.send(JSON.stringify({action:"subscribe",name:e})),{name:e,id:r}}_resubscribe(){if(this._mode==3)for(const e in this._events)this._socket.send(JSON.stringify({action:"subscribe",name:e}))}detach(e){if(!e){if(this._mode==3)for(const i in this._events)this._socket.send(JSON.stringify({action:"unsubscribe",key:i}));return void(this._events={})}const{id:t,name:r}=e,a=this._events[r];if(a){const i=a.filter(s=>s.id!=t);i.length?this._events[r]=i:(delete this._events[r],this._mode==3&&this._socket.send(JSON.stringify({action:"unsubscribe",name:r})))}}fire(e,t){const r=this._events[e];if(r)for(let a=0;a<r.length;a++)r[a].handler(t)}onError(e){return null}onCall(e,t){}onResponse(e,t){}}class Lm{_remote;_ready;constructor(e,t){const r=new Rm({url:e,token:t});r.fetch=function(a,i){const s={headers:this.headers()};return i&&(s.method="POST",s.body=i),fetch(a,s).then(l=>l.json())},this._ready=r.load().then(a=>this._remote=a)}ready(){return this._ready}on(e,t){this.ready().then(r=>{if(typeof e=="string")r.on(e,t);else for(const a in e)r.on(a,e[a])})}}const Fm={en:{...Nn,...Bn},de:{...Ds,...ys},cn:{...Cs,...xs},es:{...Ms,...bs},fr:{...As,...ps},it:{...Ts,...ks},jp:{...Ps,...Ss},pt:{...Rs,...Is},ru:{...Ls,...Es}};return Le.Editor=Gh,Le.Kanban=Yh,Le.RemoteEvents=Lm,Le.RestDataProvider=Tm,Le.Toolbar=Sm,Le.defaultCardShape=_n,Le.defaultEditorConfig=jn,Le.defaultEditorShape=Ur,Le.enableSalesForce=ro,Le.getDefaultCardMenuItems=Ti,Le.getDefaultColumnMenuItems=Pi,Le.getDefaultRowMenuItems=Ri,Le.kanbanUpdates=Pm,Le.locales=Fm,Le.locateID=yn,Le.salesForceEnv=Yn,Le.tempID=Hn,Le.template=Kh,Object.defineProperty(Le,Symbol.toStringTag,{value:"Module"}),Le}({});
